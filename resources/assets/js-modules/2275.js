__d(function(e,t,r,s){Object.defineProperty(s,"__esModule",{value:!0});var n=t(417),a=t(2225),i=t(2262),o=t(2263),u=t(2243),p=babelHelpers.interopRequireWildcard(u),l=t(2264),c=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.getViewerID=function(){return Promise.resolve().then(function(){return l.TRIP_SUPPORT_VIEWER_ID})},t.prototype.loadParticipants=function(){return Promise.resolve([])},t.prototype.loadThread=function(e){var t=this,r=e.threadID;return this.messages=this.messages||{},(0,i.getHelpThread)(r).then(function(e){var s=e.helpThread,i=e.issueAttachments,o=e.reservation;t.updateMessagesWithHelpThread(s,i);var u=t.messages[r],l=0;return s&&s.issues&&(l=Math.max.apply(Math,babelHelpers.toConsumableArray(s.issues.map(function(e){return e.tree_major_version})))),new a.Thread({type:p.TRIP_SUPPORT,id:r,participants:t.generateParticipants(u),meta:{subtitle:o&&o.listing&&o.listing.city,maxMajorVersion:l},items:new n.List(u)})})},t.prototype.updateMessagesWithHelpThread=function(e,t){var r=e.id,s=(0,o.helpThreadToMessages)(e,t),a=new n.Set(s.map(function(e){return e.id}));return this.messages[r]=(this.messages[r]||[]).filter(function(e){return!a.has(e.id)}).concat(s),s},t.prototype.generateParticipants=function(e){return new n.Set(e.map(function(e){return e.sender}))},t}(a.MessagingDataSource);s.default=c},2275);