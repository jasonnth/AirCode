__d(function(e,t,i,r){Object.defineProperty(r,"__esModule",{value:!0});var s=t(412),n=babelHelpers.interopRequireDefault(s),a=t(271),o=babelHelpers.interopRequireDefault(a),l=t(44),u=t(790),p=t(654),g=t(759),c=babelHelpers.interopRequireDefault(g),b=t(379),f=babelHelpers.interopRequireDefault(b),d=t(773),h=babelHelpers.interopRequireDefault(d),v=t(2205),R=babelHelpers.interopRequireDefault(v),T=t(1403),w=babelHelpers.interopRequireDefault(T),y=t(1023),m=t(787),C=babelHelpers.interopRequireDefault(m),H=t(1036),P=babelHelpers.interopRequireDefault(H),q=t(410),_=babelHelpers.interopRequireDefault(q),S=t(2175),D=t(2191),E=t(2192),x=t(2178),A=t(1923),O=babelHelpers.interopRequireWildcard(A),j=t(2195),F=babelHelpers.interopRequireDefault(j),I=y.ThemedStyleSheet.create(function(){return{container:{flex:1}}}),G={changeReview:n.default.func.isRequired,changeTag:n.default.func.isRequired,isSaving:n.default.bool.isRequired,review:D.ReviewShape.isRequired,questions:D.QuestionList.isRequired,saveReview:n.default.func.isRequired,submitReview:n.default.func.isRequired},L=function(e){function t(i,r){babelHelpers.classCallCheck(this,t);var s=babelHelpers.possibleConstructorReturn(this,e.call(this,i,r));return s.state={isSubmitting:!1},s.onTagsChange=s.onTagsChange.bind(s),s.onPrimaryPress=s.onPrimaryPress.bind(s),s.getValueFor=s.getValueFor.bind(s),s}return babelHelpers.inherits(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.review,i=t.hasSubmitted;this.state.isSubmitting&&i&&((0,x.logConfirmCategoryFeedback)(t),this.setState({isSubmitting:!1}),_.default.push(O.TRIP_THANK_YOU))},t.prototype.getValueFor=function(e){var t=this.props.review.selectedListingTags,i=e.choices.find(function(e){return t.includes(e.value)});return i&&i.value},t.prototype.onPrimaryPress=function(){var e=this.props.review;(0,x.isGoodTripReview)(e)?(this.props.saveReview(),(0,x.logConfirmCategoryFeedback)(e),_.default.push(O.TRIP_PRIVATE_FEEDBACK)):(this.setState({isSubmitting:!0}),this.props.submitReview())},t.prototype.onTagChange=function(e,t){var i=this.props.review;(0,x.logToggleKeywords)(i,(0,x.tagsAfterSingleSelectTagChange)(i,e,t),"tell_us_more",e.category,!0),this.props.changeTag(e,t)},t.prototype.onTagsChange=function(e,t){var i=this.props.review;(0,x.logToggleKeywords)(i,t,"tell_us_more",e,t.length>i.selectedListingTags.length),this.props.changeReview({selectedListingTags:t})},t.prototype.componentWillUnmount=function(){(0,x.logDismissCategoryFeedback)(this.props.review)},t.prototype.render=function(){var e=this,t=this.props,i=t.isSaving,r=t.review,s=t.questions,n=this.state.isSubmitting,a=s.filter(function(e){return x.CATEGORIES_ON_TRIP_CATEGORY_PAGE.includes(e.category)});return babelHelpers.jsx(l.View,{style:I.container},void 0,babelHelpers.jsx(C.default,{withInsets:[P.default]},void 0,babelHelpers.jsx(h.default,{title:f.default.phrase("Tell us more about the trip",null,"Title on the category feedback screen for the trips review flow")}),a.map(function(t){return t.allowMultipleTags?babelHelpers.jsx(w.default,{babu:!0,smallPlus:!0,divider:"none",title:t.text,onChange:function(i){return e.onTagsChange(t.category,i)},options:t.choices,values:r.selectedListingTags,showTextInput:t.types.includes(x.COMMENT_CATEGORY_TYPE)},t.category):babelHelpers.jsx(R.default,{divider:"none",title:t.text,onChange:function(i){return e.onTagChange(t,i)},options:t.choices,value:e.getValueFor(t),showTextInput:t.types.includes(x.COMMENT_CATEGORY_TYPE)},t.category)})),babelHelpers.jsx(P.default,{light:!0,transparent:!0,onPrimaryPress:this.onPrimaryPress,primaryLoading:n&&i}),babelHelpers.jsx(F.default,{onSaveTryAgainPress:this.onPrimaryPress}))},t}(o.default.Component);L.propTypes=G,r.default=(0,u.connect)(function(e){return(0,c.default)((0,S.rootSelector)(e),["isSaving","review","questions"])},function(e){return(0,p.bindActionCreators)({changeReview:E.changeReview,changeTag:E.changeTag,saveReview:E.saveReview,submitReview:E.submitReview},e)})(L)},2204);