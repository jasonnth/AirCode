__d(function(t,e,i,r){"use strict";var n=e(279),s=e(280),o=e(281),u=e(213),a=e(23),h=e(18),p=n.AT_TARGET,l=n.BUBBLING_PHASE,_=n.CAPTURING_PHASE,v=new u(["willfocus","didfocus"]),c=function(){function t(){babelHelpers.classCallCheck(this,t),this._bubbleEventEmitter=new s(this),this._captureEventEmitter=new s(this),this._currentRoute=null,this.__node=new o(this),this._emitCounter=0,this._emitQueue=[],this.addListener("willfocus",this._onFocus),this.addListener("didfocus",this._onFocus)}return t.prototype.appendChild=function(t){this.__node.appendChild(t.__node)},t.prototype.addListener=function(t,e,i){v.has(t)&&(i=!1);var r=i?this._captureEventEmitter:this._bubbleEventEmitter;return r?r.addListener(t,e,this):{remove:a}},t.prototype.emit=function(t,e,i){var r=this;if(this._emitCounter>0){var s=Array.prototype.slice.call(arguments);return void this._emitQueue.push(s)}if(this._emitCounter++,v.has(t))this.__emit(t,e,null,{defaultPrevented:!1,eventPhase:p,propagationStopped:!0,target:this});else{for(var o=[this],u=this.parent;u;)o.unshift(u),u=u.parent;var a=!1,h=!1,c=function(t){a=a||t.isPropagationStopped(),h=h||t.defaultPrevented};o.some(function(i){if(a)return!0;var n={defaultPrevented:h,eventPhase:_,propagationStopped:a,target:r};i.__emit(t,e,c,n)},this),o.reverse().some(function(i){if(a)return!0;var n={defaultPrevented:h,eventPhase:l,propagationStopped:a,target:r};i.__emit(t,e,c,n)},this)}if(i){var d=n.pool(t,this,e);a&&d.stopPropagation(),h&&d.preventDefault(),i.call(this,d),d.dispose()}for(this._emitCounter--;this._emitQueue.length;){var s=this._emitQueue.shift();this.emit.apply(this,s)}},t.prototype.dispose=function(){this._bubbleEventEmitter&&this._bubbleEventEmitter.removeAllListeners(),this._captureEventEmitter&&this._captureEventEmitter.removeAllListeners(),this._bubbleEventEmitter=null,this._captureEventEmitter=null,this._currentRoute=null},t.prototype.__emit=function(t,e,i,r){var n;switch(r.eventPhase){case _:n=this._captureEventEmitter;break;case p:case l:n=this._bubbleEventEmitter;break;default:h(!1,"invalid event phase %s",r.eventPhase)}r.target===this&&(r.eventPhase=p),n&&n.emit(t,e,i,r)},t.prototype._onFocus=function(t){h(t.data&&t.data.hasOwnProperty("route"),'event type "%s" should provide route',t.type),this._currentRoute=t.data.route},babelHelpers.createClass(t,[{key:"parent",get:function(){var t=this.__node.getParent();return t?t.getValue():null}},{key:"top",get:function(){for(var t=null,e=this.__node.getParent();e;)t=e.getValue(),e=e.getParent();return t}},{key:"currentRoute",get:function(){return this._currentRoute}}]),t}();i.exports=c},278);