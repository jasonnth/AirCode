__d(function(e,n,t,r){"use strict";function a(){E||(E=I>0?setTimeout(i,0+m):setImmediate(i))}function i(){E=0;var e=p.size;h.forEach(function(e){return p.add(e)}),T.forEach(function(e){return p.delete(e)});var n=p.size;if(0!==e&&0===n?l.emit(v.Events.interactionComplete):0===e&&0!==n&&l.emit(v.Events.interactionStart),0===n)for(;w.hasTasksToProcess();)if(w.processNext(),I>0&&o.getEventLoopRunningTime()>=I){a();break}h.clear(),T.clear()}var o=n(13),c=n(86),s=n(213),u=n(243),d=(n(244),n(18)),f=n(99),l=new c,m=0,v={Events:f({interactionStart:!0,interactionComplete:!0}),runAfterInteractions:function(e){var n=[],t=new Promise(function(t){a(),e&&n.push(e),n.push({run:t,name:"resolve "+(e&&e.name||"?")}),w.enqueueTasks(n)});return{then:t.then.bind(t),done:function(){if(t.done)return t.done.apply(t,arguments)},cancel:function(){w.cancelTasks(n)}}},createInteractionHandle:function(){a();var e=++k;return h.add(e),e},clearInteractionHandle:function(e){d(!!e,"Must provide a handle to clear."),a(),h.delete(e),T.add(e)},addListener:l.addListener.bind(l),setDeadline:function(e){I=e}},p=new s,h=new s,T=new s,w=new u({onMoreTasks:a}),E=0,k=0,I=-1;t.exports=v},242);