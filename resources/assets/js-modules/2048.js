__d(function(e,t,r,a){function l(e,t,r,a){if(a)return{title:c.default.phrase("Your %{location} favorites",{location:t.localized_name_for_guest_page},"title"),subTitle:r?c.default.phrase("%{count} saved places",{count:r.length},"subtitle"):" "};switch(e){case Z.CITY:return{title:c.default.phrase("Things to do in %{location}",{location:t.localized_name_for_guest_page},"title"),subTitle:c.default.phrase("Here's your key to the city. A definitive guide of the best local spots, as told by local Airbnb hosts",null,"subtitle")};case Z.TOP_CATEGORY:if(!t.localized_name_for_guest_page||!t.current_market_guidebook)return ie;var l=t.current_market_guidebook.localized_name_for_guest_page,i=(0,F.default)("title."+t.name);return{title:"function"==typeof i&&l&&i(l),subTitle:(0,F.default)("subtitle."+t.name)};case Z.SUB_CATEGORY:if(!t.localized_name_for_guest_page||!t.current_market_guidebook)return ie;var o=t.current_market_guidebook.localized_name_for_guest_page,u=t.localized_name_for_guest_page;return{title:c.default.phrase("Best %{sub_category} in %{location}",{location:o,sub_category:u},"title")};case Z.LISTING:return t.host_listing&&t.host_listing.user?{title:c.default.phrase("%{name}'s Guidebook",{name:t.host_listing.user.first_name},"title"),subTitle:t.host_listing.user.about}:ie;default:return ie}}function i(e,t){var r=new K.default((t.current_market_guidebook||t).guidebook_url).path;return new K.default(e).setPath(r).updateQuery({bookmark:"true"}).stringify()}function o(e){var t=(0,C.default)(e.current_market_guidebook||e,oe);return babelHelpers.extends({},t,{current_market_guidebook:t})}Object.defineProperty(a,"__esModule",{value:!0});var u,s=t(412),n=babelHelpers.interopRequireDefault(s),d=t(271),p=(babelHelpers.interopRequireDefault(d),t(44)),b=t(379),c=babelHelpers.interopRequireDefault(b),f=t(654),g=t(841),_=babelHelpers.interopRequireDefault(g),h=t(2049),R=babelHelpers.interopRequireDefault(h),H=t(1038),m=babelHelpers.interopRequireDefault(H),k=t(787),v=babelHelpers.interopRequireDefault(k),y=t(828),w=babelHelpers.interopRequireDefault(y),q=t(790),P=t(410),D=babelHelpers.interopRequireDefault(P),x=t(759),C=babelHelpers.interopRequireDefault(x),T=t(815),j=babelHelpers.interopRequireDefault(T),O=t(376),G=babelHelpers.interopRequireDefault(O),I=t(713),S=babelHelpers.interopRequireDefault(I),A=t(2035),V=babelHelpers.interopRequireWildcard(A),M=t(1920),z=babelHelpers.interopRequireWildcard(M),E=t(2050),F=babelHelpers.interopRequireDefault(E),Y=t(2051),L=babelHelpers.interopRequireDefault(Y),B=t(2054),N=babelHelpers.interopRequireDefault(B),U=t(2046),Z=t(2044),W=t(2055),Q=babelHelpers.interopRequireDefault(W),J=t(2038),K=babelHelpers.interopRequireDefault(J),X=t(2033),$=t(2042),ee=babelHelpers.interopRequireDefault($),te=t(2056),re=t(2057),ae=babelHelpers.interopRequireDefault(re),le=(u={},babelHelpers.defineProperty(u,Z.CITY,"top_category_guidebooks"),babelHelpers.defineProperty(u,Z.TOP_CATEGORY,"sub_category_guidebooks"),u),ie={title:" "},oe=["header_image_url","current_market_guidebook","localized_name_for_guest_page","name"],ue={expandedReviews:n.default.object,isFavsView:n.default.bool,loadingStatus:n.default.string.isRequired,guidebook:n.default.object,guidebookPlaces:n.default.array,url:n.default.string,viewId:n.default.number.isRequired,fetch:n.default.func.isRequired,highlightZoomPlaceOnMap:n.default.func.isRequired,retryToFetchView:n.default.func.isRequired,toggleHeart:n.default.func.isRequired,toggleRowReviews:n.default.func.isRequired,pressedCloseGuidebookScreen:n.default.func.isRequired},se=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.render=function(){var e=this.props,t=e.expandedReviews,r=e.guidebook,a=e.guidebookPlaces,u=e.isFavsView,s=e.loadingStatus,n=e.url,d=e.viewId,b=e.fetch,f=e.highlightZoomPlaceOnMap,g=e.retryToFetchView,h=e.toggleHeart,H=e.toggleRowReviews,k=e.pressedCloseGuidebookScreen,y=void 0,q=void 0,P=ee.default.get(n),x=P.handler;return r&&(q=l(x,r,a,u),y="Everything Else"!==r.name&&!u&&r[le[x]]),babelHelpers.jsx(N.default,{onRetryFetch:function(){return g(d)}},void 0,!r&&s===X.LOADING&&babelHelpers.jsx(_.default,{}),r&&babelHelpers.jsx(v.default,{},void 0,babelHelpers.jsx(w.default,{image:r.header_image_url,title:q.title,description:q.subTitle,onBackPress:k},void 0,!u&&babelHelpers.jsx(m.default,{icon:"heart",onPress:function(){return b(i(n,r),{guidebook:o(r),persistMapRegionOfViewId:d,isFavsView:!0})}}),babelHelpers.jsx(m.default,{icon:"map",onPress:function(){return D.default.push(z.MAP,{viewId:d})}})),y&&babelHelpers.jsx(p.View,{style:ne.space}),y&&babelHelpers.jsx(Q.default,{categories:y,onPressGuidebook:function(e){return b(e.guidebook_url,{guidebook:e,currentGuidebook:r,persistMapRegionOfViewId:d})}}),y&&babelHelpers.jsx(R.default,{title:c.default.phrase("Best of the best",null,"title")}),s===X.LOADING&&babelHelpers.jsx(p.View,{style:ne.space},void 0,babelHelpers.jsx(_.default,{})),s===X.ERROR&&babelHelpers.jsx(p.View,{style:ne.sadFaceContainer},void 0,babelHelpers.jsx(j.default,{size:48,color:"#ccc",name:"sad-face"})),a&&a.map(function(e,a){return babelHelpers.jsx(L.default,{place:e,index:a,reviewsIsExpanded:t[e.primary_place.id],onPressGuidebook:function(e,t){return b(e,{currentGuidebook:r,persistMapRegionOfViewId:t&&d})},onPressHeart:function(){return h(G.default.user().id,e)},onPressHostCount:function(){return H(d,e.primary_place.id)},onPressHours:function(){return D.default.push(z.HOURS,{placeId:e.primary_place.id})},onPressMap:function(){return f(d,e)},onPressDirections:function(){return S.default.showMap((0,te.getAddressString)(e.primary_place))},onPressDetails:function(){return D.default.push(z.PLACE,{placeId:e.primary_place.id,url:"things-to-do/"+e.primary_place.id,title:e.primary_place_name,primaryPhoto:(0,ae.default)(e)})}},e.primary_place.id)})))},t}(d.PureComponent);se.propTypes=ue;var ne=p.StyleSheet.create({space:{paddingTop:20,backgroundColor:"#fff"},sadFaceContainer:{alignItems:"center"}}),de=function(){var e=(0,U.makeCachedGuidebookPlacesSelector)();return function(t,r){var a=(0,U.viewSelector)(t,r),l=a.loadingStatus,i={expandedReviews:a.expandedReviews,guidebook:(0,U.cachedGuidebookSelector)(t,r),loadingStatus:l,url:a.url||a.nextUrl};return l===X.LOADED?babelHelpers.extends({guidebookPlaces:e(t,r)},i):i}};a.default=(0,q.connect)(de,function(e){return(0,f.bindActionCreators)((0,C.default)(V,["fetch","highlightZoomPlaceOnMap","retryToFetchView","toggleHeart","toggleRowReviews","pressedCloseGuidebookScreen"]),e)})(se)},2048);