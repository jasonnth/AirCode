__d(function(e,t,s,n){"use strict";var u=(t(244),t(18)),r=function(){function e(t){var s=t.onMoreTasks;babelHelpers.classCallCheck(this,e),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}return e.prototype.enqueue=function(e){this._getCurrentQueue().push(e)},e.prototype.enqueueTasks=function(e){var t=this;e.forEach(function(e){return t.enqueue(e)})},e.prototype.cancelTasks=function(e){this._queueStack=this._queueStack.map(function(t){return babelHelpers.extends({},t,{tasks:t.tasks.filter(function(t){return-1===e.indexOf(t)})})}).filter(function(e,t){return e.tasks.length>0||0===t})},e.prototype.hasTasksToProcess=function(){return this._getCurrentQueue().length>0},e.prototype.processNext=function(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{t.gen?this._genPromise(t):t.run?t.run():(u("function"==typeof t,"Expected Function, SimpleTask, or PromiseTask, but got:\n"+JSON.stringify(t,null,2)),t())}catch(e){throw e.message="TaskQueue: Error with task "+(t.name||"")+": "+e.message,e}}},e.prototype._getCurrentQueue=function(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks},e.prototype._genPromise=function(e){var t=this;this._queueStack.push({tasks:[],popable:!1});var s=this._queueStack.length-1;e.gen().then(function(){t._queueStack[s].popable=!0,t.hasTasksToProcess()&&t._onMoreTasks()}).catch(function(t){throw t.message="TaskQueue: Error resolving Promise in task "+e.name+": "+t.message,t}).done()},e}();s.exports=r},243);