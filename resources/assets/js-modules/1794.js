__d(function(t,e,a,r){function n(t){return t?t.isStartDay&&t.isEndDay?"round":t.isStartDay?"round-left":t.isEndDay?"round-right":"square":"square"}function i(t){if(!t)return 0;var e=(0,d.default)().startOf("month");return t.map(function(t){return(0,d.default)(t.startsAt).startOf("month").diff(e,"months")}).reduce(function(t,e){return Math.min(t,e)},0)}function s(t){if(!t)return 0;var e=(0,d.default)().startOf("month");return t.map(function(t){return(0,d.default)(t.endsAt).startOf("month").diff(e,"months")}).reduce(function(t,e){return Math.max(t,e)},0)}function o(t,e,a){var r=(0,d.default)().startOf("month");return(0,f.default)(t,e+1).map(function(t){var e=r.clone().add(t,"months"),n=e.year(),i=e.month()+1,s=new Date(n,i-1,1),o=(0,y.getDaysInMonth)(i,n),u=(0,d.default)(s).weekday(),l=u-1,h=D-(u+o-1)%D,c=(0,f.default)(-l,o+h).map(function(t){return a(n,i,t)});return{year:n,month:i,dayStates:c}})}Object.defineProperty(r,"__esModule",{value:!0});var u=e(1681),d=babelHelpers.interopRequireDefault(u),l=e(1191),f=babelHelpers.interopRequireDefault(l),h=e(1696),c=babelHelpers.interopRequireDefault(h),p=e(1789),y=e(1795),v=e(1752),D=7,m=function(){function t(){babelHelpers.classCallCheck(this,t),this.getDayPropsForCalendar=this.getDayPropsForCalendar.bind(this),this.getDayPropsForDatePicker=this.getDayPropsForDatePicker.bind(this)}return t.prototype.update=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.duration,n=a.timezone;this.structureTrips(t,e,n),this.firstMonthOffset=i(t),this.lastMonthOffset=s(t),r&&this.markUnavailableDays(r)},t.prototype.structureTrips=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.structure=t.reduce(function(t,r){var n=r.associatedTripTemplateId,i=r.durationDays,s=r.endsAt,o=r.id,u=r.isTentative,d=r.startsAt,l=(0,y.getTimeWithZone)(d,a).startOf("day"),f=(0,y.getTimeWithZone)(s,a).startOf("day"),h=i||f.diff(l,"days")+1,D=(0,v.isBookedTripInstance)(r),m=(0,v.isPastTripInstance)(r),g=!u,b=e[n],P=(0,v.getTripTemplatePhoto)(b),I=t;return(0,c.default)(h,function(t){var e=l.clone().add(t,"days").format(p.API_DATE_FORMAT),a=0===t,r=t===h-1,n=a?P:null;I[e]={date:e,image:n,isBooked:D,isEndDay:r,isPast:m,isStartDay:a,isTentative:u,isUnavailable:g,tripInstanceId:o}}),I},{})},t.prototype.markUnavailableDays=function(t){var e=this;Object.keys(this.structure).forEach(function(a){var r=e.structure[a];if(r&&r.isStartDay&&!r.isTentative){var n=(0,d.default)(a).startOf("day"),i=t-1;(0,c.default)(i,function(t){var a=n.clone().subtract(t+1,"days").format(p.API_DATE_FORMAT);e.structure[a]=babelHelpers.extends({},e.structure[a],{isUnavailable:!0})})}})},t.prototype.getTripInstanceId=function(t){var e=this.structure[t];return e&&e.tripInstanceId},t.prototype.isUnavailable=function(t){var e=this.structure[t];return!(!e||!e.isUnavailable)},t.prototype.getDayPropsForCalendar=function(t,e,a){var r=(0,y.getDaysInMonth)(e,t),i=a>0&&a<=r,s=i?(0,d.default)([t,e-1,a]).format(p.API_DATE_FORMAT):"invalid",o=this.structure[s],u=!(!o||!o.tripInstanceId),l=!(!o||!o.isBooked),f=!(!o||!o.isPast),h=o&&o.image,c=i&&u&&!l,v=i&&u&&l,D={available:!0,date:s,day:i?a:null,grey:f,highlighted:c,image:h,inMonth:i,selected:v};return c&&(D.highlightedState=n(o)),v&&(D.selectedState=n(o)),D},t.prototype.getDayPropsForDatePicker=function(t,e,a){var r=(0,y.getDaysInMonth)(e,t),i=a>0&&a<=r,s=i?(0,d.default)([t,e-1,a]).format(p.API_DATE_FORMAT):"invalid",o=this.structure[s],u=!(!o||!o.tripInstanceId),l=!(o&&o.isUnavailable),f=!(!o||!o.isBooked),h=i&&(0,d.default)().diff(s)>0,c=!(!o||!o.isPast),v=o&&o.image,D=!(!o||!o.isTentative),m=i&&l&&!u&&!h,g=i&&u&&!f&&!D,b=i&&u&&f&&!D,P={available:!0,dashed:m,date:s,day:i?a:null,disabled:h,grey:c,highlighted:g,image:v,inMonth:i,selected:b,tentative:D};return g&&(P.highlightedState=n(o)),(b||D)&&(P.selectedState=n(o)),P},t.prototype.buildCalendarMonthProps=function(){return o(0,Math.max(this.lastMonthOffset,0+p.BOOKING_WINDOW-1),this.getDayPropsForCalendar)},t.prototype.buildDatePickerMonthProps=function(){return o(0,Math.max(this.lastMonthOffset,0+p.BOOKING_WINDOW-1),this.getDayPropsForDatePicker)},t}();r.default=m},1794);