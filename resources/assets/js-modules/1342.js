__d(function(e,t,r,s){"use strict";var o=t(44),n=t(1343),i=t(271),a=t(1344),l=function(){var e;return(e=console).log.apply(e,arguments)},h=t(671),p=t(1345),c=p.computeWindowedRenderLimits,u=!1,d=function(e){function t(r){babelHelpers.classCallCheck(this,t);var s=babelHelpers.possibleConstructorReturn(this,e.call(this,r));return f.call(s),s._updateCellsToRenderBatcher=new n(s._updateCellsToRender,s.props.updateCellsBatchingPeriod),s.state={first:0,last:Math.min(s.props.getItemCount(s.props.data),s.props.initialNumToRender)-1},s}return babelHelpers.inherits(t,e),t.prototype.scrollToEnd=function(e){var t=!e||e.animated,r=this.props.getItemCount(this.props.data)-1,s=this._getFrameMetricsApprox(r),o=s.offset+s.length+this._footerLength-this._scrollMetrics.visibleLength;this._scrollRef.scrollTo(this.props.horizontal?{x:o,animated:t}:{y:o,animated:t})},t.prototype.scrollToIndex=function(e){var t=this.props,r=t.data,s=t.horizontal,o=t.getItemCount,n=e.animated,i=e.index,a=e.viewPosition;if(i>=0&&i<o(r)){var l=this._getFrameMetricsApprox(i),h=Math.max(0,l.offset-(a||0)*(this._scrollMetrics.visibleLength-l.length));this._scrollRef.scrollTo(s?{x:h,animated:n}:{y:h,animated:n})}},t.prototype.scrollToItem=function(e){for(var t=e.item,r=this.props,s=r.data,o=r.getItem,n=r.getItemCount,i=n(s),a=0;a<i;a++)if(o(s,a)===t){this.scrollToIndex(babelHelpers.extends({},e,{index:a}));break}},t.prototype.scrollToOffset=function(e){var t=e.animated,r=e.offset;this._scrollRef.scrollTo(this.props.horizontal?{x:r,animated:t}:{y:r,animated:t})},t.prototype.componentWillUnmount=function(){this._updateViewableItems(null),this._updateCellsToRenderBatcher.dispose()},t.prototype.componentWillReceiveProps=function(e){var t=e.data,r=e.getItemCount,s=e.maxToRenderPerBatch;this.setState({first:Math.max(0,Math.min(this.state.first,r(t)-1-s)),last:Math.max(0,Math.min(this.state.last,r(t)-1))}),this._updateCellsToRenderBatcher.schedule()},t.prototype.render=function(){var e=this.props,t=e.FooterComponent,r=e.HeaderComponent,s=e.SeparatorComponent,n=this.props,a=n.data,l=n.disableVirtualization,p=n.getItem,c=n.horizontal,d=n.keyExtractor,f=[];r&&f.push(babelHelpers.jsx(o.View,{onLayout:this._onLayoutHeader},"$header",babelHelpers.jsx(r,{})));var _=this.props.getItemCount(a);if(_>0){u=!1;var g=this.state,v=g.first,b=g.last;if(!l&&v>0){var y=this._getFrameMetricsApprox(v).offset-this._headerLength;f.push(babelHelpers.jsx(o.View,{style:babelHelpers.defineProperty({},c?"width":"height",y)},"$lead_spacer"))}for(var C=v;C<=b;C++){var x=p(a,C);h(x,"No item for index "+C);var L=d(x,C);f.push(babelHelpers.jsx(m,{cellKey:L,index:C,item:x,onLayout:this._onCellLayout,parentProps:this.props},L)),s&&C<b&&f.push(babelHelpers.jsx(s,{},"sep"+C))}if(!this._hasWarned.keys&&u&&(this._hasWarned.keys=!0),!l&&b<_-1){var M=this._getFrameMetricsApprox(b),I=this.props.getItemLayout?_-1:Math.min(_-1,this._highestMeasuredFrameIndex),R=this._getFrameMetricsApprox(I),w=R.offset+R.length-(M.offset+M.length);f.push(babelHelpers.jsx(o.View,{style:babelHelpers.defineProperty({},c?"width":"height",w)},"$tail_spacer"))}}return t&&f.push(babelHelpers.jsx(o.View,{onLayout:this._onLayoutFooter},"$footer",babelHelpers.jsx(t,{}))),i.cloneElement(this.props.renderScrollComponent(this.props),{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,ref:this._captureScrollRef,scrollEventThrottle:50},f)},t.prototype.componentDidUpdate=function(){this._updateCellsToRenderBatcher.schedule()},t.prototype._selectLength=function(e){return this.props.horizontal?e.width:e.height},t.prototype._selectOffset=function(e){return this.props.horizontal?e.x:e.y},t.prototype._createViewable=function(e,t){var r=this.props,s=r.data,o=r.getItem,n=r.keyExtractor,i=o(s,e);return h(i,"Missing item for index "+e),{index:e,item:i,key:n(i,e),isViewable:t}},t.prototype._updateViewableItems=function(e){var t=this,r=this.props,s=r.getItemCount,o=r.onViewableItemsChanged,n=r.viewablePercentThreshold;if(o){var i=[];e&&(i=a.computeViewableItems(n,s(e),this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this.state));var l={},h=i.map(function(e){var r=t._createViewable(e,!0);return l[r.key]=!0,r}),p=h.filter(function(e){return!t._viewableKeys[e.key]}).concat(this._viewableItems.filter(function(e){return!l[e.key]}).map(function(e){return babelHelpers.extends({},e,{isViewable:!1})}));p.length>0&&(o({viewableItems:h,changed:p}),this._viewableItems=h,this._viewableKeys=l)}},t}(i.PureComponent);d.defaultProps={disableVirtualization:!1,getItem:function(e,t){return e[t]},getItemCount:function(e){return e?e.length:0},horizontal:!1,initialNumToRender:10,keyExtractor:function(e,t){return null!=e.key?e.key:(u=!0,String(t))},maxToRenderPerBatch:10,onEndReached:function(){},onEndReachedThreshold:2,renderScrollComponent:function(e){return e.onRefresh?(h("boolean"==typeof e.refreshing,"`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify(e.refreshing)+"`"),i.createElement(o.ScrollView,babelHelpers.extends({},e,{refreshControl:babelHelpers.jsx(o.RefreshControl,{refreshing:e.refreshing,onRefresh:e.onRefresh})}))):i.createElement(o.ScrollView,e)},shouldItemUpdate:function(e,t){return!0},updateCellsBatchingPeriod:50,viewablePercentThreshold:10,windowSize:21};var f=function(){var e=this;this.state={first:0,last:this.props.initialNumToRender},this._averageCellLength=0,this._hasWarned={},this._highestMeasuredFrameIndex=0,this._headerLength=0,this._frames={},this._footerLength=0,this._scrollMetrics={visibleLength:0,contentLength:0,offset:0,dt:10,velocity:0,timestamp:0},this._scrollRef=null,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewableKeys={},this._viewableItems=[],this._captureScrollRef=function(t){e._scrollRef=t},this._onCellLayout=function(t,r,s){var o=t.nativeEvent.layout,n={offset:e._selectOffset(o),length:e._selectLength(o),index:s},i=e._frames[r];i&&n.offset===i.offset&&n.length===i.length&&s===i.index||(e._totalCellLength+=n.length-(i?i.length:0),e._totalCellsMeasured+=i?0:1,e._averageCellLength=e._totalCellLength/e._totalCellsMeasured,e._frames[r]=n,e._highestMeasuredFrameIndex=Math.max(e._highestMeasuredFrameIndex,s),e._updateCellsToRenderBatcher.schedule())},this._onLayout=function(t){e._scrollMetrics.visibleLength=e._selectLength(t.nativeEvent.layout),e.props.onLayout&&e.props.onLayout(t),e._updateCellsToRenderBatcher.schedule()},this._onLayoutFooter=function(t){e._footerLength=e._selectLength(t.nativeEvent.layout)},this._onLayoutHeader=function(t){e._headerLength=e._selectLength(t.nativeEvent.layout)},this._onContentSizeChange=function(t,r){e._scrollMetrics.contentLength=e._selectLength({height:r,width:t}),e._updateCellsToRenderBatcher.schedule()},this._onScroll=function(t){var r=t.timeStamp,s=e._selectLength(t.nativeEvent.layoutMeasurement),o=e._selectLength(t.nativeEvent.contentSize),n=e._selectOffset(t.nativeEvent.contentOffset),i=Math.max(1,r-e._scrollMetrics.timestamp);i>500&&e._scrollMetrics.dt>500&&o>5*s&&!e._hasWarned.perf&&(l("VirtualizedList: You have a large list that is slow to update - make sure shouldItemUpdate is implemented effectively and consider getItemLayout, PureComponent, etc.",{dt:i,prevDt:e._scrollMetrics.dt,contentLength:o}),e._hasWarned.perf=!0);var a=n-e._scrollMetrics.offset,h=a/i;e._scrollMetrics={contentLength:o,dt:i,offset:n,timestamp:r,velocity:h,visibleLength:s};var p=e.props,c=p.data,u=p.getItemCount,d=p.onEndReached,f=p.onEndReachedThreshold,m=p.windowSize;if(c){var _=o-s-n,g=u(c);_<f*s&&e._scrollMetrics.contentLength!==e._sentEndForContentLength&&e.state.last===g-1&&(e._sentEndForContentLength=e._scrollMetrics.contentLength,d({distanceFromEnd:_}));var v=e.state,b=v.first,y=v.last;if(b>0&&h<0||y<g-1&&h>0){if(Math.min(Math.abs(e._getFrameMetricsApprox(b).offset-n),Math.abs(e._getFrameMetricsApprox(y).offset-(n+s)))<m*s/4)return e._updateCellsToRenderBatcher.dispose({abort:!0}),void e._updateCellsToRender()}e._updateCellsToRenderBatcher.schedule()}},this._updateCellsToRender=function(){var t=e.props,r=t.data,s=t.disableVirtualization,o=t.getItemCount,n=t.onEndReachedThreshold;e._updateViewableItems(r),r&&e.setState(function(t){var i=void 0;if(s){var a=e._scrollMetrics,l=a.contentLength,h=a.offset,p=a.visibleLength,u=l-p-h,d=u<n*p?e.props.maxToRenderPerBatch:0;i={first:0,last:Math.min(t.last+d,o(r)-1)}}else i=c(e.props,t,e._getFrameMetricsApprox,e._scrollMetrics);return i})},this._getFrameMetricsApprox=function(t){var r=e._getFrameMetrics(t);if(r&&r.index===t)return r;var s=e.props.getItemLayout;return h(!s,"Should not have to estimate frames when a measurement metrics function is provided"),{length:e._averageCellLength,offset:e._averageCellLength*t}},this._getFrameMetrics=function(t){var r=e.props,s=r.data,o=r.getItem,n=r.getItemCount,i=r.getItemLayout,a=r.keyExtractor;h(n(s)>t,"Tried to get frame for out of range index "+t);var l=o(s,t),p=l&&e._frames[a(l,t)];return p&&p.index===t||i&&(p=i(s,t)),p}},m=function(e){function t(){var r,s,o;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=s=babelHelpers.possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),s._onLayout=function(e){s.props.onLayout(e,s.props.cellKey,s.props.index)},o=r,babelHelpers.possibleConstructorReturn(s,o)}return babelHelpers.inherits(t,e),t.prototype.shouldComponentUpdate=function(e,t){var r={item:this.props.item,index:this.props.index},s={item:e.item,index:e.index};return e.parentProps.shouldItemUpdate(r,s)},t.prototype.render=function(){var e=this.props,t=e.item,r=e.index,s=e.parentProps,n=s.ItemComponent,i=s.getItemLayout,a=babelHelpers.jsx(n,{item:t,index:r});return i?a:babelHelpers.jsx(o.View,{onLayout:this._onLayout},void 0,a)},t}(i.Component);r.exports=d},1342);