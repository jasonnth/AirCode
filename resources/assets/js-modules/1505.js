__d(function(e,t,r,i){function s(e){return(0,p.default)((0,n.default)(e,"airlock.frictions",[])).indexOf(P.FRICTION_TYPE_CONTACT_KBA)<0}Object.defineProperty(i,"__esModule",{value:!0});var o=t(759),l=babelHelpers.interopRequireDefault(o),a=t(534),n=babelHelpers.interopRequireDefault(a),u=t(765),p=babelHelpers.interopRequireDefault(u),d=t(412),f=babelHelpers.interopRequireDefault(d),b=t(271),A=babelHelpers.interopRequireDefault(b),c=t(44),m=t(654),B=t(790),K=t(1497),h=babelHelpers.interopRequireDefault(K),R=t(410),g=babelHelpers.interopRequireDefault(R),C=t(1443),F=babelHelpers.interopRequireWildcard(C),T=t(1475),_=babelHelpers.interopRequireWildcard(T),I=t(1506),H=babelHelpers.interopRequireDefault(I),S=t(1508),q=babelHelpers.interopRequireDefault(S),N=t(1473),D=babelHelpers.interopRequireDefault(N),O=t(1470),v=t(1491),x=babelHelpers.interopRequireDefault(v),y=t(684),P=t(1466),E=t(1500),V=babelHelpers.interopRequireDefault(E),W=t(1472),k=t(1478),M=function(e){function t(r){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,e.call(this,r));return i.state={isLoading:!1},i.handleSubmissionResult=i.handleSubmissionResult.bind(i),i.onChange=i.onChange.bind(i),i.onCloseToast=i.onCloseToast.bind(i),i.onPressNext=i.onPressNext.bind(i),i}return babelHelpers.inherits(t,e),t.prototype.onCloseToast=function(){this.props.removeAllToasts()},t.prototype.hasMaxedOutWrongAttempts=function(){return this.props.KBAWrongAttempts>=3},t.prototype.handleSubmissionResult=function(e,t){if(e){!0===(0,n.default)(t,"airlock.friction_statuses",{})[P.FRICTION_TYPE_CONTACT_KBA]?((0,h.default)(),g.default.push(F.FRICTION_SUCCESS)):this.hasMaxedOutWrongAttempts()||s(t)?(this.props.addFailedFriction(P.FRICTION_TYPE_CONTACT_KBA),g.default.push(F.AOV_FRICTION_FAILURE)):(g.default.push(F.AOV_KBA_RETRY),this.props.setKBAWrongAttempts({KBAWrongAttempts:this.props.KBAWrongAttempts+1}))}},t.prototype.onPressNext=function(e,t){var r=this;if((0,k.logPressContinue)(this.props.airlockId,k.PAGE_NAMES.KBA_SCREEN,{KBAStep:e}),!(e<0)){var i=this.props,s=i.actionName,o=i.airlockId,l=i.userId,a=i.KBAForm,n=i.submitKBAForm;if(e>=t.length-1)return(0,k.logSubmitKBAForm)(o,a),void n({actionName:s,airlockId:o,userId:l,KBAForm:a}).then(function(e){var t=e.success,i=e.payload;return r.handleSubmissionResult(t,i)});var u=t[e+1].navigationTag,p=u?{navigationTag:u}:{};g.default.push(F.AOV_KBA,{KBAStep:e+1},p)}},t.prototype.onChange=function(e,t){this.props.setKBAForm(babelHelpers.extends({},this.props.KBAForm,babelHelpers.defineProperty({},e,t)))},t.prototype.render=function(){var e=this,t=this.props,r=t.KBAForm,i=t.KBAStep,s=t.KBAVerificationDetail,o=t.isVerifying,l=(0,H.default)(s,r);return babelHelpers.jsx(c.View,{style:c.StyleSheet.absoluteFill},void 0,babelHelpers.jsx(D.default,{}),A.default.createElement(q.default,babelHelpers.extends({},l[i],{onChange:this.onChange,onPressNext:function(){return e.onPressNext(i,l)},form:r,loading:o,lastScreen:i>=l.length-1,toasts:[babelHelpers.jsx(V.default,{id:W.KBA_SUBMIT_FORM_FAILED,onPressClose:this.onCloseToast},W.KBA_SUBMIT_FORM_FAILED)]})))},t}(b.PureComponent);M.propTypes={actionName:f.default.string,addToast:f.default.func.isRequired,airlockId:f.default.number,isVerifying:f.default.bool.isRequired,KBAForm:f.default.object.isRequired,KBAStep:f.default.number,KBAVerificationDetail:x.default,KBAWrongAttempts:f.default.number,removeAllToasts:f.default.func.isRequired,setKBAForm:f.default.func.isRequired,setKBAWrongAttempts:f.default.func.isRequired,submitKBAForm:f.default.func.isRequired,addFailedFriction:f.default.func.isRequired,userId:f.default.number},M.defaultProps={actionName:null,airlockId:null,KBAStep:0,KBAVerificationDetail:null,KBAWrongAttempts:0,userId:null},i.default=(0,B.connect)(function(e){return babelHelpers.extends({KBAVerificationDetail:(0,O.KBAVerificationDetailSelector)(e)},(0,l.default)((0,O.AOVSelector)(e),["isVerifying"]),(0,l.default)((0,O.frictionManagerSelector)(e),["airlockId","actionName","userId","KBAForm","KBAWrongAttempts"]))},function(e){return(0,m.bindActionCreators)(babelHelpers.extends({},(0,l.default)(_,["setKBAForm","setKBAWrongAttempts","submitKBAForm","addFailedFriction","removeAllToasts"]),{addToast:y.addToast}),e)})(M)},1505);