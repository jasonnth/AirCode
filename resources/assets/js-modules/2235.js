__d(function(t,e,n,r){function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=e(417),c=i(f),d=e(2236),p=e(2237),m=i(p),h=e(2233),y=e(2230),I=i(y),v=function(t,e){return isNaN(t)?e:Math.max(t,e)},S=c.default.Record({id:null,type:null,data:null,participants:c.default.Set(),items:c.default.List(),isMounted:!1,isInitializing:!1,initializeError:null,isFetchingNewerItems:!1,newerItemsError:null,isFetchingOlderItems:!1,olderItemsError:null,actionStatusByType:c.default.Map(),olderItemsAvailable:!1,updateLastSeenError:null,lastSeen:null,meta:{}},"Thread"),g=function(t){return""+String(t)},T=function(t){function e(){return s(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"getItem",value:function(){function t(t){var e=g(t);return this.items.find(function(t){return g(t.id)===e})}return t}()},{key:"getActionStatus",value:function(){function t(t){return this.getIn(["actionStatusByType",String(t)])||new I.default({type:t})}return t}()},{key:"indexOf",value:function(){function t(t){return this.items.findIndex(function(e){return g(e.id)===g(t)})}return t}()},{key:"updateItem",value:function(){function t(t,e){var n=this.indexOf(t);return this.updateIn(["items",n],e)}return t}()},{key:"bulkUpdateLastSeenForItems",value:function(){function t(t,e){var n=this.get("lastSeen");return this.withMutations(function(r){r.set("items",r.get("items").map(function(r){if(t[r.id]&&r.senderID!==e)return r.withMutations(function(e){e.set("lastSeen",t[r.id]).set("readStatus",h.READ_STATUS.READ),n=v(n,e.get("lastSeen"))});if(t[r.id]){var i=t[r.id];return n=v(n,i),r.set("lastSeen",i)}return r})).set("lastSeen",n)})}return t}()},{key:"insertItemNearFront",value:function(){function t(t,e){return this.set("items",(0,d.upsertIntoSortedListAssumingNearFront)(this.items,t,e))}return t}()},{key:"insertItemNearBack",value:function(){function t(t,e){return this.set("items",(0,d.upsertIntoSortedListAssumingNearBack)(this.items,t,e))}return t}()},{key:"applyPayload",value:function(){function t(t,e){return!t||t.isEmpty()?this:this.withMutations(function(n){var r=n.items;if(t.hasItemsToRemove()){var i=c.default.Set(t.itemsToRemove.map(function(t){return t.id}));r=r.filter(function(t){return!i.has(t.id)})}if(t.hasOlderItemsToUpsert()&&(e.oldestFirst?t.olderItemsToUpsert.forEach(function(t){r=(0,d.upsertIntoSortedListAssumingNearFront)(r,t,e.sortMapper)}):t.olderItemsToUpsert.forEach(function(t){r=(0,d.upsertIntoSortedListAssumingNearBack)(r,t,e.sortMapper)})),t.hasNewerItemsToUpsert()&&(e.oldestFirst?t.newerItemsToUpsert.forEach(function(t){r=(0,d.upsertIntoSortedListAssumingNearBack)(r,t,e.sortMapper)}):t.newerItemsToUpsert.forEach(function(t){r=(0,d.upsertIntoSortedListAssumingNearFront)(r,t,e.sortMapper)})),r!==n.items&&n.set("items",r),t.hasThreadUpdates()){var s=t.threadUpdates;s.hasOlderItemsAvailableUpdate()&&n.set("olderItemsAvailable",s.olderItemsAvailable),s.hasDataUpdates()&&n.set("data",s.data),s.hasMetaUpdates()&&n.set("meta",u({},n.meta,s.meta))}if(t.hasActionStatus()){var a=t.actionStatus,o=a.type;n.set("actionStatusByType",n.actionStatusByType.set(o,a)),o===h.ACTION_TYPE.LOAD_THREAD&&(0,m.default)(n,a,"isInitializing","initializeError"),o===h.ACTION_TYPE.LOAD_OLDER_ITEMS&&(0,m.default)(n,a,"isFetchingOlderItems","olderItemsError"),o===h.ACTION_TYPE.LOAD_NEWER_ITEMS&&(0,m.default)(n,a,"isFetchingNewerItems","newerItemsError")}})}return t}()},{key:"mergeMeta",value:function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.set("meta",u({},this.meta,t))}return t}()},{key:"isValid",value:function(){function t(){return null!=this.id&&null!=this.type}return t}()}]),e}(S);r.default=T},2235);