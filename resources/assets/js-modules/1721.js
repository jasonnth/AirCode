__d(function(e,t,i,r){Object.defineProperty(r,"__esModule",{value:!0});var a=t(562),l=babelHelpers.interopRequireDefault(a),o=t(412),s=babelHelpers.interopRequireDefault(o),u=t(271),n=babelHelpers.interopRequireDefault(u),d=t(44),p=t(379),b=babelHelpers.interopRequireDefault(p),f=t(410),h=babelHelpers.interopRequireDefault(f),c=t(554),g=babelHelpers.interopRequireDefault(c),m=t(814),v=babelHelpers.interopRequireDefault(m),H=t(840),w=t(811),R=babelHelpers.interopRequireDefault(w),q=t(1023),y=t(1701),S=babelHelpers.interopRequireDefault(y),D=t(1482),x=babelHelpers.interopRequireWildcard(D),I={createdAt:s.default.string.isRequired,firstName:s.default.string.isRequired,fromHost:s.default.bool,isLandscape:s.default.bool,isTablet:s.default.bool,profilePicUrl:s.default.string.isRequired,url:v.default.isRequired,userId:s.default.number.isRequired},L={fromHost:!1,isLandscape:!1,isTablet:!1},P=function(e){function t(i){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,i));return r.mounted=!1,r.state={height:null,imageLoaded:!1,reviewRowHeight:0,width:null},r.updateImageSize=r.updateImageSize.bind(r),r}return babelHelpers.inherits(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.updateImageSize()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.updateImageSize=function(){var e=this;this.state.imageLoaded||d.Image.getSize(this.props.url,function(t,i){e.mounted&&e.setState({height:i,imageLoaded:!0,width:t})})},t.prototype.render=function(){var e=this,t=this.props,i=t.createdAt,r=t.firstName,a=t.fromHost,o=t.isLandscape,s=t.isTablet,u=t.profilePicUrl,n=t.url,p=t.userId,f=this.state,c=f.height,m=f.imageLoaded,v=f.reviewRowHeight,w=f.width,q=(0,H.getWindowHeight)(),y=(0,H.getWindowWidth)(),D=(0,l.default)(i).format("ll");a&&(D=b.default.phrase("Host \xb7 %{date}",{date:D},"the subtitle of an image uploaded by the host"));var I=g.default.baseRow.paddingHorizontal,L=o?2:1,P=L*I,z=void 0,T=void 0;if(m){var _=q-v-I*(s&&o?2:3),C=y-(s&&o?2*P:0);if(_-c<C-w){var U=w/c;z=_,T=z*U,T>C&&(z*=C/T,T=z*U)}else{var W=c/w;T=C,z=T*W,z>_&&(T*=_/z,z=T*W)}}return babelHelpers.jsx(d.ScrollView,{indicatorStyle:"white",style:[{height:q,width:y}]},void 0,babelHelpers.jsx(d.View,{style:[j.container,{height:q,width:y}]},void 0,babelHelpers.jsx(d.Image,{source:(0,R.default)(n),style:[j.image,m&&{height:z,width:T},m&&{left:(y-T)/2,top:(q-(z+v/2))/2}]}),babelHelpers.jsx(d.View,{onLayout:function(t){return e.setState({reviewRowHeight:t.nativeEvent.layout.height})},style:{bottom:0,position:"absolute"}},void 0,babelHelpers.jsx(S.default,{divider:"none",expanded:!0,inverse:!0,reviewerPictureUrl:u,reviewerName:r,reviewerSubtitle:D,onProfilePress:function(){return h.default.push(x.USER_PROFILE,{user_id:p})}}))))},t}(n.default.Component);r.default=P,P.defaultProps=L,P.propTypes=I;var j=q.ThemedStyleSheet.create(function(e){var t=e.bp,i=e.color;return{container:{flexDirection:"column"},containerView:{flex:1},image:{height:46*t},reviewBackground:{backgroundColor:i.black},reviewText:{color:i.white}}})},1721);