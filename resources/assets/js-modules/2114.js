__d(function(e,i,t,o){function r(e,i){P.default.push(X.SHARING,{entry_point:"guidebook_insider",id:e.guidebook.id,url:e.guidebook.share_url||(0,O.getWebUrl)("/things-to-do/insider-guidebook/"+e.guidebook.id),primary_image_url:i,location:e.guidebook.localized_market_name,guidebook_title:e.guidebook.localized_name_for_album_view,creator_occupation:e.guidebook.insider_profession,creator_name:e.guidebook.user.first_name,num_places:e.places.length})}function l(e){return(0,L.getMoji)(e.airmoji||"extras_star")}function n(e){P.default.push(X.USER_PROFILE,{user_id:e})}function a(e){if(!e)return null;var i=e.localized_market_name,t=e.insider_guidebook_tagline,o=i;return t&&(o=m.default.phrase("%{localized_market_name} \xb7 %{short_description}",{localized_market_name:i,short_description:t},"the title for insider guidebook")),o}function s(e){return"prune_me"===e?"":"."===e?"":e}Object.defineProperty(o,"__esModule",{value:!0});var d=i(412),u=babelHelpers.interopRequireDefault(d),p=i(271),b=(babelHelpers.interopRequireDefault(p),i(44)),c=i(654),f=i(790),h=i(379),m=babelHelpers.interopRequireDefault(h),_=i(787),g=babelHelpers.interopRequireDefault(_),k=i(1435),v=babelHelpers.interopRequireDefault(k),H=i(841),y=babelHelpers.interopRequireDefault(H),x=i(1023),C=i(899),I=babelHelpers.interopRequireDefault(C),S=i(1366),R=babelHelpers.interopRequireDefault(S),w=i(410),P=babelHelpers.interopRequireDefault(w),j=i(1038),T=babelHelpers.interopRequireDefault(j),E=i(778),q=babelHelpers.interopRequireDefault(E),D=i(2086),M=babelHelpers.interopRequireDefault(D),G=i(1411),W=babelHelpers.interopRequireDefault(G),L=i(906),A=i(2046),O=i(1483),z=i(2058),B=i(2054),N=babelHelpers.interopRequireDefault(B),U=i(2035),V=i(2115),Y=babelHelpers.interopRequireDefault(V),F=i(2093),J=i(1920),K=babelHelpers.interopRequireWildcard(J),Q=i(1482),X=babelHelpers.interopRequireWildcard(Q),Z=i(2088),$={pressedCloseGuidebookScreen:u.default.func.isRequired,fetchGuidebookInsider:u.default.func.isRequired,title:u.default.string,guidebookId:u.default.number.isRequired,primaryPhoto:u.default.string,insider:u.default.shape({guidebook:u.default.object,places:u.default.array}),searchContextString:u.default.string},ee=function(e){function i(t,o){babelHelpers.classCallCheck(this,i);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,t,o));return r.showMap=r.showMap.bind(r),r.handleLayoutWindow=r.handleLayoutWindow.bind(r),r.handleMomentumScrollEnd=r.handleMomentumScrollEnd.bind(r),r.state={windowWidth:null},r.prevY=0,r}return babelHelpers.inherits(i,e),i.prototype.componentWillReceiveProps=function(e){var i=e.insider;i&&(this.props.insider||(i.places.forEach(function(e){e.photos.forEach(function(e){b.Image.prefetch(e.picture)})}),i.guidebook.cover_photos.length>1&&b.Image.prefetch(i.guidebook.cover_photos[1].xl_picture)))},i.prototype.componentWillMount=function(){this.props.fetchGuidebookInsider(this.props.guidebookId)},i.prototype.componentDidMount=function(){(0,F.logInsiderGuidebookPDPImpressionEvent)(this.props.guidebookId,this.props.searchContextString)},i.prototype.showMap=function(e){var i=this.props.guidebookId;P.default.present(K.INSIDER_MAP,{guidebookId:i,title:e,searchContextString:this.props.searchContextString})},i.prototype.handleLayoutWindow=function(e){var i=e.width;this.setState({windowWidth:i})},i.prototype.handleMomentumScrollEnd=function(e){var i=e.nativeEvent.contentOffset.y,t=i<this.prevY;this.prevY=i,(0,F.logGuidebookScrollInsiderGuidebookEvent)(this.props.guidebookId,t)},i.prototype.render=function(){var e=this,i=this.props,t=i.primaryPhoto,o=i.insider,d=i.guidebookId,u=void 0,p=[],c=[],f=void 0,h=void 0,_=void 0,k=void 0;return o&&(u=o.guidebook,f=u.localized_name_for_album_view,p=o.places,c=u.cover_photos.slice(1,2).map(function(e){return e.xl_picture}),h=u.user,_=s(u.user.last_name),k=u.insider_bibliography),babelHelpers.jsx(N.default,{onLayoutWindow:this.handleLayoutWindow},void 0,babelHelpers.jsx(g.default,{onMomentumScrollEnd:this.handleMomentumScrollEnd},void 0,babelHelpers.jsx(v.default,{title:f,subtitle:a(u),images:t?[t]:c,aspectRatio:v.default.ASPECT_RATIOS.THREE_BY_TWO,rowPadded:!1,barType:P.default.BAR_TYPE.SPECIALTY,hideStatusBarUntilFoldOffset:!0,onBackPress:this.props.pressedCloseGuidebookScreen},void 0,(0,Z.shouldShowGuidebooksShareSheet)()&&o&&c&&c[0]&&babelHelpers.jsx(T.default,{icon:"share",onPress:function(){return r(o,c[0])}})),!u&&babelHelpers.jsx(b.View,{style:ie.loaderContainer},void 0,babelHelpers.jsx(y.default,{})),h&&babelHelpers.jsx(b.View,{},void 0,babelHelpers.jsx(W.default,{divider:"none",imageUrl:h.picture_url,onPressImage:function(){return n(h.id)},title:m.default.phrase("Insider guidebook",null,"the title for insider guidebook"),subtitle:babelHelpers.jsx(I.default,{default:"Curated by %{link_start}%{firstName} %{lastName}%{link_end}",link:babelHelpers.jsx(b.Text,{style:ie.link,onPress:function(){return n(h.id)}}),firstName:h.first_name,lastName:_,context:"Guidebook Insider info"})}),babelHelpers.jsx(R.default,{divider:"none"},void 0,babelHelpers.jsx(b.View,{style:ie.bioModule},void 0,babelHelpers.jsx(b.Text,{style:ie.bioTitleContainer},void 0,babelHelpers.jsx(b.Text,{style:ie.bioTitle},void 0,"  ",m.default.phrase("ABOUT %{first_name}",{first_name:h.first_name&&h.first_name.toUpperCase()},"title description for guidebook insider"),"  ")),babelHelpers.jsx(b.Text,{style:ie.bioDescription},void 0,k)))),p.length>0&&babelHelpers.jsx(b.View,{style:ie.viewContainer},void 0,babelHelpers.jsx(R.default,{divider:"none"},void 0,babelHelpers.jsx(b.Text,{style:ie.placeTitle},void 0,m.default.phrase("My favorite places",null,"title description for guidebook insider favorite places"))),babelHelpers.jsx(b.View,{style:ie.placeContainer},void 0,babelHelpers.jsx(q.default,{divider:"padded"},void 0,p.map(function(i){return babelHelpers.jsx(M.default,{title:i.primary_place_name+"\xa0"+l(i),image:i.photos.length>0&&i.photos[0].x_medium,imageShape:"square",subtitle:(0,z.getPlaceSubtitle)(i),description:i.ranked_place_recommendations_for_place_view[0].short_place_description,onPress:function(){(0,F.logGuidebookClickInsiderPlaceEvent)(d,i.primary_place.id),P.default.push(K.PLACE,{guidebookId:d,placeId:i.primary_place.id,title:i.primary_place_name,placePhotos:i.photos.slice(0,4).map(function(e){return e.picture}),placePdpType:F.PlacePdpTypeEnums.FROM_INSIDER_COLLECTION,searchContextString:e.props.searchContextString})}},i.primary_place.id)}))))),p.length>0&&babelHelpers.jsx(Y.default,{windowWidth:this.state.windowWidth,onPress:function(){return e.showMap(f)}}))},i}(p.PureComponent);ee.propTypes=$;var ie=x.ThemedStyleSheet.create(function(e){var i=e.font,t=e.size,o=e.bp,r=e.color;return{loaderContainer:{paddingVertical:t.vertical.medium},mapContainer:{height:28*o},bioModule:{borderColor:r.accent.hrGray,borderWidth:1,padding:t.vertical.small},bioTitleContainer:{marginBottom:t.vertical.tiny,marginTop:-4*o,marginLeft:-4,zIndex:1,backgroundColor:r.clear},bioTitle:babelHelpers.extends({},i.kickerBold,{backgroundColor:r.white}),placeContainer:{marginTop:-t.vertical.small},viewContainer:{marginBottom:70},bioDescription:i.small,link:i.regularActionable,placeTitle:i.largePlus}});o.default=(0,f.connect)(function(e,i){return{insider:(0,A.guidebookInsiderSelector)(e,i)}},function(e){return(0,c.bindActionCreators)({pressedCloseGuidebookScreen:U.pressedCloseGuidebookScreen,fetchGuidebookInsider:U.fetchGuidebookInsider},e)})(ee)},2114);