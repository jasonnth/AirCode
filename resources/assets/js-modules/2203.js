__d(function(e,i,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=i(412),s=babelHelpers.interopRequireDefault(n),a=i(271),o=babelHelpers.interopRequireDefault(a),u=i(790),l=i(654),p=i(759),b=babelHelpers.interopRequireDefault(p),c=i(379),h=babelHelpers.interopRequireDefault(c),v=i(2172),d=babelHelpers.interopRequireDefault(v),w=i(410),f=babelHelpers.interopRequireDefault(w),R=i(2175),m=i(2191),g=i(2192),T=i(1923),P=babelHelpers.interopRequireWildcard(T),y=i(2178),S={changeReview:s.default.func.isRequired,isSaving:s.default.bool.isRequired,recipient:m.RecipientShape.isRequired,review:m.ReviewShape.isRequired,saveReview:s.default.func.isRequired,submitReview:s.default.func.isRequired,showTripReviewV2Questions:s.default.bool.isRequired},C=function(e){function i(t,r){babelHelpers.classCallCheck(this,i);var n=babelHelpers.possibleConstructorReturn(this,e.call(this,t,r));return n.state={isSubmitting:!1},n.onChangeText=n.onChangeText.bind(n),n.onPrimaryPress=n.onPrimaryPress.bind(n),n}return babelHelpers.inherits(i,e),i.prototype.componentWillReceiveProps=function(e){var i=e.review.hasSubmitted;this.state.isSubmitting&&i&&(this.setState({isSubmitting:!1}),f.default.push(P.TRIP_THANK_YOU))},i.prototype.onChangeText=function(e){this.props.changeReview({publicFeedback:e})},i.prototype.onPrimaryPress=function(){var e=this.props,i=e.review,t=e.showTripReviewV2Questions;(0,y.logConfirmPublicFeedback)(i),t?(0,y.isGoodTripReview)(i)?(this.props.saveReview(),f.default.push(P.TRIP_EXPECTATIONS_FEEDBACK)):(this.setState({isSubmitting:!0}),this.props.submitReview()):(this.props.saveReview(),f.default.push(P.TRIP_CATEGORY_FEEDBACK))},i.prototype.componentWillUnmount=function(){(0,y.logDismissPublicFeedback)(this.props.review)},i.prototype.render=function(){var e=this.props,i=e.isSaving,t=e.recipient,r=e.review.publicFeedback,n=this.state.isSubmitting,s=h.default.phrase("Write a public review",null,"Title on the public review screen in the review flow"),a=h.default.phrase("Tell other travelers what to expect and what you liked about being with %{recipientFirstName}.",{recipientFirstName:t.firstName},"Subtitle on the public review screen in the trip review flow"),o=!!r&&r.trim().length>0,u=o?h.default.phrase("Edit public review",null,"Button on populated public review screen"):h.default.phrase("Start writing",null,"Button on empty public review screen");return babelHelpers.jsx(d.default,{title:s,subtitle:a,placeholder:u,onChangeText:this.onChangeText,onPrimaryPress:this.onPrimaryPress,primaryButtonDisabled:!o,primaryButtonIcon:"chevron-right",primaryButtonLoading:n&&i,value:r})},i}(o.default.Component);C.propTypes=S,r.default=(0,u.connect)(function(e){return(0,b.default)((0,R.rootSelector)(e),["isSaving","recipient","review","showTripReviewV2Questions"])},function(e){return(0,l.bindActionCreators)({changeReview:g.changeReview,saveReview:g.saveReview,submitReview:g.submitReview},e)})(C)},2203);