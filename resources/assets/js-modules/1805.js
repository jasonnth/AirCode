__d(function(e,t,r,n){function i(e){return e?e.replace(/\D/g,""):null}Object.defineProperty(n,"__esModule",{value:!0});var l=t(1696),o=babelHelpers.interopRequireDefault(l),a=t(379),s=babelHelpers.interopRequireDefault(a),u=t(412),p=babelHelpers.interopRequireDefault(u),d=t(271),f=babelHelpers.interopRequireDefault(d),c=t(44),b=t(790),h=t(1806),m=babelHelpers.interopRequireDefault(h),g=t(410),v=babelHelpers.interopRequireDefault(g),R=t(778),H=babelHelpers.interopRequireDefault(R),P=t(910),k=babelHelpers.interopRequireDefault(P),I=t(422),y=babelHelpers.interopRequireDefault(I),q=t(1417),T=babelHelpers.interopRequireDefault(q),C=t(1418),D=babelHelpers.interopRequireDefault(C),x=t(1791),j=babelHelpers.interopRequireDefault(x),B=t(1810),G=babelHelpers.interopRequireDefault(B),w=t(1795),S=t(1752),U=t(1796),L=t(1770),V=babelHelpers.interopRequireWildcard(L),_=t(1803),A={guestProfilesById:p.default.object.isRequired,tripReservationsById:p.default.object.isRequired,tripInstance:j.default.isRequired,tripTemplate:G.default.isRequired},E={},M=function(e){return{guestProfilesById:(0,_.guestProfilesSelector)(e),tripReservationsById:(0,_.tripReservationsSelector)(e)}},N=function(e){function t(r){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,e.call(this,r));return n.state={selectedGuestProfile:null},n}return babelHelpers.inherits(t,e),t.prototype.handleContactPress=function(e,t){var r=i(t);if(e&&t)this.ActionSheet.show();else{if(e)return void(0,U.openTripHostThreadDeepLink)(e);if(t)return void c.Linking.openURL("tel:"+r)}},t.prototype.renderTripReservation=function(e){var t=this,r=this.props.guestProfilesById,n=e.guestProfileIds,i=e.guestsCount,l=e.id,a=n.length,u=i-a,p=n.map(function(e){var t=r[e],n=t.associatedThreadId,i=t.firstName,l=t.phone;return{id:e,imageUrl:t.profilePictureUrl,name:i,phone:l,threadId:n}}),d=(0,o.default)(u,function(){return{id:null,imageUrl:void 0,name:s.default.phrase("Unverified guest",null,"placeholder for unverified guest name"),phone:null,threadId:null}}),f=p.concat(d),c=(0,S.isTripReservationVerified)(e)?null:s.default.phrase("Pending verification",null,"subtitle under user name to describe unverified guest status");return f.map(function(e,r){var n=e.id,i=e.imageUrl,o=e.name,a=e.phone,u=e.threadId,p=a||u?s.default.phrase("Contact",null,"link title for a button to open a sheet to either message or call a guest"):null,d=p&&function(){t.setState({selectedGuestProfile:e}),t.handleContactPress(u,a)},f=n&&function(){return v.default.push(V.VIEW_GUEST_PROFILE,{selectedGuestProfileId:n})};return babelHelpers.jsx(D.default,{name:o,subtitle:c,image:i,actionTitle:p,onActionPress:d,onImagePress:f,onNamePress:f},l+"-"+r)})},t.prototype.render=function(){var e=this,t=this.props,r=t.tripInstance,n=t.tripReservationsById,l=t.tripTemplate,o=r.associatedTripReservationIds,a=r.bookingClosesAt,u=r.guestsCount,p=l.maxGuests,d=l.market,b=d.timezone,h=o?o.map(function(e){return n[e]}):[],g=h.filter(function(e){return(0,S.isTripReservationVerified)(e)}),v=h.filter(function(e){return!(0,S.isTripReservationVerified)(e)}),R=v.length>0,P=s.default.phrase("%{bookedCount}/%{maxCount} guests booked",{bookedCount:u,maxCount:p},"describe the booked guests count and max guests count"),I=(0,w.formatDateTime)(a,b),y=[{onPress:function(){var t=e.state.selectedGuestProfile;c.Linking.openURL("tel:"+i(t.phone))},title:s.default.phrase("Call",null,"an action sheet button to call a guest")},{onPress:function(){var t=e.state.selectedGuestProfile;(0,U.openTripHostThreadDeepLink)(t.threadId)},title:s.default.phrase("Message",null,"an action sheet button to message a guest in the app")},{title:s.default.phrase("Cancel",null,"button or link title for click to cancel an action")}],q=(0,S.isBookingClosed)(r)?s.default.phrase("Guests can\u2019t book after %{time}, so there won\u2019t be any new bookings.",{time:I},"subtitle to tell host that there will not be new bookings after the time"):s.default.phrase("Guests can book until %{time}.",{time:I},"subtitle to tell host that guests can book before the time");return babelHelpers.jsx(c.View,{},void 0,babelHelpers.jsx(H.default,{},void 0,babelHelpers.jsx(k.default,{heavy:!0,first:!0,title:P,subtitle:q}),u>0&&[g.map(function(t){return e.renderTripReservation(t)}),v.map(function(t){return e.renderTripReservation(t)})],R&&babelHelpers.jsx(T.default,{icon:"home-safety",text:s.default.phrase("All guests have up to 3 days to complete verification or we\u2019ll automatically cancel their booking.",null,"tooltip to tell host that some guests are not verified and may get canceled automatically")})),u<1&&babelHelpers.jsx(c.View,{style:O.bottomSpacer}),f.default.createElement(m.default,{ref:function(t){e.ActionSheet=t},options:y.map(function(e){return e.title}),cancelButtonIndex:2,onPress:function(e){return y[e].onPress&&y[e].onPress()}}))},t}(d.Component);N.propTypes=A,N.defaultProps=E;var O=y.default.create(function(e){return{bottomSpacer:{paddingBottom:4*e.bp}}});n.default=(0,b.connect)(M)(N)},1805);