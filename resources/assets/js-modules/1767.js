__d(function(e,t,a,l){Object.defineProperty(l,"__esModule",{value:!0});var i=t(412),r=babelHelpers.interopRequireDefault(i),s=t(271),u=babelHelpers.interopRequireDefault(s),n=t(379),o=babelHelpers.interopRequireDefault(n),p=t(790),d=t(654),f=t(562),b=babelHelpers.interopRequireDefault(f),c=t(1372),h=babelHelpers.interopRequireDefault(c),m=t(417),H=t(44),R=t(1191),v=babelHelpers.interopRequireDefault(R),q=t(787),S=babelHelpers.interopRequireDefault(q),y=t(773),D=babelHelpers.interopRequireDefault(y),T=t(1402),W=babelHelpers.interopRequireDefault(T),_=t(1640),g=babelHelpers.interopRequireDefault(_),x=t(410),k=babelHelpers.interopRequireDefault(x),j=t(1352),A=babelHelpers.interopRequireDefault(j),w=t(789),C=babelHelpers.interopRequireDefault(w),E=t(1573),N=t(1634),O=babelHelpers.interopRequireDefault(N),I=t(1575),P=t(1576),Y=t(1578),M=function(e,t){return{tripTemplate:(0,Y.tripTemplateSelector)(e,t.tripTemplateId)}},L=function(e){return(0,d.bindActionCreators)({saveWaitlist:E.saveWaitlist},e)},U={isSoldOut:r.default.bool,tripTemplateId:r.default.number.isRequired,tripTemplate:O.default.isRequired,saveWaitlist:r.default.func.isRequired},V={isSoldOut:!1},B=function(e){function t(a){babelHelpers.classCallCheck(this,t);var l=babelHelpers.possibleConstructorReturn(this,e.call(this,a));return l.state={checked:(0,m.Set)(),datesArray:(0,v.default)(12).map(function(e){return(0,b.default)().add(e,"month")})},l.sendSaveWaitlistRequest=l.sendSaveWaitlistRequest.bind(l),l}return babelHelpers.inherits(t,e),t.prototype.sendSaveWaitlistRequest=function(){var e=this.state,t=e.datesArray,a=e.checked,l=this.props,i=l.tripTemplate,r=l.isSoldOut,s=a.map(function(e){return t[e]}),u=s.map(function(e){return e.format("YYYY-MM-DD")}).join(","),n={template_id:i.id,dates:u};this.props.saveWaitlist(n,r).then(function(e){e===P.REQUEST_SUCCEEDED&&k.default.dismiss()})},t.prototype.getTitle=function(){var e=this.props,t=e.tripTemplate,a=t.experience_host_profile.host.first_name,l=t.title;return e.isSoldOut?o.default.phrase("%{templateName} is sold out.",{templateName:l},"Waitlist screen title"):o.default.phrase("We\u2019ll let you know if %{hostName} adds more availability",{hostName:a},"Waitlist screen title")},t.prototype.getSubtitle=function(){var e=this.props,t=e.tripTemplate.experience_host_profile.host.first_name;return e.isSoldOut?o.default.phrase("We\u2019ll let you know if %{hostName} adds more availability. When do you want to go?",{hostName:t},"Waitlist screen subtitle"):null},t.prototype.render=function(){var e=this,t=this.state,a=t.checked,l=t.datesArray;return babelHelpers.jsx(H.View,{style:{flex:1}},void 0,babelHelpers.jsx(S.default,{},void 0,babelHelpers.jsx(D.default,{title:this.getTitle(),subtitle:this.getSubtitle()}),l.map(function(t,l){return babelHelpers.jsx(W.default,{label:t.format(h.default.format("month_year")),checked:a.includes(l),onToggleCheckbox:function(){a.includes(l)?e.setState({checked:a.remove(l)}):e.setState({checked:a.add(l)})}},t)})),babelHelpers.jsx(g.default,{buttonText:o.default.phrase("Notify me",null,"waitlist action button"),onButtonPress:this.sendSaveWaitlistRequest}),babelHelpers.jsx(C.default,{},void 0,babelHelpers.jsx(A.default,{id:I.SAVE_WAITLIST_FAILED_TOAST,description:o.default.phrase("Save waitlist failed",null,"an error message"),action:o.default.phrase("Try again",null,"a button asking user to try again after something went wrong"),onActionPress:this.sendSaveWaitlistRequest})))},t}(u.default.Component);B.propTypes=U,B.defaultProps=V,l.default=(0,p.connect)(M,L)(B)},1767);