__d(function(e,t,r,a){Object.defineProperty(a,"__esModule",{value:!0});var i=t(44),s=t(412),o=babelHelpers.interopRequireDefault(s),l=t(271),n=(babelHelpers.interopRequireDefault(l),t(2225)),u=t(2331),p=t(379),d=babelHelpers.interopRequireDefault(p),b=t(824),f=babelHelpers.interopRequireDefault(b),c=t(832),h=babelHelpers.interopRequireDefault(c),g=t(422),T=babelHelpers.interopRequireDefault(g),H=t(2281),m=babelHelpers.interopRequireDefault(H),_=t(1754),R=babelHelpers.interopRequireWildcard(_),S=t(2243),y=babelHelpers.interopRequireWildcard(S),P=t(2355),x=t(2352),C=babelHelpers.interopRequireWildcard(x),O=t(1755),D=babelHelpers.interopRequireDefault(O),q=t(772),v=babelHelpers.interopRequireDefault(q),A=function(e){return(0,P.logAction)({action:e,page:C.SUPPORT_CHAT_NEW_THREAD})},I=(0,m.default)(function(){return A(P.ACTIONS.TextInput)},1e3),E={topic_type:o.default.string,topic_id:o.default.oneOfType([o.default.string,o.default.number]),topic_relation:o.default.string},M={},N="android"===i.Platform.OS,B="ios"===i.Platform.OS,L=function(e){function t(r,a){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,e.call(this,r,a));return i.onChange=i.onChange.bind(i),i.state={text:"",isPrimaryButtonLoading:!1},i.createMessageThread=i.createMessageThread.bind(i),i}return babelHelpers.inherits(t,e),t.prototype.onChange=function(e){this.setState({text:e}),I()},t.prototype.createMessageThread=function(){var e=this,t=this.props,r=t.topic_type,a=t.topic_id,i=t.topic_relation;A(P.ACTIONS.SendMessage),this.setState({isPrimaryButtonLoading:!0});var s=n.messagingRegistry.getDataSource(y.SUPPORT_CHAT),o=a?""+a:a,l={data:{text:this.state.text,topic_type:r,topic_id:o,topic_relation:i}};s.createThread(l).then(function(e){var t=R.SUPPORT_MESSAGING+"/"+e.id;if(N&&(0,D.default)(R.GUEST_INBOX),B){var a=r===u.TOPIC_TYPE.RESERVATION,s=i===u.TOPIC_RELATION.HOST;t+=a&&s?"/modal_host":"/modal_guest"}(0,D.default)(t)}).catch(function(){e.setState({isPrimaryButtonLoading:!1})})},t.prototype.render=function(){var e=this.state.isPrimaryButtonLoading,t=""===this.state.text;return babelHelpers.jsx(v.default,{title:d.default.phrase("Send us a message",null,"A title for the support entry form"),subtitle:d.default.phrase("Including detailed info here will help us get you to the right person",null,"Description of prompt for customer support entry."),footer:babelHelpers.jsx(h.default,{babu:!0,buttonText:d.default.phrase("Send message",null,"Submit initial message to support."),onButtonPress:this.createMessageThread,loading:e,buttonDisabled:e||t})},void 0,babelHelpers.jsx(f.default,{style:W.inputText,onChangeText:this.onChange,value:this.state.text,multiline:!0,autoFocus:!0,placeholder:d.default.phrase("Write a message",null,"Placeholder text for the support messaging describe your issue screen, write a message to customer support.")}))},t}(l.Component);a.default=L,L.defaultProps=M,L.propTypes=E;var W=T.default.create(function(e){var t=e.font,r=e.size;return{inputText:babelHelpers.extends({},t.regular,{paddingHorizontal:r.baseRow.paddingHorizontal})}})},2354);