__d(function(e,t,n,i){function o(e,t,n){return babelHelpers.jsx(u.Text,{style:[I.codeInput,n&&I.codeInputCurrent]},e,t)}Object.defineProperty(i,"__esModule",{value:!0});var s=t(412),r=babelHelpers.interopRequireDefault(s),a=t(271),l=babelHelpers.interopRequireDefault(a),u=t(44),d=t(379),c=babelHelpers.interopRequireDefault(d),p=t(841),h=babelHelpers.interopRequireDefault(p),f=t(422),b=babelHelpers.interopRequireDefault(f),g=t(410),y=babelHelpers.interopRequireDefault(g),m=t(772),C=babelHelpers.interopRequireDefault(m),v=t(1443),R=function(e){function t(n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,e.call(this,n));return i.state={code:"",secondsRemaining:i.props.retryInterval,wrongSubmissionCount:0},i.setCodeInputRef=i.setCodeInputRef.bind(i),i.tick=i.tick.bind(i),i.onPressTryAgain=i.onPressTryAgain.bind(i),i.onInputCodeChange=i.onInputCodeChange.bind(i),i}return babelHelpers.inherits(t,e),t.prototype.componentDidMount=function(){this.interval=setInterval(this.tick,1e3)},t.prototype.componentWillUnmount=function(){this.interval&&(clearInterval(this.interval),this.interval=!1)},t.prototype.tick=function(){this.setState({secondsRemaining:this.state.secondsRemaining-1})},t.prototype.setCodeInputRef=function(e){this.codeInputRef=e},t.prototype.renderCodes=function(){for(var e=[],t=0;t<this.props.codeLength;t+=1)this.state.code.length>t?e.push(o(t,this.state.code[t],!1)):this.state.code.length===t?e.push(o(t,"\u2012",!0)):e.push(o(t,"\u2012",!1));return e},t.prototype.clearInput=function(){this.setState({code:""})},t.prototype.focus=function(){this.codeInputRef.focus()},t.prototype.onPressTryAgain=function(){var e=this.props,t=e.retryInterval;(0,e.funcTryAgain)(),this.setState({secondsRemaining:t,code:""}),this.codeInputRef.focus()},t.prototype.onInputCodeChange=function(e){var t=this,n=this.state.code;if(this.setState({code:e}),n.length<this.props.codeLength&&e.length===this.props.codeLength){var i=this.props.funcVerifyCode(e);i&&i.then(function(e){return t.handleVerificationResult(e)})}},t.prototype.handleVerificationResult=function(e){e||this.setState({wrongSubmissionCount:this.state.wrongSubmissionCount+1}),this.state.wrongSubmissionCount>this.props.maxWrongSubmissions&&(this.props.funcFailed(),y.default.push(v.AOV_FRICTION_FAILURE))},t.prototype.render=function(){var e=this,t=this.props,n=t.isLoading,i=t.hintTryAgain,o=t.title,s=t.subtitle,r=t.toasts,a=this.state,d=a.code,p=a.secondsRemaining;return babelHelpers.jsx(u.View,{style:u.StyleSheet.absoluteFill},void 0,babelHelpers.jsx(C.default,{title:o,subtitle:s,toasts:r},void 0,babelHelpers.jsx(u.TouchableWithoutFeedback,{onPress:function(){return e.codeInputRef.focus()}},void 0,babelHelpers.jsx(u.View,{style:I.codeContainer},void 0,this.renderCodes())),babelHelpers.jsx(u.View,{style:I.hintContainer},void 0,babelHelpers.jsx(u.Text,{style:I.hint},void 0,c.default.phrase("Didn\u2019t get it?",null,"a hint in the verification code input screen")),p>0&&babelHelpers.jsx(u.Text,{style:I.hint},void 0,c.default.phrase("Wait %{seconds} seconds",{seconds:this.state.secondsRemaining},"Tell user how many seconds he should wait to send the verification code again")),p<=0&&babelHelpers.jsx(u.Text,{style:[I.hint,I.tryAgainLink],onPress:this.onPressTryAgain},void 0,i)),n&&babelHelpers.jsx(u.View,{style:I.loadingContainer},void 0,babelHelpers.jsx(h.default,{})),l.default.createElement(u.TextInput,{ref:this.setCodeInputRef,autoFocus:!0,keyboardType:"numeric",caretHidden:!0,maxLength:this.props.codeLength,onChangeText:this.onInputCodeChange,underlineColorAndroid:"rgba(0,0,0,0)",style:{height:1,color:"rgba(0,0,0,0)"},value:d})))},t}(a.PureComponent);R.propTypes={title:r.default.string.isRequired,subtitle:r.default.string.isRequired,codeLength:r.default.number.isRequired,isLoading:r.default.bool,retryInterval:r.default.number,hintTryAgain:r.default.string,toasts:r.default.node,maxWrongSubmissions:r.default.number,funcTryAgain:r.default.func,funcVerifyCode:r.default.func,funcFailed:r.default.func},R.defaultProps={title:"",codeLength:6,retryInterval:59,isLoading:!1,subtitle:"",hintTryAgain:"",toasts:null,maxWrongSubmissions:3,funcTryAgain:function(){},funcVerifyCode:function(){},funcFailed:function(){}},i.default=R;var I=b.default.create(function(e){var t=e.bp,n=e.font,i=e.color,o=e.size;return{codeContainer:{flexDirection:"row",marginLeft:o.horizontal.medium,marginTop:o.vertical.medium},codeInput:babelHelpers.extends({},n.title2,{width:6*t}),codeInputCurrent:{color:i.core.babu},hintContainer:{flexDirection:"row",marginHorizontal:o.horizontal.medium},hint:{marginRight:o.horizontal.tiny,fontFamily:n.light,color:i.textMuted},tryAgainLink:{color:i.core.babu},loadingContainer:{marginTop:o.vertical.medium,alignItems:"center",justifyContent:"center",flex:1}}})},1498);