__d(function(e,t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var i=t(412),s=babelHelpers.interopRequireDefault(i),a=t(271),r=babelHelpers.interopRequireDefault(a),l=t(44),p=t(743),u=t(422),h=babelHelpers.interopRequireDefault(u),d=t(825),c=babelHelpers.interopRequireDefault(d),b=t(826),g=babelHelpers.interopRequireDefault(b),f=t(425),x=babelHelpers.interopRequireDefault(f),y=(0,p.forbidExtraProps)(babelHelpers.extends({},l.Text.propTypes,l.TextInput.propTypes,{value:s.default.string,style:l.Text.propTypes.style,cursorPadding:s.default.number})),T={clearButtonMode:"never",value:null,underlineColorAndroid:"transparent",cursorPadding:8},v={makePointVisible:s.default.func},C=function(e){function t(n){babelHelpers.classCallCheck(this,t);var o=babelHelpers.possibleConstructorReturn(this,e.call(this,n));return o.state={selectionEnd:null,value:"string"==typeof n.value?n.value:n.defaultValue,height:0,ghostTextHeight:0,placeholderTextHeight:0,focused:!1},o.onKeyboardHeightChanged=o.onKeyboardHeightChanged.bind(o),o.setGhostText=o.setGhostText.bind(o),o.setTextInput=o.setTextInput.bind(o),o.onGhostTextLayout=o.onGhostTextLayout.bind(o),o.onPlaceholderTextLayout=o.onPlaceholderTextLayout.bind(o),o.onContentSizeChange=o.onContentSizeChange.bind(o),o.onChangeText=o.onChangeText.bind(o),o.onBlur=o.onBlur.bind(o),o.onSelectionChange=o.onSelectionChange.bind(o),o.onFocus=o.onFocus.bind(o),o.onEndEditing=o.onEndEditing.bind(o),o.onContentSizeChange=o.onContentSizeChange.bind(o),o}return babelHelpers.inherits(t,e),t.prototype.onKeyboardHeightChanged=function(e){this.setState({keyboardHeight:e})},t.prototype.componentDidUpdate=function(){this.scrollForKeyboard()},t.prototype.blur=function(){this.textInput.blur()},t.prototype.focus=function(){this.textInput.focus()},t.prototype.update=function(){this.textInput.update()},t.prototype.setNativeProps=function(e){this.textInput.setNativeProps(e)},t.prototype.scrollForKeyboard=function(){var e=this,t=this.context.makePointVisible;if(t&&this.state.focused&&this.state.keyboardHeight){var n=(0,l.findNodeHandle)(this.ghostText);l.UIManager.measureInWindow(n,function(n,o,i,s){o&&s&&t(o+s,e.props.cursorPadding)})}},t.prototype.setGhostText=function(e){this.ghostText=e},t.prototype.setTextInput=function(e){this.textInput=e},t.prototype.onGhostTextLayout=function(e){this.setState({ghostTextHeight:e.nativeEvent.layout.height})},t.prototype.onPlaceholderTextLayout=function(e){this.setState({placeholderTextHeight:e.nativeEvent.layout.height})},t.prototype.onContentSizeChange=function(e){this.setState({height:e.nativeEvent.contentSize.height});var t=this.props.onContentSizeChange;t&&t(e)},t.prototype.onChangeText=function(e){this.setState({value:e});var t=this.props.onChangeText;t&&t(e)},t.prototype.onBlur=function(){this.setState({focused:!1});var e=this.props.onBlur;e&&e()},t.prototype.onSelectionChange=function(e){this.setState({selectionEnd:e.nativeEvent.selection.end});var t=this.props.onSelectionChange;t&&t(e)},t.prototype.onFocus=function(){this.setState({focused:!0});var e=this.props.onFocus;e&&e()},t.prototype.onEndEditing=function(){this.setState({focused:!1});var e=this.props.onEndEditing;e&&e()},t.prototype.render=function(){var e=this.props,t=e.style,n=e.multiline,o=e.clearButtonMode,i=e.placeholder,s=babelHelpers.objectWithoutProperties(e,["style","multiline","clearButtonMode","placeholder"]),a=this.state,p=a.height,u=a.ghostTextHeight,h=a.placeholderTextHeight,d=a.selectionEnd,b=this.props.value||this.state.value,f=(0,g.default)(t),y=f.inner,T=f.outer,v=n&&"ios"===l.Platform.OS,C=v?8:0,S=(b?Math.max(p,u):h)+C,E=(b||"").slice(0,d)||" ";E.endsWith("\n")&&(E+=" ");var m=[H.invisibleText,y,H.transparent];return babelHelpers.jsx(l.View,{style:T},void 0,babelHelpers.jsx(c.default,{listener:this.onKeyboardHeightChanged}),r.default.createElement(l.Text,{ref:this.setGhostText,style:m,numberOfLines:n?void 0:1,onLayout:this.onGhostTextLayout},E),babelHelpers.jsx(l.Text,{style:m,numberOfLines:n?void 0:1,onLayout:this.onPlaceholderTextLayout},void 0,i),r.default.createElement(l.TextInput,babelHelpers.extends({ref:this.setTextInput,style:[H.textInput,y,{height:S}]},s,{selectionColor:x.default.textInput,multiline:n,placeholder:i,contentInset:{left:0,top:0,right:0,bottom:0},onContentSizeChange:this.onContentSizeChange,onChangeText:this.onChangeText,onBlur:this.onBlur,onSelectionChange:this.onSelectionChange,onFocus:this.onFocus,onEndEditing:this.onEndEditing,clearButtonMode:o})))},t}(r.default.Component);o.default=C,C.defaultProps=T,C.propTypes=y,C.contextTypes=v,C.containsTextInput=!0;var H=h.default.create(function(e){var t=e.font;return{textInput:babelHelpers.extends({},t.large,{flex:1,padding:0,paddingVertical:0,textAlignVertical:"top"}),invisibleText:babelHelpers.extends({},t.large,{position:"absolute",top:0,opacity:0},l.Platform.select({ios:{marginTop:8}}),{alignSelf:"center"}),transparent:{color:"transparent"}}})},824);