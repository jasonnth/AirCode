__d(function(e,t,n,r){function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;switch(n){case a.RESET_STATE:return c;case a.SET_IS_HOST:return e.set("isHost",r.isHost);case a.CHANGE_NUMBER_OF_GUESTS:return e.set("numberOfGuests",r.numberOfGuests);case a.CHANGE_DATE_RANGE:return e.set("startDate",r.startDate).set("endDate",r.endDate);case a.CHANGE_LISTING:var s=e.get("reservation").alternate_listings.find(function(e){return e.id===r.listingId}).name||"";return e.set("listingId",r.listingId).set("listingName",s);case a.CHANGE_PRICE:return e.set("price",r.price);case a.CHANGE_CURRENCY:return e.set("currency",r.currency);case a.QUOTE_CLEARED:return e.set("quote",null);case a.FETCH_ALTERATION:return(0,i.handle)(e,t,{start:function(e){return e.set("isFetching",!0).set("fetchError",!1)},finish:function(e){return e.set("isFetching",!1)},failure:function(e){return e.set("fetchError",!0)},success:function(t){var n=r,s=n.alterations.find(function(e){return e.status===o.ReservationAlterationResource.STATUS_PENDING}),i=s&&("host"===s.initiated_by?n.host&&n.host.first_name:n.guest&&n.guest.first_name);return t.set("reservation",n).set("reservationAlteration",s).set("initiatorName",i).set("listingId",n.listing.id).set("listingName",n.listing.name).merge((0,l.stateFromReservation)(n,e.get("isHost"))).merge((0,l.stateFromReservationAlteration)(s))}});case a.FETCH_QUOTE:return(0,i.handle)(e,t,{start:function(e){return e.set("isFetchingQuote",!0).set("errorMessage",null)},finish:function(e){return e.set("isFetchingQuote",!1)},success:function(t){return t.set("errorMessage",r.problem||r.error_message).set("quote",r).set("price",e.get("isHost")?r.subtotal_price_host_native:r.subtotal_price_guest_native)},failure:function(e){return e.set("quote",null).set("errorMessage",r.problem||r.error_message)}});case a.SUBMIT_ALTERATION:return(0,i.handle)(e,t,{start:function(e){return e.set("isSaving",!0)},finish:function(e){return e.set("isSaving",!1)},success:function(e){return e.set("reservationAlteration",r)}});case a.CANCEL_ALTERATION:return(0,i.handle)(e,t,{start:function(e){return e.set("isSaving",!0)},finish:function(e){return e.set("isSaving",!1)},success:function(t){return t.set("quote",null).set("reservationAlteration",null).merge((0,l.stateFromReservation)(e.get("reservation"),e.get("isHost")))}});case a.ACCEPT_ALTERATION:case a.DECLINE_ALTERATION:return(0,i.handle)(e,t,{start:function(e){return e.set("isUpdating",!0)},finish:function(e){return e.set("isUpdating",!1)},failure:function(t){return t.merge((0,l.stateFromReservation)(e.get("reservation"),e.get("isHost")))}});default:return e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var i=t(667),u=t(417),a=t(1540),o=t(1541),l=t(1543),c=new u.Map({isHost:!1,isFetching:!1,isFetchingQuote:!1,isSaving:!1,isUpdating:!1,reservation:null,startDate:null,endDate:null,numberOfGuests:null,listingId:null,listingName:null,price:null,quote:null,currency:null,quoteProblem:null,reservationAlteration:null,fetchError:!1,initiatorName:null})},1539);