__d(function(e,t,r,s){Object.defineProperty(s,"__esModule",{value:!0});var l=t(412),a=babelHelpers.interopRequireDefault(l),i=t(271),n=babelHelpers.interopRequireDefault(i),o=t(44),u=t(790),c=t(654),p=t(410),f=babelHelpers.interopRequireDefault(p),h=t(841),d=babelHelpers.interopRequireDefault(h),b=t(823),y=babelHelpers.interopRequireDefault(b),g=t(379),S=babelHelpers.interopRequireDefault(g),x=t(422),R=babelHelpers.interopRequireDefault(x),H=t(1032),T=babelHelpers.interopRequireDefault(H),q=t(910),m=babelHelpers.interopRequireDefault(q),v=t(759),A=babelHelpers.interopRequireDefault(v),w=t(778),C=babelHelpers.interopRequireDefault(w),j=t(2419),_=babelHelpers.interopRequireWildcard(j),D=t(2421),E=t(2414),P=t(1482),B=babelHelpers.interopRequireWildcard(P),Q=t(1483),V=t(2422),I={searchArticles:a.default.func.isRequired,isSearching:a.default.bool.isRequired,fetchQuerySuggestions:a.default.func.isRequired,storeSearch:a.default.func.isRequired,recentSearchTexts:a.default.array,searchedArticles:a.default.array,querySuggestions:a.default.array},W={recentSearchTexts:[],querySuggestions:[]},M=function(e){function t(r){babelHelpers.classCallCheck(this,t);var s=babelHelpers.possibleConstructorReturn(this,e.call(this,r));return s.state={searchText:""},s.setTextRowRef=s.setTextRowRef.bind(s),s.onTextChange=s.onTextChange.bind(s),s.submitSearch=s.submitSearch.bind(s),s}return babelHelpers.inherits(t,e),t.prototype.setTextRowRef=function(e){this.textRowRef=e},t.prototype.onTextChange=function(e){this.setState({searchText:e}),this.props.searchArticles(e)},t.prototype.onPressQuery=function(e){o.Keyboard.dismiss(),this.setState({searchText:e}),this.search(e)},t.prototype.search=function(e){var t=this;this.scrollViewRef&&setTimeout(function(){return t.scrollViewRef.scrollTo({y:0,animated:!0})},0),this.props.searchArticles(e),this.props.storeSearch(e)},t.prototype.submitSearch=function(e){var t=e.nativeEvent.text;t.trim()&&this.props.storeSearch(t)},t.gotoArticle=function(e){(0,V.logArticleClick)(e.faq_id),f.default.present(B.AUTHENTICATED_WEBVIEW,{url:(0,Q.getWebUrl)("/help/article/"+e.faq_id)})},t.prototype.componentDidMount=function(){this.props.fetchQuerySuggestions()},t.prototype.renderSearchHistoryAndArticles=function(){var e=this,r=this.props,s=r.recentSearchTexts,l=r.searchedArticles,a=r.querySuggestions,i=r.isSearching,u=null;i?u=babelHelpers.jsx(d.default,{}):l&&l.length>0&&(u=babelHelpers.jsx(C.default,{},void 0,l.map(function(e){return babelHelpers.jsx(T.default,{micro:!0,noIcon:!0,title:e.title,onPress:function(){return t.gotoArticle(e)}},e.faq_id)})));var c=null;s&&s.length>0&&(c=babelHelpers.jsx(o.View,{},void 0,babelHelpers.jsx(m.default,{first:!0,micro:!0,heavy:!0,title:S.default.phrase("Recent Searches",null,"a section title")}),babelHelpers.jsx(C.default,{},void 0,s.map(function(t,r){return babelHelpers.jsx(T.default,{micro:!0,noIcon:!0,title:t,onPress:function(){return e.onPressQuery(t)}},r)}))));var p=i||l&&l.length>0;return n.default.createElement(o.ScrollView,{ref:function(t){e.scrollViewRef=t},style:k.searchRowsContainer,keyboardShouldPersistTaps:"always",onScroll:function(){return o.Keyboard.dismiss()}},p&&babelHelpers.jsx(m.default,{first:!0,micro:!0,heavy:!0,title:S.default.phrase("Articles",null,"a section title for suggested queries")}),u,c,babelHelpers.jsx(m.default,{first:!0,micro:!0,heavy:!0,title:S.default.phrase("Popular questions",null,"a section title")}),babelHelpers.jsx(C.default,{},void 0,a.slice(0,E.MAX_RECENT_QUERIES).map(function(t){return babelHelpers.jsx(T.default,{micro:!0,noIcon:!0,title:t.suggested_query,onPress:function(){return e.onPressQuery(t.suggested_query)}},t.suggested_query)})))},t.prototype.render=function(){return babelHelpers.jsx(o.View,{},void 0,babelHelpers.jsx(f.default.Screen,{barType:f.default.Screen.BAR_TYPE.BASIC}),babelHelpers.jsx(o.View,{style:k.searchBar},void 0,n.default.createElement(y.default,{autoFocus:!0,clearButtonMode:"always",style:k.searchText,ref:this.setTextRowRef,placeholder:S.default.phrase("Search",null,"a text input placeholder"),returnKeyType:"search",onChangeText:this.onTextChange,onSubmitEditing:this.submitSearch,multiline:!1,value:this.state.searchText,divider:"full"})),this.renderSearchHistoryAndArticles())},t}(n.default.Component);M.defaultProps=W,M.propTypes=I;var k=R.default.create(function(e){var t=e.font,r=e.color,s=e.bp;return{searchBar:{paddingTop:8*s},searchRowsContainer:{marginBottom:16*s},searchText:babelHelpers.extends({},t.largeBold,{color:r.core.babu})}});s.default=(0,u.connect)(function(e){return(0,A.default)((0,D.homeScreenSelector)(e),["recentSearchTexts","searchedArticles","querySuggestions","isSearching"])},function(e){return(0,c.bindActionCreators)({searchArticles:_.searchArticles,fetchQuerySuggestions:_.fetchQuerySuggestions,storeSearch:_.storeSearch},e)})(M)},2431);