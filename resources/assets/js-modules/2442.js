__d(function(e,r,t,n){function a(e){var r,t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&e.trim()){n.next=2;break}return n.abrupt("return",[]);case 2:return r=(0,h.getWebUrl)("/content/search_destinations",{search_text:e}),S.log("typeahead_search",{text:e}),n.prev=4,n.next=7,regeneratorRuntime.awrap(fetch(r).then(function(e){return e.json()}));case 7:return t=n.sent,n.abrupt("return",t.destinations);case 11:return n.prev=11,n.t0=n.catch(4),S.log("typeahead_search_error",{text:e,error:String(n.t0)}),n.abrupt("return",[]);case 15:case"end":return n.stop()}},null,this,[[4,11]])}function s(e,r){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(p.AsyncStorage.getItem(e));case 3:return t=n.sent,n.abrupt("return",JSON.parse(t)||r);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",r);case 10:case"end":return n.stop()}},null,this,[[0,7]])}function u(){var e,r,t,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(s(R.TOP_DESTINATIONS_KEY,{ts:0}));case 3:if(e=a.sent,!(Math.abs(Date.now()-e.ts)<R.ONE_DAY)){a.next=6;break}return a.abrupt("return",e.value);case 6:return r=(0,h.getWebUrl)("/content/top_destinations"),a.next=9,regeneratorRuntime.awrap(fetch(r).then(function(e){return e.json()}));case 9:return t=a.sent,n=t.destinations,a.next=13,regeneratorRuntime.awrap(p.AsyncStorage.setItem(R.TOP_DESTINATIONS_KEY,JSON.stringify({ts:Date.now(),value:n})));case 13:return a.abrupt("return",n);case 16:return a.prev=16,a.t0=a.catch(0),a.abrupt("return",[]);case 19:case"end":return a.stop()}},null,this,[[0,16]])}function c(e){var r,t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(i());case 2:return r=n.sent,t=(0,l.default)([e].concat(r)).filter(Boolean),n.next=6,regeneratorRuntime.awrap(p.AsyncStorage.setItem(R.STORY_SEARCH_HISTORY_KEY,JSON.stringify(t)));case 6:return n.abrupt("return",r);case 7:case"end":return n.stop()}},null,this)}function o(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return S.log("clear_serach_history"),e.abrupt("return",p.AsyncStorage.setItem(R.STORY_SEARCH_HISTORY_KEY,JSON.stringify([])));case 2:case"end":return e.stop()}},null,this)}function i(){var e;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(s(R.STORY_SEARCH_HISTORY_KEY,[]));case 2:return e=r.sent,r.abrupt("return",(e||[]).slice(0,R.MAX_HISTORY_COUNT));case 4:case"end":return r.stop()}},null,this)}Object.defineProperty(n,"__esModule",{value:!0}),n.fetchTypeaheads=a,n.getTopDestinations=u,n.addToSearchHistory=c,n.clearSearchHistory=o,n.getSearchHistory=i;var p=r(44),f=r(1194),l=babelHelpers.interopRequireDefault(f),h=r(1483),g=r(2443),_=babelHelpers.interopRequireDefault(g),R=r(2444),S=new _.default},2442);