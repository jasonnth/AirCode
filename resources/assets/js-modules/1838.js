__d(function(e,t,r,l){Object.defineProperty(l,"__esModule",{value:!0});var i=t(562),a=babelHelpers.interopRequireDefault(i),p=t(379),s=babelHelpers.interopRequireDefault(p),u=t(412),o=babelHelpers.interopRequireDefault(u),n=t(271),d=(babelHelpers.interopRequireDefault(n),t(790)),b=t(44),h=t(773),f=babelHelpers.interopRequireDefault(h),T=t(410),c=babelHelpers.interopRequireDefault(T),m=t(1410),H=babelHelpers.interopRequireDefault(m),v=t(778),x=babelHelpers.interopRequireDefault(v),R=t(787),y=babelHelpers.interopRequireDefault(R),q=t(910),g=babelHelpers.interopRequireDefault(q),E=t(1366),D=babelHelpers.interopRequireDefault(E),P=t(422),S=babelHelpers.interopRequireDefault(P),_=t(1352),j=babelHelpers.interopRequireDefault(_),L=t(789),A=babelHelpers.interopRequireDefault(L),O=t(1788),w=babelHelpers.interopRequireDefault(O),I=t(1790),C=t(1810),M=babelHelpers.interopRequireDefault(C),U=t(1752),B=t(684),W=t(1569),k=babelHelpers.interopRequireWildcard(W),N=t(1797),Y=t(1803),F={loadSchedule:o.default.func.isRequired,addToast:o.default.func.isRequired,removeToast:o.default.func.isRequired,experienceTemplatesById:o.default.object.isRequired,isTripTemplatesLoading:o.default.bool.isRequired,lastLoad:o.default.number.isRequired,publishedTripTemplates:o.default.arrayOf(M.default).isRequired,unpublishedTripTemplates:o.default.arrayOf(M.default).isRequired},G={},V=function(e){var t=(0,Y.availabilitySelector)(e),r=(0,Y.experienceTemplatesSelector)(e),l=(0,Y.publishedTripTemplatesSelector)(e),i=(0,Y.unpublishedTripTemplatesSelector)(e);return{experienceTemplatesById:r,isTripTemplatesLoading:t.isScheduleLoading,lastLoad:t.lastLoad,publishedTripTemplates:l,unpublishedTripTemplates:i}},X={loadSchedule:N.loadSchedule,addToast:B.addToast,removeToast:B.removeToast},z=function(e){function t(r){babelHelpers.classCallCheck(this,t);var l=babelHelpers.possibleConstructorReturn(this,e.call(this,r));return l.renderTripTemplate=l.renderTripTemplate.bind(l),l}return babelHelpers.inherits(t,e),t.prototype.componentDidMount=function(){this.shouldReload()&&this.props.loadSchedule()},t.prototype.shouldReload=function(){var e=this.props.lastLoad;return!e||a.default.unix(e).add(1,"hour").isBefore((0,a.default)())},t.prototype.previewTripTemplate=function(e){var t=e.id,r=e.posterPictures,l=e.productType,i=1===l?k.SINGLE_EXPERIENCE_TEMPLATE:k.TEMPLATE;r.length>0?c.default.push(i,{tripTemplateId:t,isPreview:!0}):(this.props.removeToast(I.TAP_TEMPLATE_WITHOUT_POSTER_TOAST),this.props.addToast(I.TAP_TEMPLATE_WITHOUT_POSTER_TOAST))},t.prototype.renderTripTemplate=function(e){var t=this,r=this.props.experienceTemplatesById,l=e.associatedExperienceTemplateIds,i=e.defaultDurationDays,a=e.id,p=(0,U.getDescription)(e).name||s.default.phrase("(Noname)",null,"placeholder for empty experience title"),u=l[0],o=r[u],n=o&&o.durationHours,d=(0,U.isSingleExperienceTripTemplate)(e),b=s.default.phrase("%{count} day experience",{count:i},"describe the duration day of the trip"),h=n?s.default.phrase("%{count} hour experience",{count:n},"describe the duration hour of the trip"):null,f=d?h:b,T=d&&(0,U.getExperienceTemplatePhoto)(o)||(0,U.getTripTemplatePhoto)(e),c=d?"square":"poster";return babelHelpers.jsx(H.default,{title:p,subtitle:f,image:T,imageShape:c,onPress:function(){return t.previewTripTemplate(e)}},a)},t.prototype.renderPublished=function(){var e=this,t=this.props,r=t.publishedTripTemplates,l=t.unpublishedTripTemplates;if(r.length<1)return null;var i=l.length>0,a=i?"full":"none";return babelHelpers.jsx(x.default,{divider:a},void 0,babelHelpers.jsx(g.default,{heavy:!0,first:!0,title:s.default.phrase("Published",null,"section header for showing published trip templates")}),r.map(function(t){return e.renderTripTemplate(t)}))},t.prototype.renderUnpublished=function(){var e=this,t=this.props.unpublishedTripTemplates;return t.length<1?null:babelHelpers.jsx(x.default,{},void 0,babelHelpers.jsx(g.default,{heavy:!0,first:!0,title:s.default.phrase("Unpublished",null,"section header for showing unpublished trip templates")}),t.map(function(t){return e.renderTripTemplate(t)}))},t.prototype.render=function(){var e=this.props,t=e.isTripTemplatesLoading,r=e.publishedTripTemplates,l=e.unpublishedTripTemplates,i=r.length+l.length;return babelHelpers.jsx(b.View,{style:J.container},void 0,babelHelpers.jsx(y.default,{style:J.container,refreshControl:babelHelpers.jsx(b.RefreshControl,{refreshing:!1,onRefresh:this.props.loadSchedule})},void 0,babelHelpers.jsx(f.default,{title:s.default.phrase("Your experiences",null,"page title for host to view trip templates")}),t&&babelHelpers.jsx(w.default,{}),!t&&this.renderPublished(),!t&&this.renderUnpublished(),!t&&i<1&&babelHelpers.jsx(D.default,{divider:"none"},void 0,s.default.phrase("You don\u2019t have any experiences.",null,"text to tell host there is no trip template at all"))),babelHelpers.jsx(A.default,{},void 0,babelHelpers.jsx(j.default,{id:I.LOAD_SCHEDULE_FAILED_TOAST,description:s.default.phrase("Something went wrong when loading your experiences",null,"text to tell user it fails to load trip templates"),action:s.default.phrase("Try again",null,"link title for click to retry"),onActionPress:this.props.loadSchedule})),babelHelpers.jsx(A.default,{},void 0,babelHelpers.jsx(j.default,{id:I.TAP_TEMPLATE_WITHOUT_POSTER_TOAST,description:s.default.phrase("You can\u2019t preview your experience until the final photos are uploaded.",null,"text to tell host that they can\u2019t preview their experience yet")})))},t}(n.Component);z.propTypes=F,z.defaultProps=G;var J=S.default.create(function(){return{container:{flex:1}}});l.default=(0,d.connect)(V,X)(z)},1838);