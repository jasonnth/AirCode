__d(function(e,t,i,s){Object.defineProperty(s,"__esModule",{value:!0});var n=t(412),o=babelHelpers.interopRequireDefault(n),l=t(271),r=babelHelpers.interopRequireDefault(l),a=t(44),p=t(2257),h=babelHelpers.interopRequireDefault(p),u=t(2258),d=babelHelpers.interopRequireDefault(u),c=t(2265),P=babelHelpers.interopRequireDefault(c),b=t(2266),f=babelHelpers.interopRequireDefault(b),O=t(2264),T=t(2267),C=babelHelpers.interopRequireDefault(T),I=t(2268),w=babelHelpers.interopRequireDefault(I),y={issueId:o.default.number.isRequired,nodeId:o.default.number.isRequired,options:o.default.arrayOf(o.default.shape({text:o.default.string.isRequired,value:o.default.string.isRequired})).isRequired,isCurrent:o.default.bool,onPress:o.default.func.isRequired,selectedOption:o.default.string,style:a.View.propTypes.style},S={selectedOption:null},m=function(e){function t(i){babelHelpers.classCallCheck(this,t);var s=babelHelpers.possibleConstructorReturn(this,e.call(this,i));s.onOptionPress=s.onOptionPress.bind(s),s.onPhotoUploaderFinish=s.onPhotoUploaderFinish.bind(s),s.onInputTextFinish=s.onInputTextFinish.bind(s),s.onAmenityPickerFinish=s.onAmenityPickerFinish.bind(s);var n=s.props,o=n.options,l=n.selectedOption;return s.state={selectedOption:l,showPhotoUploader:!1,showInputText:!1,showContentModal:!1,showAmenityPicker:!1,title:"",content:"",photos:null},s.hasAddPhotoOption=!l&&!!o.find(function(e){return e.onClick&&e.onClick.show===O.OPTION_TYPES.ATTACHMENTS_UPLOADER}),s.hasInputTextOption=!l&&!!o.find(function(e){return e.onClick&&e.onClick.show===O.OPTION_TYPES.INPUT_TEXT}),s.hasContentModalOption=!l&&!!o.find(function(e){return e.onClick&&e.onClick.show===O.OPTION_TYPES.CONTENT_MODAL}),s.amenityOption=l?null:o.find(function(e){return e.onClick&&e.onClick.show===O.OPTION_TYPES.AMENITIES_PICKER}),s}return babelHelpers.inherits(t,e),t.prototype.componentWillReceiveProps=function(e){e.selectedOption&&this.setState({selectedOption:e.selectedOption})},t.prototype.onPhotoUploaderFinish=function(){this.setState({showPhotoUploader:!1,selectedOption:this.pendingSelectedOption}),this.props.onPress(this.onPressParams)},t.prototype.onInputTextFinish=function(e){this.setState({showInputText:!1,selectedOption:this.pendingSelectedOption}),this.props.onPress(this.onPressParams,e)},t.prototype.onAmenityPickerFinish=function(e){this.setState({showAmenityPicker:!1,selectedOption:this.pendingSelectedOption}),this.props.onPress(this.onPressParams,e)},t.prototype.getAllAmenities=function(){var e=this.amenityOption.onClick;return[].concat(babelHelpers.toConsumableArray(e.critical_amenities||[]),babelHelpers.toConsumableArray(e.amenities||[]))},t.prototype.onOptionPress=function(e){var t=e.onClick;t?(this.onPressParams=e,this.pendingSelectedOption=e.value,t.show===O.OPTION_TYPES.ATTACHMENTS_UPLOADER?this.setState({showPhotoUploader:!0}):t.show===O.OPTION_TYPES.INPUT_TEXT?this.setState({showInputText:!0,title:e.text}):t.show===O.OPTION_TYPES.CONTENT_MODAL?this.setState({showContentModal:!0,title:e.text,content:t.data}):t.show===O.OPTION_TYPES.AMENITIES_PICKER&&this.setState({showAmenityPicker:!0})):(this.setState({selectedOption:e.value}),this.props.onPress(e))},t.prototype.render=function(){var e=this,t=this.props,i=t.issueId,s=t.isCurrent,n=t.options,o=t.style,l=this.state.selectedOption;return babelHelpers.jsx(a.View,{},void 0,!l&&r.default.createElement(h.default,babelHelpers.extends({},this.props,{onPress:this.onOptionPress,disabled:!s})),l&&babelHelpers.jsx(w.default,{text:n.find(function(e){return e.value===l}).text,style:o}),this.hasAddPhotoOption&&babelHelpers.jsx(d.default,{visible:this.state.showPhotoUploader,onVisibleChange:function(t){return e.setState({showPhotoUploader:t})},issueId:i,onFinish:this.onPhotoUploaderFinish}),this.hasInputTextOption&&babelHelpers.jsx(P.default,{visible:this.state.showInputText,onVisibleChange:function(t){return e.setState({showInputText:t})},title:this.state.title,onFinish:this.onInputTextFinish}),this.hasContentModalOption&&babelHelpers.jsx(f.default,{visible:this.state.showContentModal,onVisibleChange:function(t){return e.setState({showContentModal:t})},title:this.state.title,content:this.state.content}),this.amenityOption&&babelHelpers.jsx(C.default,{visible:this.state.showAmenityPicker,onVisibleChange:function(t){return e.setState({showAmenityPicker:t})},amenities:this.getAllAmenities(),onFinish:this.onAmenityPickerFinish}))},t}(l.PureComponent);s.default=m,m.propTypes=y,m.defaultProps=S},2256);