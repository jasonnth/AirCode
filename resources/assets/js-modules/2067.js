__d(function(e,t,o,a){Object.defineProperty(a,"__esModule",{value:!0});var i=t(412),r=babelHelpers.interopRequireDefault(i),n=t(271),l=babelHelpers.interopRequireDefault(n),s=t(44),u=t(1646),d=babelHelpers.interopRequireDefault(u),p=t(924),h=babelHelpers.interopRequireDefault(p),c=t(927),b=babelHelpers.interopRequireDefault(c),f=t(758),m=babelHelpers.interopRequireDefault(f),g=t(422),H=babelHelpers.interopRequireDefault(g),y={enableHighAccuracy:!0,timeout:2e4,maximumAge:1e3},w={x:.5,y:.5},x=babelHelpers.extends({},d.default.Marker.propTypes,{coordinate:r.default.shape({latitude:r.default.number.isRequired,longitude:r.default.number.isRequired}),children:r.default.node,geolocationOptions:r.default.shape({enableHighAccuracy:r.default.bool,timeout:r.default.number,maximumAge:r.default.number,locationPermissionIOS:r.default.string}),heading:r.default.number,zIndex:r.default.number}),v={geolocationOptions:y,zIndex:1e3},I=function(e){function t(o){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this,o));return a.mounted=!1,a.state={myPosition:null},a}return babelHelpers.inherits(t,e),t.prototype.componentDidMount=function(){var e=this;this.mounted=!0,this.props.coordinate||("android"===s.Platform.OS?s.PermissionsAndroid.requestPermission(s.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION).then(function(t){t&&e.mounted&&e.watchLocation()}):this.watchLocation())},t.prototype.watchLocation=function(){var e=this;this.watchID=navigator.geolocation.watchPosition(function(t){var o=e.state.myPosition,a=t.coords;(0,h.default)(a,o)||e.setState({myPosition:a})},null,babelHelpers.extends({},this.props.geolocationOptions,{locationPermissionIOS:navigator.geolocation.IOS_PERMISSIONS.WHEN_IN_USE}))},t.prototype.componentWillUnmount=function(){this.mounted=!1,this.watchID&&navigator.geolocation.clearWatch(this.watchID)},t.prototype.render=function(){var e=(0,m.default)(this.props,d.default.Marker),t=this.props,o=t.heading,a=t.coordinate,i=this.props.zIndex;if(!a){var r=this.state.myPosition;if(!r)return null;a=r,o=r.heading}var n="number"==typeof o&&o>=0?o+"deg":null,u=H.default.theme.color;return l.default.createElement(d.default.Marker,babelHelpers.extends({anchor:w,style:{zIndex:i}},e,{coordinate:a}),babelHelpers.jsx(s.View,{style:O.container},void 0,babelHelpers.jsx(s.View,{style:O.markerHalo}),n&&babelHelpers.jsx(s.View,{style:[O.heading,{transform:[{rotate:n}]}]},void 0,babelHelpers.jsx(b.default,{name:"mapHeadingTriangle",color:u.myLocationMapMarker,height:P})),babelHelpers.jsx(s.View,{style:O.marker},void 0,n&&"android"===s.Platform.OS&&babelHelpers.jsx(s.Text,{style:O.markerAndroidBugFix},void 0,n))),this.props.children)},t}(l.default.PureComponent);a.default=I;var P=7,k=21+P+6,O=H.default.create(function(e){var t=e.color;return{container:{width:k,height:k},heading:{position:"absolute",top:0,left:0,width:k,height:k,alignItems:"center"},markerHalo:{position:"absolute",backgroundColor:t.white,top:0,left:0,width:21,height:21,borderRadius:Math.ceil(10.5),margin:(k-21)/2,shadowColor:t.black,shadowOpacity:.25,shadowRadius:2,shadowOffset:{height:0,width:0}},marker:{backgroundColor:t.myLocationMapMarker,width:15,height:15,borderRadius:Math.ceil(7.5),margin:(k-15)/2},markerAndroidBugFix:{width:0,height:0}}});I.propTypes=x,I.defaultProps=v},2067);