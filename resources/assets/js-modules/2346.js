__d(function(n,t,r,e){function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(n,t){var r=[],e=!0,i=!1,o=void 0;try{for(var u,a=n["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(e=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);e=!0);}catch(n){i=!0,o=n}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(("function"==typeof Symbol?Symbol.iterator:"@@iterator")in Object(t))return n(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function n(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),a=t(2338),c=t(2347),f=function(n){return n&&n.__esModule?n:{default:n}}(c),l=t(2332),s=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.monorailUserAPI,e=void 0===r?new f.default:r,o=t.ganeshAgentAPI;i(this,n),this.monorailUserAPI=e,this.ganeshAgentAPI=o}return u(n,[{key:"loadParticipants",value:function(){function n(n){var t=n.compoundKeys,r=void 0===t?[]:t;return r.length?Promise.all([this.loadUsers(r),this.loadAgents(r)]).then(function(n){var t=o(n,2),e=t[0],i=t[1];return r.map(function(n){var t=n.account_type,r=n.account_id;if(t===l.ACCOUNT_TYPE.USER){var o=e.find(function(n){return String(n.id)===String(r)});return(0,a.toParticipant)({compoundKey:n,monorailUser:o})}if(t===l.ACCOUNT_TYPE.AGENT){var u=i.find(function(n){return String(n.id)===String(r)});return(0,a.toParticipant)({compoundKey:n,ganeshAgent:u})}return(0,a.synthesizeParticipant)(n)})}).catch(function(){return r.map(function(n){return(0,a.synthesizeParticipant)(n)})}):Promise.resolve([])}return n}()},{key:"loadUsers",value:function(){function n(n){var t=n.filter(function(n){return n.account_type===l.ACCOUNT_TYPE.USER}).map(function(n){return n.account_id});return t.length?this.monorailUserAPI.loadUsers(t).catch(function(n){return[]}):Promise.resolve([])}return n}()},{key:"loadAgents",value:function(){function n(n){if(this.ganeshAgentAPI){var t=n.filter(function(n){return n.account_type===l.ACCOUNT_TYPE.AGENT}).map(function(n){return n.account_id});if(t.length)return this.ganeshAgentAPI.loadUsers(t).catch(function(n){return[]})}return Promise.resolve([])}return n}()}]),n}();e.default=s},2346);