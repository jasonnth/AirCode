__d(function(e,t,r,a){Object.defineProperty(a,"__esModule",{value:!0});var n=t(412),i=babelHelpers.interopRequireDefault(n),s=t(271),l=(babelHelpers.interopRequireDefault(s),t(44)),u=t(759),o=babelHelpers.interopRequireDefault(u),f=t(379),c=babelHelpers.interopRequireDefault(f),d=t(773),p=babelHelpers.interopRequireDefault(d),b=t(778),g=babelHelpers.interopRequireDefault(b),h=t(1057),m=babelHelpers.interopRequireDefault(h),H=t(787),R=babelHelpers.interopRequireDefault(H),q=t(841),_=babelHelpers.interopRequireDefault(q),D=t(1352),v=babelHelpers.interopRequireDefault(D),y=t(410),w=babelHelpers.interopRequireDefault(y),j=t(1545),A=babelHelpers.interopRequireDefault(j),S=t(1023),T=t(654),x=t(790),I=t(1477),C=babelHelpers.interopRequireDefault(I),O=t(1547),P=babelHelpers.interopRequireWildcard(O),F=t(1553),N=babelHelpers.interopRequireDefault(F),E=t(1557),L=babelHelpers.interopRequireDefault(E),Q=t(1558),G=babelHelpers.interopRequireDefault(Q),k=t(1538),M=babelHelpers.interopRequireWildcard(k),B=t(789),U=babelHelpers.interopRequireDefault(B),V=t(1550),W=t(1549),z={confirmationCode:i.default.string.isRequired,isHost:i.default.bool.isRequired,reservation:i.default.object,reservationAlteration:i.default.object,isFetching:i.default.bool.isRequired,isFetchingQuote:i.default.bool.isRequired,isSaving:i.default.bool.isRequired,numberOfGuests:i.default.number,startDate:i.default.string,endDate:i.default.string,listingId:i.default.number,listingName:i.default.string,price:i.default.number,quote:i.default.object,errorMessage:i.default.string,fetch:i.default.func.isRequired,setIsHost:i.default.func.isRequired,changeDateRange:i.default.func.isRequired,changeNumberOfGuests:i.default.func.isRequired,changeListing:i.default.func.isRequired,changePrice:i.default.func.isRequired,submitAlteration:i.default.func.isRequired,fetchQuote:i.default.func.isRequired},J={},K=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.componentDidMount=function(){this.props.setIsHost(this.props.isHost),this.fetchReservation()},t.prototype.fetchReservation=function(){this.props.fetch(this.props.confirmationCode)},t.prototype.render=function(){var e=this,t=this.props,r=t.isHost,a=t.reservation,n=t.reservationAlteration,i=t.isFetching,s=t.isFetchingQuote,u=t.isSaving,o=t.numberOfGuests,f=t.startDate,d=t.endDate,b=t.listingId,h=t.listingName,H=t.price,q=t.quote,D=t.errorMessage,y=t.changeDateRange,j=t.changeNumberOfGuests,S=t.changeListing,T=t.changePrice,x=t.submitAlteration,I=t.fetchQuote,C=null;a&&(C=r?a.subtotal_price_host_native:a.subtotal_price_guest_native);var O=!!a&&H!==C,P=!s&&(!!q&&null==q.problem||O),F=u||null!=n;return babelHelpers.jsx(l.View,{style:l.StyleSheet.absoluteFill},void 0,babelHelpers.jsx(R.default,{withInsets:[P&&m.default]},void 0,babelHelpers.jsx(p.default,{title:c.default.phrase("Change Reservation",null,"title of the change reservation page"),subtitle:r?c.default.phrase("Request a change of dates, number of guests, price, or listing.",null,"subtitle of the change reservation page (when the user can change listing)"):c.default.phrase("Request a change of dates or number of guests.",null,"subtitle of the change reservation page (when the user can change listing)")}),a&&babelHelpers.jsx(N.default,{reservation:a,isHost:r,isFetchingQuote:s,numberOfGuests:o,startDate:f,endDate:d,listingId:b,listingName:h,price:H,currency:a.native_currency,quote:q,otherPartyName:r?a.guest.first_name:a.host.first_name,onChangeDateRange:y,onChangeNumberOfGuests:j,onChangeListing:S,onChangePrice:T}),(i||s)&&babelHelpers.jsx(l.View,{style:X.loadingContainer},void 0,babelHelpers.jsx(_.default,{})),P&&r&&babelHelpers.jsx(g.default,{},void 0,babelHelpers.jsx(A.default,{showSign:!0,amount:H-C,currency:a.native_currency,subtitle:c.default.phrase("Base price difference",null,"title of a section displaying the base price difference of an alteration")}),babelHelpers.jsx(G.default,{isInitiatedByHost:!0,guestName:a.guest.first_name})),P&&!r&&babelHelpers.jsx(g.default,{},void 0,babelHelpers.jsx(A.default,{showSign:!0,amount:q.guest_price_difference.amount,currency:q.guest_price_difference.currency,amountFormatted:q.guest_price_difference.amount_formatted,subtitle:c.default.phrase("Price difference",null,"title of a section displaying the price difference of an alteration"),actionTitle:0!==q.guest_price_difference.amount?c.default.phrase("See price breakdown",null,"a button to see the price breakdown of an alteration"):null,onPressAction:function(){return w.default.push(M.PRICE_DIFFERENCE)}}),babelHelpers.jsx(L.default,{hostName:a.host.first_name,quote:q,amountFormatted:q.guest_price_difference_unsigned.amount_formatted,isInitiatedByHost:!1}))),babelHelpers.jsx(U.default,{withInsets:[P&&m.default]},void 0,babelHelpers.jsx(v.default,{id:V.FETCH_FAILED_TOAST,description:c.default.phrase("Something went wrong",null,"an error message"),action:c.default.phrase("Try again",null,"a button asking user to try again after something went wrong"),onActionPress:function(){return e.fetchReservation()},error:!0}),babelHelpers.jsx(v.default,{id:V.QUOTE_FAILED_TOAST,title:c.default.phrase("Something went wrong",null,"an error message"),description:D,action:c.default.phrase("Try again",null,"a button asking user to try again after something went wrong"),onActionPress:function(){return I()},error:!0}),babelHelpers.jsx(v.default,{id:V.QUOTE_PROBLEM_TOAST,title:c.default.phrase("Something went wrong",null,"an error message"),description:D,action:c.default.phrase("Try again",null,"a button asking user to try again after something went wrong"),onActionPress:function(){return I()},error:!0}),babelHelpers.jsx(v.default,{id:V.SUBMIT_ALTERATION_FAILED_TOAST,description:c.default.phrase("Something went wrong",null,"an error message"),action:c.default.phrase("Try again",null,"a button asking user to try again after something went wrong"),onActionPress:function(){return x(!1)},error:!0})),P&&babelHelpers.jsx(m.default,{onPress:function(){F||x()},loading:F},void 0,c.default.phrase("Request Change",null,"a primary button to submit alteration request")))},t}(s.PureComponent);K.defaultProps=J,K.propTypes=z;var X=l.StyleSheet.create({loadingContainer:{alignItems:"center",marginTop:8*S.bp}}),Y=(0,x.connect)(function(e){return(0,o.default)((0,W.rootSelector)(e),["reservation","reservationAlteration","isFetching","isFetchingQuote","isSaving","numberOfGuests","startDate","endDate","listingId","listingName","price","quote","errorMessage"])},function(e){return(0,T.bindActionCreators)(babelHelpers.extends({},(0,o.default)(P,["fetch","setIsHost","changeDateRange","changeNumberOfGuests","changeListing","changePrice","submitAlteration","fetchQuote"])),e)})(K);a.default=(0,C.default)(P.resetState)(Y)},1544);