__d(function(e,t,s,r){"use strict";var n=t(91),i=(t(55),t(25).WebSocketModule),o=t(206),a=t(196),c=t(202),d=0,p=1,h=2,u=3,E=["close","error","message","open"],f=0,y=function(e){function t(s,r,o){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this));return a.CONNECTING=d,a.OPEN=p,a.CLOSING=h,a.CLOSED=u,a.readyState=d,"string"==typeof r&&(r=[r]),Array.isArray(r)||(r=null),a._eventEmitter=new n(i),a._socketId=f++,i.connect(s,r,o,a._socketId),a._registerEvents(),a}return babelHelpers.inherits(t,e),t.prototype.close=function(e,t){this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&(this.readyState=this.CLOSING,this._close(e,t))},t.prototype.send=function(e){if(this.readyState===this.CONNECTING)throw new Error("INVALID_STATE_ERR");if("string"==typeof e)return void i.send(e,this._socketId);if(ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer)return e=c.fromByteArray(new Uint8Array(e)),void i.sendBinary(e,this._socketId);throw new Error("Unsupported data type")},t.prototype.ping=function(){if(this.readyState===this.CONNECTING)throw new Error("INVALID_STATE_ERR");i.ping(this._socketId)},t.prototype._close=function(e,t){var s="number"==typeof e?e:1e3,r="string"==typeof t?t:"";i.close(s,r,this._socketId)},t.prototype._unregisterEvents=function(){this._subscriptions.forEach(function(e){return e.remove()}),this._subscriptions=[]},t.prototype._registerEvents=function(){var e=this;this._subscriptions=[this._eventEmitter.addListener("websocketMessage",function(t){t.id===e._socketId&&e.dispatchEvent(new o("message",{data:"binary"===t.type?c.toByteArray(t.data).buffer:t.data}))}),this._eventEmitter.addListener("websocketOpen",function(t){t.id===e._socketId&&(e.readyState=e.OPEN,e.dispatchEvent(new o("open")))}),this._eventEmitter.addListener("websocketClosed",function(t){t.id===e._socketId&&(e.readyState=e.CLOSED,e.dispatchEvent(new o("close",{code:t.code,reason:t.reason})),e._unregisterEvents(),e.close())}),this._eventEmitter.addListener("websocketFailed",function(t){t.id===e._socketId&&(e.readyState=e.CLOSED,e.dispatchEvent(new o("error",{message:t.message})),e.dispatchEvent(new o("close",{message:t.message})),e._unregisterEvents(),e.close())})]},t}(a.apply(void 0,E));y.CONNECTING=d,y.OPEN=p,y.CLOSING=h,y.CLOSED=u,s.exports=y},205);