__d(function(e,t,r,i){Object.defineProperty(i,"__esModule",{value:!0});var l=t(44),n=t(1023),a=t(834),o=t(751),s=babelHelpers.interopRequireDefault(o),u=t(379),p=babelHelpers.interopRequireDefault(u),d=t(773),c=babelHelpers.interopRequireDefault(d),b=t(410),f=babelHelpers.interopRequireDefault(b),m=t(271),_=babelHelpers.interopRequireDefault(m),h=t(778),g=babelHelpers.interopRequireDefault(h),y=t(787),T=babelHelpers.interopRequireDefault(y),v=t(839),x=babelHelpers.interopRequireDefault(v),k=t(899),H=babelHelpers.interopRequireDefault(k),P=t(1660),q=babelHelpers.interopRequireDefault(P),C=t(1198),S=babelHelpers.interopRequireDefault(C),R=t(562),w=babelHelpers.interopRequireDefault(R),D=t(1372),I=babelHelpers.interopRequireDefault(D),j=t(790),E=t(1562),B=t(1578),A=t(1483),W=t(1609),L=t(1749),U=t(1747),F=babelHelpers.interopRequireDefault(U),V=t(1482),N=babelHelpers.interopRequireWildcard(V),M=t(1569),O=babelHelpers.interopRequireWildcard(M),Y=t(705),z=babelHelpers.interopRequireDefault(Y),G=t(1608),K=babelHelpers.interopRequireWildcard(G),Q=t(1634),X=babelHelpers.interopRequireDefault(Q),J=t(1636),Z=babelHelpers.interopRequireDefault(J),$={currentUser:Z.default,showBookingFooter:a.Types.bool,tripTemplate:X.default,tripTemplateForLogging:X.default,scheduledTripTemplate:a.Types.object,additionalTravelers:a.Types.array.isRequired,templateId:a.Types.number.isRequired,tripPrice:a.Types.object.isRequired,travelPurpose:a.Types.number,guestAddress:a.Types.object},ee={currentUser:null,scheduledTripTemplate:{},showBookingFooter:!1,tripTemplate:{}},te=function(e,t){return{currentUser:(0,B.currentUserSelector)(e),tripTemplate:(0,B.tripTemplateSelector)(e,t.templateId),tripTemplateForLogging:(0,B.tripTemplateSelector)(e,t.templateId),scheduledTripTemplate:(0,B.rootSelector)(e).get("bookingData").scheduledTripTemplate,additionalTravelers:(0,B.additionalTravelersSelector)(e),tripPrice:(0,B.tripPriceSelector)(e),travelPurpose:(0,B.rootSelector)(e).get("bookingData").travel_purpose,guestAddress:(0,B.rootSelector)(e).get("bookingData").guest_address}},re=function(e){(0,W.logPDPClickInfoSection)(K.TERMS_OF_SERVICE,e),f.default.push(O.SIMPLE_WEB_VIEW,{uri:(0,A.getWebUrl)("/experiences/terms-of-service",{template_id:e.id})})},ie=function(e){(0,W.logPDPClickInfoSection)(K.GUEST_WAIVER,e),f.default.push(O.SIMPLE_WEB_VIEW,{uri:(0,A.getWebUrl)("/experiences/guest-waiver",{template_id:e.id})})},le=function(e){(0,W.logPDPClickInfoSection)(K.CANCELLATION_POLICY,e),f.default.push(O.SIMPLE_WEB_VIEW,{uri:(0,A.getWebUrl)("/experiences/cancellation-policy",{template_id:e.id})})},ne=function(e){(0,W.logPDPClickInfoSection)(K.CHINA_DISCLOSURE,e),f.default.push(O.SIMPLE_WEB_VIEW,{uri:(0,A.getWebUrl)("/help/article/1886",{template_id:e.id})})},ae=function(e){function t(r){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,e.call(this,r));return i.onBook=i.onBook.bind(i),i}return babelHelpers.inherits(t,e),t.prototype.onBook=function(){var e=this.props.tripPrice,t=e.total_price,r=e.credit_balance,i=e.currency.currency,l=this.props.tripTemplate,n=l.experiences,a=l.title,o=l.poster_pictures,s=this.props.scheduledTripTemplate,u=s.id,d=s.start_date,c=s.end_date,b=1+this.props.additionalTravelers.length,m=(0,E.basePricePerPersonStringFromTripPrice)(this.props.tripPrice),_=p.default.phrase("%{basePricePerPerson} x %{smart_count} guest |||| %{basePricePerPerson} x %{smart_count} guests",{smart_count:b,basePricePerPerson:m},"breaks down the total price paid for the trip in terms of the per-person cost"),h={amount:t,currency:i},g=(this.props.additionalTravelers||[]).map(function(e){return{first_name:e.firstName,last_name:e.lastName,phone_number:e.phone,email:e.email}}),y=(0,w.default)(d).format(I.default.format("sss")),T=(0,w.default)(c).format(I.default.format("sss")),v=y===T?y:p.default.phrase("%{startDateString} \u2013 %{endDateString}",{startDateString:y,endDateString:T},"date range. dates passed in will be locally formatted."),x=p.default.phrase("Total",null,"Title of payment flow for total trip cost"),k=v+"\n"+p.default.phrase("%{smart_count} experience |||| %{smart_count} experiences",{smart_count:n.length},"Payment description for number of experiences guest is buying")+", ";k+=p.default.phrase("%{smart_count} guest |||| %{smart_count} guests",{smart_count:b,dateFormatted:v},"Payment description for a trip with the number of travelers");var H={price_info:{localized_title:x,price_items:[{localized_title:_,total:h}],total:h,type:"TOTAL"},cart_item:{title:a,description:k,thumbnail_url:o&&o[0]&&o[0].poster,billing_parameters:{scheduled_template_id:u,guest_count:b,secondary_guest_infos:g||[],travel_purpose:this.props.travelPurpose,guest_address:this.props.guestAddress,product_type:"MtTrip"}},credit_info:{amount:r,currency:i},quickpay_client:N.EXPERIENCES_QUICK_PAY};f.default.push(N.EXPERIENCES_QUICK_PAY,H)},t.prototype.renderSection=function(e,t){var r=void 0;return _.default.isValidElement(t)||(r=babelHelpers.jsx(l.Text,{style:oe.sectionBody},void 0,t)),babelHelpers.jsx(s.default,{},e,babelHelpers.jsx(q.default,{},void 0,e),r||t)},t.prototype.render=function(){var e=this,t=this.props,r=t.currentUser,i=t.showBookingFooter,n=t.tripTemplate,a=t.tripTemplateForLogging,o=t.additionalTravelers,s=n.description_native,u=n.market.country_code,d=r.country_of_residence,b=n.requirements&&(0,S.default)(n.requirements,1),f=(0,L.requireIdVerification)(n,r),m=void 0;m=i?0===o.length?p.default.phrase("Review the guest requirements",null,"Header instructing user to review travel requirements"):p.default.phrase("Review the requirements for your group",null,"Header instructing user to review travel requirements"):p.default.phrase("Guest requirements",null,"Section header");var _=void 0;_="CN"===u&&z.default.launch("mt_mobile_radical_china_transparency_with_link")?babelHelpers.jsx(l.View,{},void 0,babelHelpers.jsx(l.View,{style:oe.sectionParagraph},void 0,babelHelpers.jsx(l.Text,{style:oe.sectionBody},void 0,"CN"===d&&babelHelpers.jsx(H.default,{default:"When you book an experience in China as a Chinese resident, your information will be shared with Airbnb China. Chinese government agencies may require Airbnb China to disclose host and guest details relating to Experiences in China. %{learn_more_link_start}Learn more%{learn_more_link_end}.",context:"Disclosure regarding user data for experiences in China booked by Chinese resident",learn_more_link:babelHelpers.jsx(l.Text,{style:oe.link,onPress:function(){return ne(a)}})}),"CN"!==d&&babelHelpers.jsx(H.default,{default:"When you book an experience in China, your name, phone number, booking info, and messages with your host will be shared with Airbnb China. Chinese government agencies may require Airbnb China to disclose host and guest details relating to experiences in China. %{learn_more_link_start}Learn more%{learn_more_link_end}.",context:"Disclosure regarding user data for experiences in China",learn_more_link:babelHelpers.jsx(l.Text,{style:oe.link,onPress:function(){return ne(a)}})}))),babelHelpers.jsx(l.Text,{style:oe.sectionBody},void 0,babelHelpers.jsx(H.default,{default:"You also agree to the %{tos_link_start}Airbnb Additional Terms of Service%{tos_link_end}, %{guest_waiver_link_start}Guest Release and Waiver%{guest_waiver_link_end}, and %{cancellation_policy_link_start}Cancellation Policy%{cancellation_policy_link_end}.",tos_link:babelHelpers.jsx(l.Text,{style:oe.link,onPress:function(){return re(a)}}),guest_waiver_link:babelHelpers.jsx(l.Text,{style:oe.link,onPress:function(){return ie(a)}}),cancellation_policy_link:babelHelpers.jsx(l.Text,{style:oe.link,onPress:function(){return le(a)}}),context:"Text with links to legal additional agreements that are required before booking"}))):babelHelpers.jsx(l.Text,{style:oe.sectionBody},void 0,babelHelpers.jsx(H.default,{default:"When you book, you agree to the %{tos_link_start}Airbnb Additional Terms of Service%{tos_link_end}, %{guest_waiver_link_start}Guest Release and Waiver%{guest_waiver_link_end}, and %{cancellation_policy_link_start}Cancellation Policy%{cancellation_policy_link_end}.",tos_link:babelHelpers.jsx(l.Text,{style:oe.link,onPress:function(){return re(a)}}),guest_waiver_link:babelHelpers.jsx(l.Text,{style:oe.link,onPress:function(){return ie(a)}}),cancellation_policy_link:babelHelpers.jsx(l.Text,{style:oe.link,onPress:function(){return le(a)}}),context:"Text with links to legal agreements that are required before booking"}));var h=[s&&s.traveler_requirements&&{title:p.default.phrase("From your host",null,"section header for host-input guest requirements"),body:s.traveler_requirements},s&&s.traveler_certifications&&{title:p.default.phrase("Certifications",null,"section header for host-input required certifications"),body:s.traveler_certifications},!b&&{title:p.default.phrase("Age",null,"Title of age requirement section"),body:p.default.phrase("All guests must be at least 18 years old and children can\u2019t come along.",null,"Body of age requirement section when the experience does not provide alcohol")},b&&{title:p.default.phrase("Age",null,"Title of age requirement section"),body:p.default.phrase("All guests must be at least 18 and meet the legal drinking age, because this experience includes alcohol. Children can\u2019t come along.",null,"Body of age requirement section when the experience provides alcohol")},f&&{title:p.default.phrase("Government ID",null,"Title of ID requirement section"),body:p.default.phrase("You\u2019ll need to take a selfie and match it to the photo on your ID. This is so Airbnb can confirm who\u2019s actually going on the experience. You\u2019ll only have to do this once.",null,"Body of ID requirement section")},{title:p.default.phrase("Terms of Service",null,"Section header"),body:_}];return babelHelpers.jsx(l.View,{style:[l.StyleSheet.absoluteFill,i&&oe.mainContainer]},void 0,babelHelpers.jsx(T.default,{},void 0,babelHelpers.jsx(c.default,{title:m}),babelHelpers.jsx(g.default,{},void 0,h.map(function(t){return t&&e.renderSection(t.title,t.body)}))),i&&babelHelpers.jsx(l.View,{style:oe.buttonContainer},void 0,babelHelpers.jsx(F.default,{buttonText:p.default.phrase("Accept",null,"Button text to accept terms and conditions"),buttonTextLike:!0,onButtonPress:function(){(0,W.logBookingFlowClickAgreeRequirements)(n),e.onBook()},scheduledTripTemplate:this.props.scheduledTripTemplate,tripTemplateId:n.id})))},t}(_.default.Component),oe=n.ThemedStyleSheet.create(function(e){var t=e.color,r=e.font,i=e.size;return{container:{paddingTop:i.vertical.medium,paddingHorizontal:i.baseRow.paddingHorizontal},mainContainer:{paddingBottom:F.default.contentInset.bottom},link:{color:t.textLink},sectionContainer:{paddingBottom:i.vertical.medium},sectionTitle:r.regularPlus,sectionParagraph:{marginBottom:i.vertical.medium},sectionBody:babelHelpers.extends({},r.regular),buttonContainer:babelHelpers.extends({position:"absolute",bottom:-1,left:-1,right:-1},x.default.footer,{paddingLeft:1,paddingRight:1,paddingBottom:1})}});ae.propTypes=$,ae.defaultProps=ee,i.default=(0,j.connect)(te)(ae)},1748);