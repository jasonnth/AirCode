__d(function(e,t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var s=t(379),a=babelHelpers.interopRequireDefault(s),i=t(412),r=babelHelpers.interopRequireDefault(i),l=t(271),u=(babelHelpers.interopRequireDefault(l),t(44)),c=t(1938),p=t(1937),h=t(1919),f=t(2013),d=t(1963),b=t(705),g=babelHelpers.interopRequireDefault(b),P=t(1962),w=babelHelpers.interopRequireDefault(P),R=t(2014),m=babelHelpers.interopRequireDefault(R),C=t(1998),v=babelHelpers.interopRequireDefault(C),y=t(1999),S=babelHelpers.interopRequireDefault(y),A=t(2e3),H=babelHelpers.interopRequireDefault(A),I=t(2001),T=babelHelpers.interopRequireDefault(I),k=t(2015),M=babelHelpers.interopRequireDefault(k),_=t(2002),D=babelHelpers.interopRequireDefault(_),E=t(1818),q=function(e){function t(n){babelHelpers.classCallCheck(this,t);var o=babelHelpers.possibleConstructorReturn(this,e.call(this,n)),s=o.props,a=s.endsAt,i=s.timezone;return o.mounted=!1,o.shouldShowExtraService=g.default.launch("mobile.paid_amenities_launch_guest"),o.shouldShowSelfCheckin=g.default.launch("mobile.self_checkin_instructions_guest_launch")&&!(0,p.hasCheckInInformationExpired)(a,i),o.state={canShareToWeChatMoments:!1},o}return babelHelpers.inherits(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.houseManual,o=t.openHouseManual;this.mounted=!0,this.props.onCardScreenImpression(),o&&n?this.openHouseManualSheet():(0,p.canShareToWeChatMoments)(this.props).then(function(t){e.mounted&&e.setState({canShareToWeChatMoments:t})})},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.cancelReservationIfPossible=function(e){var t=this;if(e.isNativeAlterationDisabled)this.props.onCancelReservationUnavailable();else{var n=e.confirmationCode;(0,d.logInfoSectionEvent)("Cancel",n,E.HOME_CARD,n),(0,h.navigateToCancelationFlow)(n).then(function(e){var n=e.payload;n&&n.didCancelFlowFinishedSuccessfully&&t.props.onCompleteCancelReservation()})}},t.prototype.changeReservation=function(e){var t=this;if(e.isNativeAlterationDisabled)this.props.onChangeReservationUnavailable();else{var n=e.confirmationCode;(0,d.logInfoSectionEvent)("Change",n,E.HOME_CARD,n),(0,f.openAlterationFlow)(e).then(function(e){e&&t.props.onCompleteChangeReservation()})}},t.prototype.getActions=function(){var e=this.props,t=e.endsAt,n=e.groupThreadId,o=e.onPressCallHost,s=e.onPressContact,i=e.onPressDirections,r=e.location,l=e.primaryHost.phone,u=e.showActions,c=e.threadId,h=e.timezone,f=[];return(0,p.hasExpired)(t,h)||!u?f:(r&&f.push({icon:"directions",onPress:function(){return i(r)},title:a.default.phrase("Directions",null,"an action button that brings up a list of options to open directions in a map provider")}),l&&f.push({icon:"phone",onPress:function(){return o(l)},title:a.default.phrase("Call Host",null,"an action button that brings up a list of options to call a user (Call/Text/Copy phone number)")}),(c||n)&&f.push({icon:"message",onPress:function(){return s(c,n)},title:a.default.phrase("Contact",null,"an action button that opens the conversation thread with the host")}),f)},t.prototype.getSubtitle=function(){var e=this.props;return[e.propertyType,e.roomType].filter(Boolean).join(" \xb7 ")},t.prototype.getRange=function(){var e=this.props,t=e.endsAt,n=e.startsAt,o=e.timezone;return{title:[a.default.phrase("Check In",null,"a header above check in date and time"),a.default.phrase("Check Out",null,"a header aboce check out date and time")],subtitle:[(0,c.formatTime)(n,o)+"\n"+(0,c.formatDate)(n,o,{includeDay:!0}),(0,c.formatTime)(t,o)+"\n"+(0,c.formatDate)(t,o,{includeDay:!0})]}},t.prototype.getCheckInInstructions=function(){var e=[],t=this.props.checkInInformation;if(this.shouldShowSelfCheckin&&t){var n=t.filter(function(e){return e.instructionVisible});n.length>0?n.map(function(e){return{body:e.instruction,title:a.default.phrase("%{checkInType} instructions",{checkInType:e.name},"title for check-in instructions provided by host")}}).forEach(function(t){return e.push(t)}):t.length&&e.push({body:a.default.phrase("Instructions will be visible during your stay.",null,"text informing the user that self-checkin instructions of their listing will becomevisible during their trip."),title:a.default.phrase("Self check-in",null,"title for the self-checkin instructions (i.e. lockbox code) section of an itinerary.")})}return e},t.prototype.getLinkRows=function(){var e=this,t=this.props,n=t.cancellationPolicyCategory,o=t.cancellationPolicyShort,s=t.city,i=t.confirmationCode,r=t.endsAt,l=t.groupThreadId,d=t.hasPaidAmenities,b=t.hasPaidAmenityOrders,g=t.houseManual,P=t.isAltering,w=t.isAppleWalletLoading,R=t.isCanceling,m=t.isRetracting,C=t.isSharedItinerary,v=t.nights,y=t.numberOfGuests,S=t.onPressActionEvent,A=t.onPressAddToAppleWallet,H=t.onPressContact,I=t.onPressCancellationPolicyRow,T=t.onPressCancelRequestRow,k=t.onPressReceiptRow,M=t.passbookPassSerialNumber,_=t.passbookPassTypeIdentifier,D=t.passbookPassUrl,E=t.product,q=t.showActions,W=t.threadId,G=t.timezone,x=t.status,O=t.totalPriceFormatted,U=[];if(C||U.push({onPress:function(){return S("Mange Guests",function(){(0,h.navigateToManageGuests)(i,y)})},title:a.default.phrase("Manage Guests",null,"A row button that opens the manage/invite guests screen")}),!(0,p.hasExpired)(r,G)&&q||!W&&!l||U.push({onPress:function(){return H(W,l)},title:a.default.phrase("Message Host",null,"a row button that opens the conversation thread with the host")}),U.push({onPress:function(){return S("View Guidebook",function(){(0,h.navigateToHomeHostMap)(E.id)})},title:a.default.phrase("View Guidebook",null,"a row button that opens the home host map")}),this.shouldShowExtraService&&(d||b)&&U.push({title:a.default.phrase("Extra Services",null,"a title for extra services a host offer, e.g. airport ride"),onPress:function(){return(0,h.navigateToPaidAmenityFlow)({confirmation_code:i,listing_id:E.id,thread_id:W,is_in_past:(0,c.isPast)(r,G),reservation_status:x,has_paid_amenity_orders:b})}}),"android"===u.Platform.OS&&l&&U.push({onPress:function(){return H(l)},title:a.default.phrase("Message Group",null,"a row button that opens the conversation thread with the group")}),g&&U.push({onPress:function(){return e.openHouseManualSheet()},title:a.default.phrase("House Manual",null,"a row button that brings up House manual sheet")}),this.state.canShareToWeChatMoments&&U.push({onPress:function(){return(0,h.navigateToShareTripToWeChatFlow)(i)},title:a.default.phrase("Share to WeChat Moments",null,"Button allowing user to share the past trip to Wechat moments")}),U.push({actionTitle:O,onPress:function(){return k({city:s,id:i,nights:v})},title:a.default.phrase("Total Cost",null,"a row button that brings up the price breakdown sheet")}),U.push({actionTitle:o,onPress:function(){return I(n)},title:a.default.phrase("Cancellation Policy",null,"a row button that brings up the cancelation policy sheet")}),(0,p.canGoResolutionCenter)(this.props)){var L=(0,p.getResolutionCenterRowTitle)();U.push({title:L,onPress:function(){return(0,h.navigateToResolutionCenterFlow)(i)}})}return(0,p.shouldShowCancelRow)(this.props)?U.push({isLoading:R,onPress:function(){return e.cancelReservationIfPossible(e.props)},title:a.default.phrase("Cancel Reservation",null,"a row button that brings up the reservation cancelation flow")}):(0,p.canRetract)(this.props)&&U.push({isLoading:m,onPress:function(){return T(i)},title:a.default.phrase("Cancel Request",null,"a row button that brings up the cancel reservation request flow")}),(0,f.showChangeReservationRow)(this.props)&&U.push({isLoading:P,onPress:function(){return e.changeReservation(e.props)},title:a.default.phrase("Change Reservation",null,"a row button that links to alteration flow")}),"ios"===u.Platform.OS&&M&&_&&D&&U.push({onPress:function(){return A(D)},isLoading:w,title:a.default.phrase("Add to Apple Wallet",null,"A row button that adds the reservation to Apple Wallet")}),U.push({actionTitle:i,onPress:function(){return S("Help With Trip Support",function(){(0,h.navigateToHelp)()})},title:a.default.phrase("Help",null,"a row button that links to the help center")}),U},t.prototype.getSections=function(){var e=[],t=this.props.wirelessInfo;return t&&e.push({body:a.default.phrase("Network: %{ssid}\nPassword: %{password}",{ssid:t.ssid||a.default.phrase("n/a",null,"a text when no wifi SSID is defined"),password:t.password||a.default.phrase("n/a",null,"a text when no wifi password is defined")},"a text for the Wifi network name and password"),title:a.default.phrase("Wifi",null,"a section title for Wifi")}),e},t.prototype.openHouseManualSheet=function(){var e=this.props,t=e.confirmationCode,n=e.houseManual,o=e.onPressSheetLinkRow;(0,d.logInfoSectionEvent)("House Manual",this.props.confirmationCode,E.HOME_CARD,t),o({body:n,title:a.default.phrase("House Manual",null,"a title for the House manual sheet")})},t.prototype.alterationShape=function(){var e=this,t=(0,f.getAlterationShape)(this.props);return null!=t&&(t.onPress=function(){return e.changeReservation(e.props)}),t},t.prototype.render=function(){var e=this,t=this.props,n=t.canStartTripSupportThread,o=t.checkInGuideStatus,s=t.endsAt,a=t.guests,i=t.helpThreadId,r=t.location,l=t.onPressActionEvent,u=t.onPressHostRow,d=t.onPressMapRow,b=t.onPressProductRow,P=t.onPressReviewRow,w=t.onPressCheckinGuide,R=t.picture,m=t.pictureUrls,C=t.primaryHost,v=t.product,y=t.name,S=t.review,A=t.startsAt,H=t.timezone,I=o===E.CHECKIN_GUIDE_STATUS_PUBLISHED&&!(0,p.hasCheckInInformationExpired)(s,H)&&g.default.launch("react_native_checkin_guide");return babelHelpers.jsx(D.default,{actions:this.getActions(),alteration:this.alterationShape(),checkInInstructions:this.getCheckInInstructions(),guests:a,host:C,image:R,location:r,links:this.getLinkRows(),onPressAirbnbHelpRow:function(){return l("Help with Thread",function(){(0,h.navigateToTripSupportFlow)(i)})},onPressAlterationRow:function(){return(0,f.onPressAlterationRow)(e.props)},onPressMapRow:d,onPressHostRow:u,onPressProductRow:b,onPressReviewRow:function(){return P(S.id,!1,C.firstName,!0)},pictureUrls:m,onPressCheckinGuide:function(){return w(v.id)},showCheckInGuide:I,product:v,range:this.getRange(),sections:this.getSections(),showAirbnbHelpRow:!!i&&n,showReviewRow:(0,p.canReview)(S),subtitle:this.getSubtitle(),suptitle:(0,c.smartRangeFormat)(A,s,H,{showDayOfWeek:!0}),title:y})},t}(l.PureComponent);q.contextTypes={theme:r.default.string},q.propTypes={cancellationPolicyCategory:r.default.string,cancellationPolicyShort:r.default.string,canStartTripSupportThread:r.default.bool,checkInInformation:r.default.arrayOf(m.default).isRequired,checkInGuideStatus:r.default.number,city:r.default.string.isRequired,confirmationCode:r.default.string,guests:r.default.arrayOf(T.default),endsAt:w.default.isRequired,groupThreadId:r.default.number,hasPaidAmenities:r.default.bool,hasPaidAmenityOrders:r.default.bool,helpThreadId:r.default.number,houseManual:r.default.string,isAltering:r.default.bool,isAppleWalletLoading:r.default.bool,isCanceling:r.default.bool,isRetracting:r.default.bool,isSharedItinerary:r.default.bool,location:v.default,name:r.default.string,nights:r.default.number.isRequired,numberOfGuests:r.default.number,openHouseManual:r.default.bool,passbookPassSerialNumber:r.default.string,passbookPassTypeIdentifier:r.default.string,passbookPassUrl:r.default.string,picture:r.default.string,pictureUrls:r.default.array,primaryHost:T.default,product:S.default,propertyType:r.default.string,onCardScreenImpression:r.default.func,onCancelReservationUnavailable:r.default.func,onCancelReservationError:r.default.func,onChangeReservationUnavailable:r.default.func,onCompleteCancelReservation:r.default.func,onCompleteChangeReservation:r.default.func,onPressActionEvent:r.default.func,onPressAddToAppleWallet:r.default.func,onPressCallHost:r.default.func,onPressCancellationPolicyRow:r.default.func,onPressCancelRequestRow:r.default.func,onPressCheckinGuide:r.default.func,onPressContact:r.default.func,onPressDirections:r.default.func,onPressHostRow:r.default.func,onPressMapRow:r.default.func,onPressProductRow:r.default.func,onPressReceiptRow:r.default.func,onPressReviewRow:r.default.func,onPressSheetLinkRow:r.default.func,review:H.default,roomType:r.default.string,status:r.default.string,startsAt:w.default.isRequired,totalPriceFormatted:r.default.string.isRequired,showActions:r.default.bool,threadId:r.default.number,timezone:r.default.string.isRequired,wirelessInfo:M.default},q.defaultProps={isAltering:!1,isAppleWalletLoading:!1,isCanceling:!1,isRetracting:!1,isSharedItinerary:!1,numberOfGuests:1,openHouseManual:!1,checkInGuideStatus:E.CHECKIN_GUIDE_STATUS_NOT_PUBLISHED,onCardScreenImpression:function(){},onCompleteCancelReservation:function(){},onCompleteChangeReservation:function(){},onPressActionEvent:function(){},onPressAddToAppleWallet:function(){},onPressCallHost:function(){},onPressCancelRequestRow:function(){},onPressCancellationPolicyRow:function(){},onPressCheckinGuide:function(){},onPressDirections:function(){},onPressContact:function(){},onPressHostRow:function(){},onPressMapRow:function(){},onPressProductRow:function(){},onPressReceiptRow:function(){},onPressReviewRow:function(){},onPressSheetLinkRow:function(){},showActions:!0},o.default=q},2012);