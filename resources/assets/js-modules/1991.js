__d(function(e,t,o,i){Object.defineProperty(i,"__esModule",{value:!0});var a=t(377),r=babelHelpers.interopRequireDefault(a),n=t(412),l=babelHelpers.interopRequireDefault(n),s=t(271),d=(babelHelpers.interopRequireDefault(s),t(44)),c=t(1023),p=t(790),u=t(815),m=babelHelpers.interopRequireDefault(u),b=t(1409),f=babelHelpers.interopRequireDefault(b),h=t(899),y=babelHelpers.interopRequireDefault(h),w=t(1393),g=t(1919),C=babelHelpers.interopRequireWildcard(g),S=t(1938),T=t(1930),D=t(1957),I=t(1818),x=t(1936),E=t(1992),v=babelHelpers.interopRequireDefault(E),R=t(1953),H=babelHelpers.interopRequireDefault(R),_=t(1937),A=t(1963),N=function(e){function t(o,i){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this,o,i));a.renderRow=a.renderRow.bind(a),a.onMomentumScrollEnd=a.onMomentumScrollEnd.bind(a);var r=new d.ListView.DataSource({rowHasChanged:function(e,t){return e!==t}});return a.state={dataSource:a.getDataSource(r,o.recommendations),scrollX:new d.Animated.Value(0),prevX:null},a}return babelHelpers.inherits(t,e),t.prototype.componentDidMount=function(){(0,_.shouldFetch)(this.props.lastSyncedAt)&&this.props.fetchRecommendationCards()},t.prototype.componentWillReceiveProps=function(e){this.props.recommendations!==e.recommendations&&this.setState({dataSource:this.getDataSource(this.state.dataSource,e.recommendations)}),this.props.isLoading&&!e.isLoading&&e.recommendations.size>0&&d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut)},t.prototype.getDataSource=function(e,t){return e.cloneWithRows(t)},t.prototype.onMomentumScrollEnd=function(e){var t=this.props,o=t.confirmationCode,i=t.recommendations,a=t.startsAt,r=t.endsAt,n=e.nativeEvent.contentOffset.x,l=null!=this.prevX&&n<this.prevX;this.prevX=n,(0,A.logSwipeRecommendationEvent)(o,i.length,l,a.format(),r.format())},t.prototype.renderRow=function(e){var t=this;if(!e)return null;var o=c.ThemedStyleSheet.theme.color,i=void 0;switch(e.mediaType){case"icon":i=babelHelpers.jsx(d.View,{style:O.media},void 0,babelHelpers.jsx(m.default,{color:o.white,size:32,name:e.icon}));break;case"picture":default:i=babelHelpers.jsx(f.default,{source:e.picture,style:O.picture})}return babelHelpers.jsx(d.TouchableOpacity,{onPress:function(){return t.onPressRecommendation(e)}},void 0,babelHelpers.jsx(d.View,{style:O.miniCard},void 0,babelHelpers.jsx(d.View,{style:O.pictureContainer},void 0,i),babelHelpers.jsx(d.View,{style:O.descriptionContainer},void 0,babelHelpers.jsx(d.Text,{style:O.description},void 0,(0,w.truncate)(e.title,30)),!!e.subtitle&&babelHelpers.jsx(d.View,{style:O.subtitleContainer},void 0,[I.EXPERIENCE_ITEM,I.IMMERSION_ITEM].includes(e.type)&&!!e.currency&&null!==e.price&&babelHelpers.jsx(d.Text,{style:O.subtitleBold},void 0,r.default.priceString(e.price,e.currency)," \xb7"),babelHelpers.jsx(d.Text,{style:O.subtitle},void 0,e.subtitle)))))},t.prototype.onPressRecommendation=function(e){var t=this.props,o=t.confirmationCode,i=t.endsAt,a=t.startsAt,r=e.type;(0,A.logRecommendationEvent)(e.id,e.type,this.props.confirmationCode),r===I.EXPERIENCE_ITEM?C.navigateToImmersionPDP(e.id):r===I.IMMERSION_ITEM?C.navigateToImmersionPDP(e.id,{searchStartDate:a.startOf("day").format(),searchEndDate:i.endOf("day").format()}):r===I.PLACE_ITEM&&C.navigateToGuidebookPlacePDP(e.id,{itineraryMinDate:a.startOf("day").format(),itineraryMaxDate:i.endOf("day").format(),itineraryTimeSelectOnly:i.diff(a,"days")<=1,primaryPhoto:e.picture,title:e.title,tripScheduleConfirmationCode:o})},t.prototype.getTitle=function(){var e=this.props,t=e.endsAt,o=e.startsAt;return t.diff(o,"days")>1?babelHelpers.jsx(y.default,{context:"a title (daterange) with a list of recommendation cards",default:"%{bold_start}Suggestions for %{dayNameStart} to %{dayNameEnd}%{bold_end} (%{dateStart} - %{dateEnd})",bold:babelHelpers.jsx(d.Text,{style:O.titleBold}),dayNameStart:(0,S.formatDay)(o),dayNameEnd:(0,S.formatDay)(t),dateStart:(0,S.formatDate)(o,null,{short:!0}),dateEnd:(0,S.formatDate)(t,null,{short:!0})}):babelHelpers.jsx(y.default,{context:"a title with a list of recommendation cards",default:"%{bold_start}Suggestions for %{dayName}%{bold_end} (%{date})",bold:babelHelpers.jsx(d.Text,{style:O.titleBold}),dayName:(0,S.formatDay)(o),date:(0,S.formatDate)(o,null,{short:!0})})},t.prototype.render=function(){var e=this.props,t=e.isLoading,o=e.recommendations;return babelHelpers.jsx(d.Animated.View,{style:[O.container,D.IS_TABLET&&O.tabletContainer,(t||0===o.length)&&{height:0}]},void 0,babelHelpers.jsx(d.View,{style:[O.shadow,O.shadowTop]}),babelHelpers.jsx(d.View,{style:[O.shadow,O.shadowBottom]}),babelHelpers.jsx(H.default,{type:H.default.TYPE_DOTTED,color:"#C9C9C9"}),babelHelpers.jsx(d.View,{style:O.contentContainer},void 0,babelHelpers.jsx(d.View,{style:O.titleContainer},void 0,babelHelpers.jsx(d.Text,{style:O.title},void 0,this.getTitle())),babelHelpers.jsx(d.ListView,{automaticallyAdjustContentInsets:!1,contentContainerStyle:O.listViewContentContainer,dataSource:this.state.dataSource,directionalLockEnabled:!0,enableEmptySections:!0,horizontal:!0,onMomentumScrollEnd:this.onMomentumScrollEnd,onScroll:d.Animated.event([{nativeEvent:{contentOffset:{x:this.state.scrollX}}}]),renderRow:this.renderRow,scrollsToTop:!1,showsHorizontalScrollIndicator:!1,snapToAlignment:"start",style:[O.listView,D.IS_TABLET&&O.listViewTablet]}),babelHelpers.jsx(d.Animated.View,{style:[O.listViewShadowContainer,{opacity:this.state.scrollX.interpolate({inputRange:[0,3*c.bp],outputRange:[0,1],extrapolate:"clamp"})}]})))},t}(s.Component);N.propTypes={confirmationCode:l.default.string.isRequired,endsAt:l.default.object.isRequired,isLoading:l.default.bool,lastSyncedAt:l.default.number,startsAt:l.default.object.isRequired,recommendations:l.default.arrayOf(v.default),fetchRecommendationCards:l.default.func.isRequired},N.defaultProps={isLoading:!1,lastSyncedAt:null,recommendations:[]};var O=c.ThemedStyleSheet.create(function(e){var t=e.color,o=e.font,i=e.size;return{container:{backgroundColor:"#FCFCFC",flexDirection:"row",overflow:"hidden"},tabletContainer:{left:-D.SUGGESTION_ROW_TABLET_PADDING,width:D.WINDOW_WIDTH,paddingLeft:D.SUGGESTION_ROW_TABLET_PADDING},contentContainer:{paddingVertical:i.vertical.large,flex:1},description:o.smallPlus,descriptionContainer:{marginTop:1.5*i.bp},listView:{left:-D.LISTING_VIEW_PADDING,width:D.WINDOW_WIDTH,zIndex:1,overflow:"hidden"},listViewTablet:{left:-D.SUGGESTION_ROW_TABLET_PADDING-D.LISTING_VIEW_PADDING,paddingLeft:D.SUGGESTION_ROW_TABLET_PADDING+D.LISTING_VIEW_PADDING,width:D.WINDOW_WIDTH},listViewContentContainer:{paddingLeft:D.LISTING_VIEW_PADDING},listViewShadowContainer:{position:"absolute",left:3*-c.bp,width:3,top:12*c.bp,bottom:i.vertical.large,backgroundColor:"#FCFCFC",opacity:1,shadowColor:"#FCFCFC",shadowOffset:{width:0,height:0},shadowRadius:10,shadowOpacity:1},pictureContainer:{width:120,height:120},picture:{flex:1},subtitleContainer:{flexDirection:"row",flexWrap:"wrap",alignItems:"flex-start",marginTop:i.vertical.micro/2,paddingRight:i.horizontal.micro/2},subtitle:o.small,subtitleBold:babelHelpers.extends({},o.smallBold,{marginRight:i.horizontal.micro}),miniCard:{marginRight:i.horizontal.tiny,width:120},titleContainer:{marginBottom:i.vertical.medium,marginRight:i.horizontal.medium},title:o.large,titleBold:o.largePlus,inline:{alignItems:"flex-start",flexDirection:"row",flexWrap:"wrap"},media:{alignItems:"center",backgroundColor:t.core.babu,justifyContent:"center",height:120,width:120},loaderContainer:{alignSelf:"flex-start"},shadow:{backgroundColor:t.white,left:0,right:0,height:2,position:"absolute",shadowOffset:{width:0,height:1},shadowColor:"#000",shadowOpacity:.2,shadowRadius:2,zIndex:1},shadowTop:{top:-2},shadowBottom:{bottom:-2,shadowOffset:{width:0,height:-1}}}});i.default=(0,p.connect)(function(e,t){return(0,x.recommendationsContainerSelector)(e,t)},function(e,t){return{fetchRecommendationCards:function(){return e((0,T.fetchRecommendationCards)(t.confirmationCode,t.startsAt,t.endsAt,t.id))}}})(N)},1991);