__d(function(t,e,n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=e(44),o=e(556),a=babelHelpers.interopRequireDefault(o),s=e(1455),c=function(){function t(){babelHelpers.classCallCheck(this,t),this.reset()}return t.prototype.reset=function(){this.navigationStack=[],this.registeredScreens=new Map},t.prototype.registerScreen=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.logDuration;this.registeredScreens.set(t,e)},t.prototype.getScreen=function(t){return this.registeredScreens.get(t)},t.prototype.getPreviousScreen=function(){if(this.hasPreviousScreen())return this.navigationStack[this.navigationStack.length-1]},t.prototype.hasPreviousScreen=function(){return this.navigationStack.length>0},t.prototype.isRegisteredScreen=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&t.id&&this.registeredScreens.has(t.id)},t.prototype.logDuration=function(t,e){var n=Date.now();this.getScreen(t.id)({close_reason:e,page:t.id,start_timestamp:Math.floor(t.start/1e3),end_timestamp:Math.floor(n/1e3),duration:Math.floor((n-t.start)/1e3)},t.props)},t.prototype.push=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPreviousScreen();this.isRegisteredScreen(n)&&this.logDuration(n,s.ACTIONS.NAVIGATED_AWAY),this.navigationStack.push({id:t,props:e,start:Date.now()})},t.prototype.pop=function(t){var e=this.navigationStack.pop();this.isRegisteredScreen(e)&&e.id===t?this.logDuration(e,s.ACTIONS.NAVIGATED_AWAY):e&&e.id!==t&&(this.navigationStack=[]),this.setActiveScreenStart()},t.prototype.setActiveScreenStart=function(){var t=this.getPreviousScreen();t&&(t.start=Date.now())},t.prototype.onChangeAppState=function(t){var e="inactive"===t&&"ios"===r.Platform.OS,n="background"===t&&"android"===r.Platform.OS;"active"===t?this.handleAppStateActive():(n||e)&&this.handleAppStateInactive()},t.prototype.handleAppStateActive=function(){this.setActiveScreenStart()},t.prototype.handleAppStateInactive=function(){var t=this.getPreviousScreen();this.isRegisteredScreen(t)&&this.logDuration(t,s.ACTIONS.INACTIVE)},t}(),p=new c;a.default.on("ScreenDidMount",function(t,e){return p.push(t,e)}),a.default.on("ScreenDidUnMount",function(t){return p.pop(t)}),r.AppState.addEventListener("change",function(t){return p.onChangeAppState(t)}),i.default=p},1454);