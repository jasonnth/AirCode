__d(function(e,t,r,a){Object.defineProperty(a,"__esModule",{value:!0});var l=t(271),i=babelHelpers.interopRequireDefault(l),o=t(834),n=t(790),p=t(654),s=t(377),d=babelHelpers.interopRequireDefault(s),u=t(379),c=babelHelpers.interopRequireDefault(u),b=t(44),T=t(787),f=babelHelpers.interopRequireDefault(T),h=t(773),v=babelHelpers.interopRequireDefault(h),m=t(410),y=babelHelpers.interopRequireDefault(m),g=t(1032),R=babelHelpers.interopRequireDefault(g),H=t(839),q=babelHelpers.interopRequireDefault(H),P=t(1578),x=t(1573),C=babelHelpers.interopRequireWildcard(x),S=t(1569),_=babelHelpers.interopRequireWildcard(S),A=t(1740),D=babelHelpers.interopRequireDefault(A),N=t(1746),j=babelHelpers.interopRequireDefault(N),I=t(1747),w=babelHelpers.interopRequireDefault(I),B=t(376),E=babelHelpers.interopRequireDefault(B),M=t(1730),W=function(e,t){return{additionalTravelers:(0,P.additionalTravelersSelector)(e),tripTemplate:(0,P.rootSelector)(e).get("tripTemplatesById").get(t.tripTemplateId),scheduledTripTemplate:(0,P.rootSelector)(e).get("bookingData").scheduledTripTemplate,tripPrice:(0,P.tripPriceSelector)(e)}},k=function(e){return(0,p.bindActionCreators)({updateAdditionalTraveler:C.updateAdditionalTraveler,addAdditionalTraveler:C.addAdditionalTraveler,removeAdditionalTraveler:C.removeAdditionalTraveler,loadTripPrice:C.loadTripPrice},e)},L={additionalTravelers:o.Types.array.isRequired,scheduledTripTemplate:o.Types.object.isRequired,tripTemplate:o.Types.object,tripTemplateId:o.Types.number.isRequired,tripPrice:o.Types.object,updateAdditionalTraveler:o.Types.func.isRequired,addAdditionalTraveler:o.Types.func.isRequired,removeAdditionalTraveler:o.Types.func.isRequired,loadTripPrice:o.Types.func.isRequired},O=function(e){function t(r){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this,r));return a.showNextScreen=a.showNextScreen.bind(a),a}return babelHelpers.inherits(t,e),t.prototype.componentDidMount=function(){this.loadTripPrice(this.props)},t.prototype.componentWillReceiveProps=function(e){this.props.additionalTravelers.length!==e.additionalTravelers.length&&this.loadTripPrice(e)},t.prototype.onTravelerChange=function(e,t){this.props.updateAdditionalTraveler(e,t)},t.prototype.onTravelerCreate=function(e){this.props.addAdditionalTraveler(e)},t.prototype.onTravelerRemove=function(e){this.props.removeAdditionalTraveler(e)},t.prototype.loadTripPrice=function(e){this.props.loadTripPrice({guest_count:e.additionalTravelers.length+1,scheduled_template_id:e.scheduledTripTemplate.id,template_id:e.tripTemplateId})},t.prototype.basePricePerPersonString=function(){if(!this.props.tripPrice)return"";var e=this.props.tripPrice,t=e.base_price_per_person,r=e.currency.currency;return d.default.priceString(t,r)},t.prototype.showNextScreen=function(){var e=this.props,t=e.tripTemplate,r=e.tripTemplateId;(0,M.isCuba)(t)?y.default.push(_.CUBA_ATTESTATION_FLOW,{tripTemplateId:r}):y.default.push(_.TRAVEL_REQUIREMENTS,{showBookingFooter:!0,templateId:r,prevStep:"additional_travelers"})},t.prototype.render=function(){var e=this,t=this.props,r=t.additionalTravelers,a=t.scheduledTripTemplate,l=t.tripTemplateId,i=a.remaining_capacity,o=r.length+1<i;return babelHelpers.jsx(b.View,{style:[b.StyleSheet.absoluteFill,F.mainContainer]},void 0,babelHelpers.jsx(f.default,{},void 0,babelHelpers.jsx(v.default,{title:c.default.phrase("Who\u2019s coming?",null,"title for additional guests screen")}),E.default.user()&&babelHelpers.jsx(j.default,{}),r.map(function(t,a){return babelHelpers.jsx(D.default,{otherTravelers:r.slice(0,a).concat(r.slice(a+1)),firstName:t.firstName,lastName:t.lastName,phone:t.phone,email:t.email,travelerCount:a+1,onChange:function(t){return e.onTravelerChange(t,a)},onRemove:function(){return e.onTravelerRemove(a)}},a+"_"+t.firstName+"_"+t.lastName)}),!o&&babelHelpers.jsx(R.default,{title:c.default.phrase("Only 1 spot left.",null,"Message title for when a trip has only 1 spot and cannot add co-travellers"),subtitle:c.default.phrase("There\u2019s only room for one person. If you want to add more guests, choose another date.",null,"Message body for when a trip only has 1 spot left and cannot add co-travellers")}),o&&babelHelpers.jsx(D.default,{newTraveler:!0,priceString:this.basePricePerPersonString(),travelerCount:r.length+1,otherTravelers:r,onChange:function(t){return e.onTravelerCreate(t)}})),babelHelpers.jsx(b.View,{style:F.buttonContainer},void 0,babelHelpers.jsx(w.default,{buttonText:c.default.phrase("Next",null,"Next button text"),buttonTextLike:!0,onButtonPress:this.showNextScreen,scheduledTripTemplate:a,tripTemplateId:l})))},t}(i.default.Component);O.propTypes=L;var F=b.StyleSheet.create({mainContainer:{paddingBottom:w.default.contentInset.bottom},buttonContainer:babelHelpers.extends({position:"absolute",bottom:-1,left:-1,right:-1},q.default.footer,{paddingLeft:1,paddingRight:1,paddingBottom:1})});a.default=(0,n.connect)(W,k)(O)},1739);