__d(function(e,t,o,a){Object.defineProperty(a,"__esModule",{value:!0});var i=t(271),n=babelHelpers.interopRequireDefault(i),s=t(44),r=t(2082),d=babelHelpers.interopRequireDefault(r),l=t(562),p=babelHelpers.interopRequireDefault(l),u={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm",time:"HH:mm"},c=["portrait","portrait-upside-down","landscape","landscape-left","landscape-right"],f=function(e){function t(o){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this,o));return a.state={date:a.getDate(),modalVisible:!1,animatedHeight:new s.Animated.Value(0)},a.datePicked=a.datePicked.bind(a),a.onPressDate=a.onPressDate.bind(a),a.onPressCancel=a.onPressCancel.bind(a),a.onPressConfirm=a.onPressConfirm.bind(a),a.onDatePicked=a.onDatePicked.bind(a),a.onTimePicked=a.onTimePicked.bind(a),a.onDatetimePicked=a.onDatetimePicked.bind(a),a.onDatetimeTimePicked=a.onDatetimeTimePicked.bind(a),a.setModalVisible=a.setModalVisible.bind(a),a}return babelHelpers.inherits(t,e),t.prototype.componentWillMount=function(){console.ignoredYellowBox=["Warning: Failed propType"]},t.prototype.componentWillReceiveProps=function(e){e.date!==this.props.date&&this.setState({date:this.getDate(e.date)})},t.prototype.setModalVisible=function(e){var t=this,o=this.props,a=o.height,i=o.duration;return e?(this.setState({modalVisible:e}),s.Animated.timing(this.state.animatedHeight,{toValue:a,duration:i}).start()):s.Animated.timing(this.state.animatedHeight,{toValue:0,duration:i}).start(function(){t.setState({modalVisible:e})})},t.prototype.onStartShouldSetResponder=function(e){return!0},t.prototype.onMoveShouldSetResponder=function(e){return!0},t.prototype.onPressCancel=function(){this.setModalVisible(!1),"function"==typeof this.props.onCloseModal&&this.props.onCloseModal()},t.prototype.onPressConfirm=function(){this.datePicked(),this.setModalVisible(!1),"function"==typeof this.props.onCloseModal&&this.props.onCloseModal()},t.prototype.getDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.date,t=this.props,o=t.mode,a=t.minDate,i=t.maxDate,n=t.format,s=void 0===n?u[o]:n;if(!e){var r=new Date;if(a){var d=this.getDate(a);if(r<d)return d}if(i){var l=this.getDate(i);if(r>l)return l}return r}return e instanceof Date?e:(0,p.default)(e,s).toDate()},t.prototype.getDateStr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.date,t=this.props,o=t.mode,a=t.format,i=void 0===a?u[o]:a;return e instanceof Date?(0,p.default)(e).format(i):(0,p.default)(this.getDate(e)).format(i)},t.prototype.datePicked=function(){"function"==typeof this.props.onDateChange&&this.props.onDateChange(this.getDateStr(this.state.date),this.state.date)},t.prototype.getTitleElement=function(){var e=this.props,t=e.date,o=e.placeholder,a=e.customStyles;return!t&&o?babelHelpers.jsx(s.Text,{style:[d.default.placeholderText,a.placeholderText]},void 0,o):babelHelpers.jsx(s.Text,{style:[d.default.dateText,a.dateText]},void 0,this.getDateStr())},t.prototype.onDatePicked=function(e){var t=e.action,o=e.year,a=e.month,i=e.day;t!==s.DatePickerAndroid.dismissedAction&&(this.setState({date:new Date(o,a,i)}),this.datePicked())},t.prototype.onTimePicked=function(e){var t=e.action,o=e.hour,a=e.minute;t!==s.DatePickerAndroid.dismissedAction&&(this.setState({date:(0,p.default)().hour(o).minute(a).toDate()}),this.datePicked())},t.prototype.onDatetimePicked=function(e){var t=e.action,o=e.year,a=e.month,i=e.day,n=this.props,r=n.mode,d=n.format,l=void 0===d?u[r]:d,c=n.is24Hour,f=void 0===c?!l.match(/h|a/):c;if(t!==s.DatePickerAndroid.dismissedAction){var h=(0,p.default)(this.state.date);s.TimePickerAndroid.open({hour:h.hour(),minute:h.minutes(),is24Hour:f}).then(this.onDatetimeTimePicked.bind(this,o,a,i))}},t.prototype.onDatetimeTimePicked=function(e,t,o,a){var i=a.action,n=a.hour,r=a.minute;i!==s.DatePickerAndroid.dismissedAction&&(this.setState({date:new Date(e,t,o,n,r)}),this.datePicked())},t.prototype.onPressDate=function(){if(this.props.disabled)return!0;if(this.setState({date:this.getDate()}),"ios"===s.Platform.OS)this.setModalVisible(!0);else{var e=this.props,t=e.mode,o=e.format,a=void 0===o?u[t]:o,i=e.minDate,n=e.maxDate,r=e.is24Hour,d=void 0===r?!a.match(/h|a/):r;if("date"===t)s.DatePickerAndroid.open({date:this.state.date,minDate:i&&this.getDate(i),maxDate:n&&this.getDate(n)}).then(this.onDatePicked);else if("time"===t){var l=(0,p.default)(this.state.date);s.TimePickerAndroid.open({hour:l.hour(),minute:l.minutes(),is24Hour:d}).then(this.onTimePicked)}else"datetime"===t&&s.DatePickerAndroid.open({date:this.state.date,minDate:i&&this.getDate(i),maxDate:n&&this.getDate(n)}).then(this.onDatetimePicked)}"function"==typeof this.props.onOpenModal&&this.props.onOpenModal()},t.prototype.render=function(){var e=this,t=this.props,o=t.mode,a=t.style,i=t.customStyles,n=t.disabled,r=t.showIcon,l=t.iconSource,p=t.minDate,u=t.maxDate,f=t.minuteInterval,h=t.timeZoneOffsetInMinutes,m=t.cancelBtnText,b=t.confirmBtnText,y=[d.default.dateInput,i.dateInput,n&&d.default.disabled,n&&i.disabled];return babelHelpers.jsx(s.TouchableHighlight,{style:[d.default.dateTouch,a],underlayColor:"transparent",onPress:this.onPressDate},void 0,babelHelpers.jsx(s.View,{style:[d.default.dateTouchBody,i.dateTouchBody]},void 0,babelHelpers.jsx(s.View,{style:y},void 0,this.getTitleElement()),r&&babelHelpers.jsx(s.Image,{style:[d.default.dateIcon,i.dateIcon],source:l}),"ios"===s.Platform.OS&&babelHelpers.jsx(s.Modal,{transparent:!0,animationType:"none",visible:this.state.modalVisible,supportedOrientations:c,onRequestClose:function(){e.setModalVisible(!1)}},void 0,babelHelpers.jsx(s.View,{style:{flex:1}},void 0,babelHelpers.jsx(s.TouchableHighlight,{style:d.default.datePickerMask,activeOpacity:1,underlayColor:"#00000077",onPress:this.onPressCancel},void 0,babelHelpers.jsx(s.TouchableHighlight,{underlayColor:"#fff",style:{flex:1}},void 0,babelHelpers.jsx(s.Animated.View,{style:[d.default.datePickerCon,{height:this.state.animatedHeight},i.datePickerCon]},void 0,babelHelpers.jsx(s.DatePickerIOS,{date:this.state.date,mode:o,minimumDate:p&&this.getDate(p),maximumDate:u&&this.getDate(u),onDateChange:function(t){return e.setState({date:t})},minuteInterval:f,timeZoneOffsetInMinutes:h,style:[d.default.datePicker,i.datePicker]}),babelHelpers.jsx(s.TouchableHighlight,{underlayColor:"transparent",onPress:this.onPressCancel,style:[d.default.btnText,d.default.btnCancel,i.btnCancel]},void 0,babelHelpers.jsx(s.Text,{style:[d.default.btnTextText,d.default.btnTextCancel,i.btnTextCancel]},void 0,m)),babelHelpers.jsx(s.TouchableHighlight,{underlayColor:"transparent",onPress:this.onPressConfirm,style:[d.default.btnText,d.default.btnConfirm,i.btnConfirm]},void 0,babelHelpers.jsx(s.Text,{style:[d.default.btnTextText,i.btnTextConfirm]},void 0,b)))))))))},t}(i.Component);f.defaultProps={mode:"date",date:"",height:259,duration:300,confirmBtnText:"\u786e\u5b9a",cancelBtnText:"\u53d6\u6d88",iconSource:t(2083),customStyles:{},showIcon:!0,disabled:!1,placeholder:"",modalOnResponderTerminationRequest:function(e){return!0}},f.propTypes={mode:n.default.PropTypes.oneOf(["date","datetime","time"]),date:n.default.PropTypes.oneOfType([n.default.PropTypes.string,n.default.PropTypes.instanceOf(Date)]),format:n.default.PropTypes.string,minDate:n.default.PropTypes.oneOfType([n.default.PropTypes.string,n.default.PropTypes.instanceOf(Date)]),maxDate:n.default.PropTypes.oneOfType([n.default.PropTypes.string,n.default.PropTypes.instanceOf(Date)]),height:n.default.PropTypes.number,duration:n.default.PropTypes.number,confirmBtnText:n.default.PropTypes.string,cancelBtnText:n.default.PropTypes.string,iconSource:n.default.PropTypes.oneOfType([n.default.PropTypes.number,n.default.PropTypes.object]),customStyles:n.default.PropTypes.object,showIcon:n.default.PropTypes.bool,disabled:n.default.PropTypes.bool,onDateChange:n.default.PropTypes.func,onOpenModal:n.default.PropTypes.func,onCloseModal:n.default.PropTypes.func,placeholder:n.default.PropTypes.string,modalOnResponderTerminationRequest:n.default.PropTypes.func,is24Hour:n.default.PropTypes.bool},a.default=f},2081);