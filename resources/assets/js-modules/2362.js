__d(function(e,t,s,o){"use strict";function i(e,t){return e===t||!!(e&&t&&e.uri&&t.uri)&&e.uri===t.uri}Object.defineProperty(o,"__esModule",{value:!0});var a=t(271),r=babelHelpers.interopRequireDefault(a),n=t(44),p=t(2363),l=babelHelpers.interopRequireDefault(p),h=!1,u=function(e){function t(s){babelHelpers.classCallCheck(this,t);var o=babelHelpers.possibleConstructorReturn(this,e.call(this,s));return o.state={width:0,height:0,imageLoaded:!1,pixels:void 0,keyAcumulator:1},o}return babelHelpers.inherits(t,e),t.enableDebug=function(){h=!0},t.prototype.componentWillMount=function(){this.props.pixels||this.getImageSize(this.props.source)},t.prototype.componentWillReceiveProps=function(e){i(this.props.source,e.source)||(this.setState({pixels:void 0,keyAcumulator:this.state.keyAcumulator+1}),this.getImageSize(e.source))},t.prototype.render=function(){var e=1,t=void 0,s=void 0,o=void 0;return this.props.pixels?(s=this.props.pixels.width,o=this.props.pixels.height):this.state.pixels&&(s=this.state.pixels.width,o=this.state.pixels.height),s&&o&&(t=s/o,this.state.width&&this.state.height&&(e=Math.max(s/this.state.width,o/this.state.height),e=Math.max(1,e))),r.default.createElement(l.default,{ref:"viewTransformer",key:"viewTransformer#"+this.state.keyAccumulator,enableTransform:this.props.enableTransform&&this.state.imageLoaded,enableScale:this.props.enableScale,enableTranslate:this.props.enableTranslate,enableResistance:!0,onTransformGestureReleased:this.props.onTransformGestureReleased,onViewTransformed:this.props.onViewTransformed,maxScale:e,contentAspectRatio:t,onLayout:this.onLayout.bind(this),style:this.props.style},r.default.createElement(n.Image,babelHelpers.extends({},this.props,{style:[this.props.style,{backgroundColor:"transparent"}],resizeMode:"contain",onLoadStart:this.onLoadStart.bind(this),onLoad:this.onLoad.bind(this),capInsets:{left:.1,top:.1,right:.1,bottom:.1}})))},t.prototype.onLoadStart=function(e){this.props.onLoadStart&&this.props.onLoadStart(e),this.setState({imageLoaded:!1})},t.prototype.onLoad=function(e){this.props.onLoad&&this.props.onLoad(e),this.setState({imageLoaded:!0})},t.prototype.onLayout=function(e){var t=e.nativeEvent.layout,s=t.width,o=t.height;this.state.width===s&&this.state.height===o||this.setState({width:s,height:o})},t.prototype.getImageSize=function(e){var t=this;e&&"function"==typeof n.Image.getSize&&e&&e.uri&&n.Image.getSize(e.uri,function(e,s){e&&s&&(t.state.pixels&&t.state.pixels.width===e&&t.state.pixels.height===s||t.setState({pixels:{width:e,height:s}}))},function(e){})},t.prototype.getViewTransformerInstance=function(){return this.refs.viewTransformer},t}(a.Component);u.propTypes={pixels:a.PropTypes.shape({width:a.PropTypes.number,height:a.PropTypes.number}),enableTransform:a.PropTypes.bool,enableScale:a.PropTypes.bool,enableTranslate:a.PropTypes.bool,onTransformGestureReleased:a.PropTypes.func,onViewTransformed:a.PropTypes.func},u.defaultProps={enableTransform:!0,enableScale:!0,enableTranslate:!0},o.default=u},2362);