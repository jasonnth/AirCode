__d(function(e,i,t,r){function n(e,i){switch(e){case 4:case 5:return f.default.phrase("Tell future travelers what you loved and anything else they should know about %{hostFirstName}\u2019s place.",{hostFirstName:i},"Title on private feedback screen for 4-5 star trips");default:return f.default.phrase("What should future travelers know about %{hostFirstName}\u2019s place?",{hostFirstName:i},"Title on private feedback screen for 1-3 star trips")}}function s(e){return e?f.default.phrase("Leave this public review in English. Other travelers can read an automatic translation if they need it.",null,'reviews.public_feedback.subtitle.guidance.mobile asking guest to write their public review of host in the same language they are using Airbnb in. DO NOT TRANSLATE "English" as English; translate it as THE LANGUAGE YOU TRANSLATE INTO, e.g. "Espa\xf1ol".'):""}Object.defineProperty(r,"__esModule",{value:!0});var a=i(412),l=babelHelpers.interopRequireDefault(a),o=i(271),u=(babelHelpers.interopRequireDefault(o),i(44)),p=i(790),c=i(654),b=i(759),h=babelHelpers.interopRequireDefault(b),d=i(379),f=babelHelpers.interopRequireDefault(d),v=i(2172),g=babelHelpers.interopRequireDefault(v),w=i(2175),R=i(2191),y=i(2178),m=i(1923),S=babelHelpers.interopRequireWildcard(m),T=i(2192),E=babelHelpers.interopRequireWildcard(T),H=i(2195),P=babelHelpers.interopRequireDefault(H),k={isSaving:l.default.bool.isRequired,recipient:R.RecipientShape.isRequired,review:R.ReviewShape.isRequired,changeReview:l.default.func.isRequired,submitReview:l.default.func.isRequired,saveError:l.default.any},q=function(e){function i(t){babelHelpers.classCallCheck(this,i);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,t));return r.state={isEditing:!1},r.onBlur=r.onBlur.bind(r),r.onChangeText=r.onChangeText.bind(r),r.onFocus=r.onFocus.bind(r),r.onPrimaryPress=r.onPrimaryPress.bind(r),r}return babelHelpers.inherits(i,e),i.prototype.componentWillReceiveProps=function(e){if(this.selfIsSaving){var i=this.props,t=i.isSaving,r=i.review;t&&!e.isSaving&&(this.selfIsSaving=!1,e.saveError||(0,y.logImpressionAndPushRoute)(S.THANK_YOU,r))}},i.prototype.onBlur=function(){(0,y.logClick)("public_feedback","blur",this.props.review),this.setState({isEditing:!1})},i.prototype.onChangeText=function(e){this.props.changeReview({publicFeedback:e})},i.prototype.onFocus=function(){(0,y.logClick)("public_feedback","focus",this.props.review),this.setState({isEditing:!0})},i.prototype.onPrimaryPress=function(){this.props.isSaving||(this.selfIsSaving=!0,this.props.submitReview())},i.prototype.render=function(){var e=this.props,i=e.isSaving,t=e.recipient,r=e.review,a=r.overallRating,l=r.publicFeedback,o=r.showLanguageGuidance,p=f.default.phrase("Write a public review",null,"Title on the public review screen in the review flow"),c=!!(l&&l.trim().length>0),b=c?f.default.phrase("Edit public review",null,"Button on populated public review screen"):f.default.phrase("Write a public review",null,"Button on empty public review screen"),h=this.state.isEditing?f.default.phrase("Done",null,"Button on public review screen while editing"):f.default.phrase("Finish",null,"Button on public review screen while not editing");return babelHelpers.jsx(u.View,{style:u.StyleSheet.absoluteFill},void 0,babelHelpers.jsx(g.default,{title:p,subtitle:n(a,t.firstName),guidance:s(o),placeholder:b,onBlur:this.onBlur,onChangeText:this.onChangeText,onFocus:this.onFocus,onPrimaryPress:this.onPrimaryPress,primaryButtonDisabled:!c,primaryButtonLabel:h,primaryButtonLoading:i,value:l}),babelHelpers.jsx(P.default,{onSaveTryAgainPress:this.onPrimaryPress}))},i}(o.Component);q.propTypes=k,r.default=(0,p.connect)(function(e){return(0,h.default)((0,w.rootSelector)(e),["isSaving","recipient","review","saveError"])},function(e){return(0,c.bindActionCreators)({changeReview:E.changeReview,submitReview:E.submitReview},e)})(q)},2201);