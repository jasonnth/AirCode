__d(function(e,t,n,r){function o(e){var t=(0,v.stateFromReservation)(e.reservation,e.isHost);return!(0,O.default)(t,(0,I.default)(e,Object.keys(t)))}function i(){return function(e,t){e(o((0,H.rootSelector)(t()))?l():{type:g.QUOTE_CLEARED})}}function u(){return{type:g.RESET_STATE}}function a(e){return{type:g.SET_IS_HOST,payload:{isHost:e}}}function c(e){return{type:g.CHANGE_CURRENCY,payload:e}}function s(e){return function(t,n){var r=(0,H.rootSelector)(n()),o=r.isHost,i=r.currency;t({type:g.FETCH_ALTERATION,promise:(0,D.getReservation)(e,o,i).then(function(n){var r=o?n.host_currency:n.guest_currency;return i!==r&&t(c(r)),r!==n.native_currency?(0,D.getReservation)(e,o,r):n}),meta:{toast:b.FETCH_FAILED_TOAST}})}}function l(){return function(e,t){var n,r=(0,H.rootSelector)(t()),o=r.reservation,i=r.numberOfGuests,u=r.startDate,a=r.endDate,c=r.listingId,s=r.isHost,l=r.currency,E={guests:i,check_in:u,check_out:a};l&&(E.currency=l),s&&c!==o.listing.id&&(E.listing_id=c),e({type:g.FETCH_QUOTE,promise:(0,D.getQuote)(o.id,E,s,l),meta:{toasts:(n={},babelHelpers.defineProperty(n,b.QUOTE_FAILED_TOAST,{failure:!0}),babelHelpers.defineProperty(n,b.QUOTE_PROBLEM_TOAST,{success:function(e){return null!=e.problem}}),n)}})}}function E(e){return function(t){t({type:g.CHANGE_NUMBER_OF_GUESTS,payload:{numberOfGuests:e}}),t(i())}}function T(e,t){return function(n){n({type:g.CHANGE_DATE_RANGE,payload:{startDate:e,endDate:t}}),null!=e&&null!=t&&n(i())}}function A(e){return function(t){t({type:g.CHANGE_LISTING,payload:{listingId:e}}),t(i())}}function f(e){return{type:g.CHANGE_PRICE,payload:{price:e}}}function _(){return function(e,t){var n=(0,H.rootSelector)(t()),r=n.isSaving,o=n.isHost,i=n.currency,u=n.reservation,a=n.quote,c=n.numberOfGuests,s=n.startDate,l=n.endDate,E=n.listingId,T=n.price;if(r)return null;var A={guests:c,check_in:s,check_out:l};return o&&E!==u.listing.id&&(A.listing_id=E),!o||null!=a&&a.base_price===T||(A.price=T),e({type:g.SUBMIT_ALTERATION,promise:(0,D.createAlteration)(u.id,A,o,i),meta:{toast:b.SUBMIT_ALTERATION_FAILED_TOAST,onStart:function(){return(0,m.logAction)(m.ACTIONS.CREATE,n)},onSuccess:function(){return L.default.push(h.REQUEST_SUCCESS)},onFailure:function(){return(0,m.logError)(m.REQUEST_TYPES.CREATE,n)}}})}}function S(){return function(e,t){var n=(0,H.rootSelector)(t()),r=n.isSaving,o=n.isHost,i=n.currency,u=n.reservation,a=n.reservationAlteration;r||e({type:g.CANCEL_ALTERATION,promise:(0,D.deleteAlteration)(a.id,o),meta:{toast:b.CANCEL_ALTERATION_FAILED_TOAST,onStart:function(){return(0,m.logAction)(m.ACTIONS.CANCEL,n)},onFailure:function(){return(0,m.logError)(m.REQUEST_TYPES.CANCEL,n)},onSuccess:function(){L.default.dismiss({resultCode:L.default.RESULT_OK}),(0,D.getReservation)(u.confirmationCode,o,i).catch(function(e){})}}})}}function p(){return function(e,t){var n=(0,H.rootSelector)(t()),r=n.isHost,o=n.reservationAlteration;o&&(L.default.pop(),e({type:g.ACCEPT_ALTERATION,promise:(0,D.updateAlterationStatus)(o.id,r,F.ACCEPT_ALTERATION_STATUS_CODE),meta:{toast:b.ACCEPT_ALTERATION_FAILED_TOAST,onStart:function(){return(0,m.logAction)(m.ACTIONS.ACCEPT,n)},onFailure:function(){return(0,m.logError)(m.REQUEST_TYPES.ACCEPT,n)},onSuccess:function(){return L.default.dismiss({resultCode:L.default.RESULT_OK})}}}))}}function d(){return function(e,t){var n=(0,H.rootSelector)(t()),r=n.isHost,o=n.reservationAlteration;o&&(L.default.pop(),e({type:g.DECLINE_ALTERATION,promise:(0,D.updateAlterationStatus)(o.id,r,F.DECLINE_ALTERATION_STATUS_CODE),meta:{toast:b.DECLINE_ALTERATION_FAILED_TOAST,onStart:function(){return(0,m.logAction)(m.ACTIONS.DECLINE,n)},onSuccess:function(){return L.default.dismiss({resultCode:L.default.RESULT_OK})},onFailure:function(){return(0,m.logError)(m.REQUEST_TYPES.DECLINE,n)}}}))}}Object.defineProperty(r,"__esModule",{value:!0}),r.resetState=u,r.setIsHost=a,r.changeCurrency=c,r.fetch=s,r.fetchQuote=l,r.changeNumberOfGuests=E,r.changeDateRange=T,r.changeListing=A,r.changePrice=f,r.submitAlteration=_,r.cancelAlteration=S,r.acceptAlteration=p,r.declineAlteration=d;var C=t(1548),O=babelHelpers.interopRequireDefault(C),R=t(759),I=babelHelpers.interopRequireDefault(R),N=t(418),y=(babelHelpers.interopRequireDefault(N),t(410)),L=babelHelpers.interopRequireDefault(y),g=t(1540),D=t(1541),v=t(1543),H=t(1549),b=t(1550),m=t(1551),U=t(1538),h=babelHelpers.interopRequireWildcard(U),F=t(1552)},1547);