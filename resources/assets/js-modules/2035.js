__d(function(e,r,t,a){function o(e,r,t){return{type:M.ADD_VIEW,payload:{viewId:e,url:r,mapRegion:t,status:K.LOADED}}}function n(){return{type:M.CLOSE_ERROR_MESSAGE_CLICKED}}function i(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.currentGuidebook,a=r.guidebook,n=void 0===a?null:a,i=r.isFavsView,u=void 0!==i&&i,l=r.openScreen,c=void 0===l||l,d=r.persistMapRegionOfViewId,E=r.openMap,p=void 0!==E&&E,s=r.updateUrlOptimistically,_=void 0===s||s,f=r.viewId,T=void 0===f?(0,x.default)():f;return function(r,a){var i,l=e,E=void 0,s=(0,Q.guidebookSelector)(a()),f=$.default.get(e),y=f.handler,A=y===z.SUB_CATEGORY?H.SUB_CATEGORY:H.CITY;if(d&&s.views[d].mapRegion&&(E=s.views[d].mapRegion,l=new B.default(l).updateQuery((0,V.default)(E)).stringify()),(0,Q.isCacheKeyFullyLoaded)(a(),{cacheKey:l}))return void(c?(r(o(T,l,E)),F.default.push(A,{viewId:T,isFavsView:u})):p?F.default.push(H.MAP,{viewId:T}):r({type:M.GUIDEBOOK_REOPENED,payload:{viewId:T,url:l},meta:{toasts:babelHelpers.defineProperty({},j.FETCH_FAILED_TOAST,!1)}}));var C=_?{url:l}:{},I=s.views[T]&&s.views[T].url;c&&F.default.push(A,{viewId:T,isFavsView:u});var b=n||(0,J.default)(s,l);t&&b&&!b.current_market_guidebook&&(b=babelHelpers.extends({},b,{current_market_guidebook:t.current_market_guidebook||t}));var v=U.getGuidebook(l),D=U.getGuidebookPlaces(l);r({type:M.FETCH,payload:babelHelpers.extends({viewId:T,nextUrl:l,guidebook:b},C),promise:Promise.all([v,D]).then(function(e){var r=babelHelpers.slicedToArray(e,2),t=r[0],o=r[1];return t?(p&&F.default.push(H.MAP,{viewId:T}),{viewId:T,url:l,guidebook:t,guidebookPlaces:o,mapRegion:E||void 0}):(0,Q.isCacheKeyFullyLoaded)(a(),{cacheKey:I})?Promise.reject({viewLoadError:!0,viewId:T,url:I}):Promise.reject({viewLoadError:!0,viewId:T})}),meta:{toasts:(i={},babelHelpers.defineProperty(i,j.FETCHED_EMPTY_GUIDEBOOK,{failure:function(e){return e.viewLoadError}}),babelHelpers.defineProperty(i,j.FETCH_FAILED_TOAST,{failure:function(e){return!e.viewLoadError}}),i),onFailure:function(e){return(0,G.default)(e,{cacheKey:I})}}})}}function u(e,r){return function(t,a){var o=(0,ae.getPlaceCacheKey)(e,r);return(0,Q.isCacheKeyFullyLoaded)(a(),{cacheKey:o})?Promise.resolve():t({type:M.FETCH_PLACE,promise:U.getGuidebookPlace(e,r).then(function(r){return{cacheKey:o,placeId:e,response:r}}),meta:{toast:j.FETCH_FAILED_TOAST,onFailure:function(e){return(0,G.default)(e,{cacheKey:o})}}})}}function l(e,r){var t=(0,ae.getMeetupCacheKey)(e,r),a=r?U.getPlaceMeetupByMeetupId(r):U.getPlaceMeetup(e);return{type:M.FETCH_MEETUP,promise:a.then(function(r){return{response:r,placeId:e}}),meta:{toast:j.FETCH_FAILED_TOAST,onFailure:function(e){return(0,G.default)(e,{cacheKey:t})}}}}function c(e,r){var t=(0,ae.getNearbyCacheKey)(e,r);return{type:M.FETCH_GUIDEBOOK_NEARBY,promise:U.getNearbyNowGuidebookPlaces(e,r).then(function(e){return{cacheKey:t,response:e}}),meta:{toast:j.FETCH_FAILED_TOAST,onFailure:function(e){return(0,G.default)(e,{cacheKey:t})}}}}function d(e){var r=(0,ae.getListingGuidebookCacheKey)(e);return{type:M.FETCH_LISTING_GUIDEBOOK,promise:U.getListingGuidebookPlaces(e).then(function(e){return{cacheKey:r,response:e}}),meta:{toast:j.FETCH_FAILED_TOAST}}}function E(){var e=te.default.user();return e?{type:M.FETCH_RESERVATIONS,promise:U.getReservations(e.id).then(function(e){return{reservations:e}})}:null}function p(e,r,t){var a;return{type:M.JOIN_PLACE_MEETUP,payload:{placeId:e},promise:U.joinPlaceMeetup(r).then(function(r){var t=r.place_reservation;if(t&&t.trip_schedule_confirmation_code){var a=t.id;return{placeId:e,placeReservationId:a}}throw new Error("joinPlaceMeetup failed")}),meta:{toasts:(a={},babelHelpers.defineProperty(a,j.CREATE_PLACE_MEETUP_FAILED_TOAST,{failure:!0}),babelHelpers.defineProperty(a,j.CREATE_PLACE_MEETUP_SUCCEEDED_TOAST,{success:!0}),a)}}}function s(e,r,t){var a;return{type:M.UNJOIN_PLACE_MEETUP,payload:{placeId:e,placeReservationId:r},promise:U.unjoinPlaceMeetup(r).then(function(t){var a=t.place_reservation;if(a&&a.trip_schedule_confirmation_code)return{placeId:e,placeReservationId:r};throw new Error("unjoinPlaceMeetup failed")}),meta:{toasts:(a={},babelHelpers.defineProperty(a,j.UNJOIN_PLACE_MEETUP_SUCCEEDED_TOAST,{success:!0}),babelHelpers.defineProperty(a,j.UNJOIN_PLACE_MEETUP_FAILED_TOAST,{failure:!0}),a)}}}function _(e){return function(r,t){var a,o=(0,ae.getInsiderCacheKey)(e);if(!(0,Q.isCacheKeyFullyLoaded)(t(),{cacheKey:o})){var n=U.getInsiderGuidebook(e),i=U.getInsiderPlaces(e);r({type:M.FETCH_GUIDEBOOK_INSIDER,promise:Promise.all([n,i]).then(function(r){var t=babelHelpers.slicedToArray(r,2),a=t[0],n=t[1];if(!a)return Promise.reject({emptyGuidebook:!0});var i=a.guidebook,u=n.guidebook_places;return{cacheKey:o,guidebookId:e,guidebook:i,places:u}}),meta:{toasts:(a={},babelHelpers.defineProperty(a,j.FETCHED_EMPTY_GUIDEBOOK,{failure:function(e){return e.emptyGuidebook}}),babelHelpers.defineProperty(a,j.FETCH_FAILED_TOAST,{failure:function(e){return!e.emptyGuidebook}}),a)}})}}}function f(e,r,t){return function(a,o){var n=(0,ae.getRecommendationsCacheKey)(r,t);return(0,Q.isCacheKeyFullyLoaded)(o(),{cacheKey:n})?Promise.resolve():a({type:M.FETCH_RECOMMENDATIONS,promise:U.getRecommendations(e).then(function(e){return{cacheKey:n,placeId:r,response:e}}),meta:{toast:j.FETCH_FAILED_TOAST,onFailure:function(e){return(0,G.default)(e,{cacheKey:n})}}})}}function T(e){return function(r,t){var a=(0,ae.getDetourCacheKey)(e);return(0,Q.isCacheKeyFullyLoaded)(t(),{cacheKey:a})?Promise.resolve():r({type:M.FETCH_DETOURDATA,promise:U.getDetourData(e).then(function(r){var t=r.detour;return{cacheKey:a,detourId:e,detour:t}}),meta:{toast:j.FETCH_FAILED_TOAST,onFailure:function(e){return(0,G.default)(e,{cacheKey:a})}}})}}function y(e){return function(r,t){var a=t(),o=(0,Q.viewSelector)(a,{viewId:e}),n=(0,Q.cachedGuidebookSelector)(a,{viewId:e});return i(o.nextUrl,{guidebook:n,viewId:e,openScreen:!1,updateUrlOptimistically:!1})(r,t)}}function A(e,r){return{type:M.MAP_REGION_CHANGED,payload:{viewId:e,mapRegion:r}}}function C(e){return{type:M.MAP_MARKER_SELECTED,payload:{placeId:e}}}function I(e){return{type:M.MAP_MARKER_DESELECTED,payload:{placeId:e}}}function b(e){return function(r,t){var a=t().guidebook.views[e],o=a.url,n=a.mapRegion;return i(new B.default(o).updateQuery((0,V.default)(n)).stringify(),{viewId:e,openScreen:!1,updateUrlOptimistically:!1})(r,t)}}function v(e,r){return function(e){e(C(r.primary_place.id))}}function D(e,r){return function(t){t(A(e,babelHelpers.extends({},r.coordinate,{latitudeDelta:.03,longitudeDelta:.03}))),t(C(r.primary_place.id)),F.default.push(H.MAP,{viewId:e})}}function O(e,r){var t=r.primary_place.id,a=r.place_bookmark_id_for_current_user;return a?{type:M.REMOVE_PLACE_BOOKMARK,payload:{placeId:t,bookmarkId:a},promise:U.removePlaceBookmark(a).then(function(){return{placeId:t,bookmarkId:a}}),meta:{toast:j.REMOVE_BOOKMARK_FAILED_TOAST}}:{type:M.CREATE_PLACE_BOOKMARK,payload:{placeId:t},promise:U.createPlaceBookmark(e,r.primary_place.id).then(function(e){var r=e.id;return{placeId:t,bookmarkId:r}}),meta:{toast:j.CREATE_BOOKMARK_FAILED_TOAST}}}function P(e){var r=(0,ae.getMeetupCollectionCacheKey)(e);return{type:M.FETCH_MEETUP_COLLECTION,promise:U.getMeetupCollection(e).then(function(r){return{city:e,response:r}}),meta:{toast:j.FETCH_FAILED_TOAST,onFailure:function(e){return(0,G.default)(e,{cacheKey:r})}}}}function h(e,r,t){var a=e.primary_place.id;return function(e){var o;e({type:M.CREATE_SCHEDULED_PLACE,payload:{placeId:a},promise:U.createPlaceReservation(a,r).then(function(r){e((0,ee.addPlaceToItinerarySucceeded)(r,t))}).then(function(){return{placeId:a}}),meta:{toasts:(o={},babelHelpers.defineProperty(o,j.CREATE_SCHEDULED_PLACE_SUCCEEDED_TOAST,{success:!0}),babelHelpers.defineProperty(o,j.CREATE_SCHEDULED_PLACE_FAILED_TOAST,{failure:!0}),o)}})}}function m(e,r){return{type:M.TOGGLE_ROW_REVIEWS,payload:{viewId:e,placeId:r}}}function R(){return function(e){e((0,g.removeToasts)(j.FETCH_FAILED_TOAST,j.CREATE_BOOKMARK_FAILED_TOAST,j.CREATE_PLACE_MEETUP_FAILED_TOAST,j.CREATE_PLACE_MEETUP_SUCCEEDED_TOAST,j.UNJOIN_PLACE_MEETUP_FAILED_TOAST,j.UNJOIN_PLACE_MEETUP_SUCCEEDED_TOAST,j.CREATE_SCHEDULED_PLACE_FAILED_TOAST,j.CREATE_SCHEDULED_PLACE_SUCCEEDED_TOAST,j.FETCH_FAILED_TOAST,j.FETCHED_EMPTY_GUIDEBOOK,j.REMOVE_BOOKMARK_FAILED_TOAST))}}Object.defineProperty(a,"__esModule",{value:!0}),a.closeErrorMessageClicked=n,a.fetch=i,a.fetchPDP=u,a.fetchMeetup=l,a.fetchGuidebookNearbyNow=c,a.fetchListingGuidebookPlaces=d,a.fetchLoggedInUserReservations=E,a.joinPlaceMeetup=p,a.unjoinPlaceMeetup=s,a.fetchGuidebookInsider=_,a.fetchRecommendations=f,a.fetchDetourData=T,a.retryToFetchView=y,a.mapRegionChanged=A,a.mapMarkerSelected=C,a.mapMarkerDeselected=I,a.mapUpdateClicked=b,a.highlightPlaceOnMap=v,a.highlightZoomPlaceOnMap=D,a.toggleHeart=O,a.fetchMeetupCollectionForCity=P,a.createScheduledPlace=h,a.toggleRowReviews=m,a.pressedCloseGuidebookScreen=R;var L=r(410),F=babelHelpers.interopRequireDefault(L),g=r(684),S=r(1920),H=babelHelpers.interopRequireWildcard(S),M=r(2029),K=r(2033),k=r(2036),U=babelHelpers.interopRequireWildcard(k),w=r(2037),G=babelHelpers.interopRequireDefault(w),N=r(2038),B=babelHelpers.interopRequireDefault(N),q=r(2039),V=babelHelpers.interopRequireDefault(q),j=r(2040),Y=r(2041),J=babelHelpers.interopRequireDefault(Y),W=r(2045),x=babelHelpers.interopRequireDefault(W),Q=r(2046),Z=r(2044),z=babelHelpers.interopRequireWildcard(Z),X=r(2042),$=babelHelpers.interopRequireDefault(X),ee=r(1930),re=r(376),te=babelHelpers.interopRequireDefault(re),ae=r(2047)},2035);