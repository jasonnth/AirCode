__d(function(e,t,n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.submitHostFeedback=r.updateFeedbackForGuest=r.createFeedbacksForTripInstance=r.loadFeedbackReasons=r.loadPayouts=r.loadReviews=r.loadStats=r.setEditedLocation=r.changeExperienceInstanceLocation=r.changeExperienceInstanceStartMinute=r.removeTripInstance=r.addTripInstance=r.loadTripInstance=r.loadSchedule=void 0;var a=t(562),o=babelHelpers.interopRequireDefault(a),i=t(759),s=babelHelpers.interopRequireDefault(i),u=t(376),d=babelHelpers.interopRequireDefault(u),c=t(1798),l=t(1802),p=t(1790),_=t(1774);r.loadSchedule=function(){if(!d.default.isLoggedIn())return null;var e=d.default.user().id;return{type:_.LOAD_SCHEDULE,promise:(0,l.fetchSchedule)(e).then(function(e){var t=e.operations;return{rawTripInstances:t[1].response.scheduled_trips,rawTripTemplates:t[0].response.trip_templates,timestamp:(0,o.default)().unix()}}),meta:{toast:p.LOAD_SCHEDULE_FAILED_TOAST}}},r.loadTripInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:_.LOAD_TRIP_INSTANCE,promise:(0,l.showTripInstance)(e.id).then(function(e){var t=e.operations;return{rawTripInstance:babelHelpers.extends({},t[0].response.scheduled_trip,{total_payout_native:t[1].response.metadata.total_payout_native}),rawPayouts:t[1].response.trip_host_payouts}}),meta:{toast:p.LOAD_TRIP_INSTANCE_FAILED_TOAST,onFailure:function(t){return(0,c.logError)(t,e)}}}},r.addTripInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tripTemplateId,n=e.selectedStartDate;return{type:_.ADD_TRIP_INSTANCE,promise:(0,l.createTripInstance)(t,n).then(function(e){return{rawTripInstance:e.scheduled_trip}}),meta:{toast:p.ADD_TRIP_INSTANCE_FAILED_TOAST,onFailure:function(t){return(0,c.logError)(t,e)}}}},r.removeTripInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tripInstance;return{type:_.REMOVE_TRIP_INSTANCE,payload:t.id,promise:(0,l.deleteTripInstance)(t.id).then(function(){return t}),meta:{toast:p.REMOVE_TRIP_INSTANCE_FAILED_TOAST,onFailure:function(t){return(0,c.logError)(t,e)}}}},r.changeExperienceInstanceStartMinute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startMinute,n=e.id;return{type:_.UPDATE_EXPERIENCE_INSTANCE,promise:(0,l.updateExperienceInstance)(n,{start_minute:t}).then(function(e){return{rawExperienceInstance:e.scheduled_experience}}),meta:{toast:p.UPDATE_EXPERIENCE_INSTANCE_TIME_FAILED_TOAST,onFailure:function(t){return(0,c.logError)(t,e)}}}},r.changeExperienceInstanceLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.location;return{type:_.UPDATE_EXPERIENCE_INSTANCE,promise:(0,l.updateExperienceInstance)(t,{location:(0,s.default)(n,["apt","city","country","directions","lat","lng","name","state","street_address","zipcode"])}).then(function(e){return{rawExperienceInstance:e.scheduled_experience}}),meta:{toast:p.UPDATE_EXPERIENCE_INSTANCE_LOCATION_FAILED_TOAST,onFailure:function(t){return(0,c.logError)(t,e)}}}},r.setEditedLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.geocode?{type:_.GEOCODE_EDITED_LOCATION,promise:(0,l.geocode)((0,s.default)(e,["street_address","city","state","country"])).then(function(t){var n=(0,s.default)(t.trip_geocodes[0],["lat","lng"]);if(!t.trip_geocodes[0].success)throw new Error("Geocode Failed");return babelHelpers.extends({},e,n)}),meta:{toast:p.GEOCODE_FAILED_TOAST,onFailure:function(t){return(0,c.logError)(t,e)}}}:{type:_.SET_EDITED_LOCATION,payload:e}},r.loadStats=function(){if(!d.default.isLoggedIn())return null;var e=d.default.user().id;return{type:_.LOAD_STATS,promise:(0,l.fetchStatsAndLastReview)(e).then(function(e){var t=e.operations,n=t[0].response.trip_host_stat,r=t[1].response.trip_host_reviews,a=1===r.length?r[0]:null,i=t[2].response.scheduled_trips;return{averageReviewRating:n.average_review_rating,payoutsTotalCount:n.total_payouts_count,rawLastReview:a,rawUnreviewedTripInstances:i,reviewRatings:n.review_ratings,reviewsTotalCount:n.total_reviews_count,timestamp:(0,o.default)().unix(),totalEarned:n.total_earned,totalPaid:n.total_paid}}),meta:{toast:p.LOAD_STATS_FAILED_TOAST}}},r.loadReviews=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!d.default.isLoggedIn())return null;var t=d.default.user().id,n=e.rating;return{type:_.LOAD_REVIEWS,promise:(0,l.fetchReviews)(babelHelpers.extends({},(0,s.default)(e,["limit","offset"]),{rating:n,host_id:t})).then(function(e){var t=e.metadata.reviews_count,r=e.trip_host_reviews,a=r.map(function(e){return e.scheduled_template}),o=r.map(function(e){return e.template});return{count:t,rating:n,rawReviews:r,rawTripInstances:a,rawTripTemplates:o}}),meta:{toast:p.LOAD_REVIEWS_FAILED_TOAST}}},r.loadPayouts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!d.default.isLoggedIn())return null;var t=d.default.user().id;return{type:_.LOAD_PAYOUTS,promise:(0,l.fetchPayouts)(babelHelpers.extends({},(0,s.default)(e,["limit","offset"]),{userId:t})).then(function(e){var t=e.metadata.total_count,n=e.trip_host_payouts;return{count:t,rawPayouts:n,rawTripInstances:n.map(function(e){return e.scheduled_template}),rawTripTemplates:n.map(function(e){return e.template})}}),meta:{toast:p.LOAD_PAYOUTS_FAILED_TOAST}}},r.loadFeedbackReasons=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:_.LOAD_FEEDBACK_REASONS,promise:(0,l.fetchHostFeedbackReasons)(e.tripInstanceId),meta:{toast:p.LOAD_FEEDBACK_REASONS_FAILED_TOAST}}},r.createFeedbacksForTripInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:_.CREATE_FEEDBACKS_FOR_TRIP_INSTANCE,payload:{tripInstanceId:e.tripInstanceId}}},r.updateFeedbackForGuest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:_.UPDATE_FEEDBACK_FOR_GUEST,payload:{guestProfileId:e.guestProfileId,feedback:(0,s.default)(e,["feedbackType","reviewReasonIds","reportReasonIds","details"])}}},r.submitHostFeedback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feedbackByGuestProfileId,n=e.tripInstanceId,r=d.default.user().id;return{type:_.SUBMIT_HOST_FEEDBACK,promise:(0,l.submitFeedback)(r,n,t),meta:{toast:p.SUBMIT_HOST_FEEDBACK_FAILED_TOAST,onFailure:function(t){return(0,c.logError)(t,e)}}}}},1797);