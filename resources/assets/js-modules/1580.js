__d(function(t,e,n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.SEARCH_BAR_HEIGHT=void 0;var r=e(412),o=babelHelpers.interopRequireDefault(r),i=e(271),l=babelHelpers.interopRequireDefault(i),s=e(44),p=e(1191),u=babelHelpers.interopRequireDefault(p),d=e(752),b=e(814),c=babelHelpers.interopRequireDefault(b),h=e(554),g=babelHelpers.interopRequireDefault(h),y=e(840),f=e(811),m=babelHelpers.interopRequireDefault(f),R=e(420),w=babelHelpers.interopRequireDefault(R),x=e(1581),P=babelHelpers.interopRequireDefault(x),H=w.default.isTablet?40:20,S=a.SEARCH_BAR_HEIGHT=104+H,v={buttonText:o.default.string,children:o.default.node.isRequired,onPressButton:o.default.func,scrollEnabled:o.default.bool,tabs:o.default.arrayOf(o.default.shape({buttonText:o.default.string,name:o.default.string.isRequired,url:c.default.isRequired})),tabsPressable:o.default.bool,width:o.default.number.isRequired},T={buttonText:null,onPressButton:function(){},scrollEnabled:!0,tabs:[],tabsPressable:!0},C=function(t){function e(n,a){babelHelpers.classCallCheck(this,e);var r=babelHelpers.possibleConstructorReturn(this,t.call(this,n,a));return r.state={buttonOpacity:new s.Animated.Value(0),scroll:new s.Animated.Value(0),tabsOpacity:new s.Animated.Value(0)},r.currentPageInterpolation=null,r.buttonOpacityHasAnimated=!1,r.hasReachedLastPage=!1,r.pageRange=[],r.scrollView=null,r.tabProperties={},r.layoutCalls=0,r.animateButtonOpacity=r.animateButtonOpacity.bind(r),r.animatedStyleForButton=r.animatedStyleForButton.bind(r),r.animatedStyleForChild=r.animatedStyleForChild.bind(r),r.animatedStyleForInitialOpacity=r.animatedStyleForInitialOpacity.bind(r),r.animatedStyleForText=r.animatedStyleForText.bind(r),r.animatedStyleForUnderlineContent=r.animatedStyleForUnderlineContent.bind(r),r.animatedStyleForUnderlineWrapper=r.animatedStyleForUnderlineWrapper.bind(r),r.currentPage=r.currentPage.bind(r),r.onScroll=r.onScroll.bind(r),r.onTabLayout=r.onTabLayout.bind(r),r.onTabPress=r.onTabPress.bind(r),r.setScrollView=r.setScrollView.bind(r),r.setPageRangeAndCurrentPageInterpolation(r.props.tabs.length),r}return babelHelpers.inherits(e,t),e.prototype.componentDidMount=function(){this.mounted=!0,this.animateButtonOpacity()},e.prototype.componentWillReceiveProps=function(t){this.props.tabs.length!==t.tabs.length&&this.setPageRangeAndCurrentPageInterpolation(t.tabs.length)},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.animateButtonOpacity=function(){s.Animated.sequence([s.Animated.delay(1e3),s.Animated.timing(this.state.buttonOpacity,{duration:250,toValue:1})]).start()},e.prototype.animatedStyleForButton=function(t){var e=this.state.buttonOpacity;return{bottom:this.currentPageInterpolation.interpolate({inputRange:this.pageRange,outputRange:this.pageRange.map(function(e){return e===t?12*g.default.bp:-10*g.default.bp})}),opacity:e}},e.prototype.animatedStyleForChild=function(t){return{transform:[{translateX:this.currentPageInterpolation.interpolate({inputRange:this.pageRange,outputRange:this.pageRange.map(function(e){return e===t?0:50})})}]}},e.prototype.animatedStyleForInitialOpacity=function(){return{opacity:this.state.tabsOpacity}},e.prototype.animatedStyleForText=function(t){return{opacity:this.currentPageInterpolation.interpolate({inputRange:this.pageRange,outputRange:this.pageRange.map(function(e){return e===t?1:.7})})}},e.prototype.animatedStyleForUnderlineContent=function(){var t=this;return{transform:[{scaleX:this.currentPageInterpolation.interpolate({inputRange:this.pageRange,outputRange:this.pageRange.map(function(e){var n=1;return t.tabProperties[e]&&(n=t.tabProperties[e].width/50),n})})}]}},e.prototype.animatedStyleForUnderlineWrapper=function(){var t=this;return{transform:[{translateX:this.currentPageInterpolation.interpolate({inputRange:this.pageRange,outputRange:this.pageRange.map(function(e){var n=50,a=g.default.baseRow.paddingHorizontal;return t.tabProperties[e]&&(n=t.tabProperties[e].width,a=t.tabProperties[e].x),a+.5*n})})}]}},e.prototype.currentPage=function(){var t=this.props.width;return this.state.scroll._value/t},e.prototype.onScroll=function(t){var e=this.props,n=e.tabs,a=e.width,r=t.nativeEvent.contentOffset.x;this.state.scroll.setValue(r),Math.ceil(r/a)===n.length-1&&(this.hasReachedLastPage=!0)},e.prototype.onTabLayout=function(t,e){var n=t.nativeEvent.layout,a=n.width,r=n.x;this.tabProperties[e]={width:a,x:r},this.layoutCalls+=1,this.layoutCalls>=this.props.tabs.length&&this.forceUpdate(),0===e&&s.Animated.timing(this.state.tabsOpacity,{duration:1e3,toValue:1}).start()},e.prototype.onTabPress=function(t){var e=this.props.width;this.scrollView.scrollTo({animated:!0,x:t*e})},e.prototype.setPageRangeAndCurrentPageInterpolation=function(t){var e=this.props.width;this.pageRange=(0,u.default)(t),this.currentPageInterpolation=this.state.scroll.interpolate({inputRange:this.pageRange.map(function(t){return t*e}),outputRange:this.pageRange})},e.prototype.setScrollView=function(t){this.scrollView=t},e.prototype.renderTabs=function(){var t=this,e=this.props,n=e.tabs,a=e.tabsPressable,r=e.width;return babelHelpers.jsx(s.View,{style:F.tabsWrapper},void 0,babelHelpers.jsx(s.Animated.View,{style:[F.tabs,this.animatedStyleForInitialOpacity(),{width:r}]},void 0,n.map(function(e,n){var r=e.name;return babelHelpers.jsx(s.View,{onLayout:function(e){return t.onTabLayout(e,n)},style:F.tab},r,babelHelpers.jsx(s.TouchableWithoutFeedback,{onPress:function(){a&&t.onTabPress(n)}},void 0,babelHelpers.jsx(s.Animated.Text,{style:[F.tabText,t.animatedStyleForText(n)]},void 0,r)))})))},e.prototype.renderUnderline=function(t){return babelHelpers.jsx(s.Animated.View,{style:[F.underlineWrapper,this.animatedStyleForUnderlineWrapper(),{marginLeft:-25}]},void 0,babelHelpers.jsx(s.Animated.View,{style:[F.underlineContent,this.animatedStyleForUnderlineContent(),{opacity:t,width:50}]}))},e.prototype.render=function(){var t=this,e=this.props,n=e.children,a=e.onPressButton,r=e.scrollEnabled,o=e.tabs,p=e.width,u=this.state.tabsOpacity,b=(0,y.getWindowHeight)();return babelHelpers.jsx(s.View,{style:[F.container,{height:b}]},void 0,this.renderTabs(),this.renderUnderline(u),babelHelpers.jsx(s.View,{style:F.swipe},void 0,babelHelpers.jsx(P.default,{horizontalContentOffset:0,onScroll:this.onScroll,onSetScrollView:this.setScrollView,scrollEnabled:r,scrollEventThrottle:16,showFullWidthItem:!0,showPositionIndicator:!1},void 0,i.Children.toArray(n).map(function(e,n){var r=o[n].buttonText,i=function(){n===o.length-1?a():t.onTabPress(n+1)};return babelHelpers.jsx(s.View,{style:d.ThemedStyleSheet.overflowHidden},n,babelHelpers.jsx(s.Animated.Image,{resizeMode:"cover",source:(0,m.default)(o[n].url),style:[t.animatedStyleForChild(n),{marginLeft:-50,height:b,width:p+100}]}),l.default.cloneElement(e,{style:[{zIndex:n},e.props.style]}),babelHelpers.jsx(s.Animated.View,{style:[F.button,t.animatedStyleForButton(n)]},n,babelHelpers.jsx(s.TouchableOpacity,{onPress:i,style:F.buttonWrapper},void 0,babelHelpers.jsx(s.Text,{style:F.buttonText},void 0,r))))}))))},e}(i.Component);a.default=C;var F=d.ThemedStyleSheet.create(function(t){var e=t.bp,n=t.color,a=t.font,r=22+4*e+4,o=r/2;return{container:{backgroundColor:n.black,flexDirection:"column"},button:{position:"absolute",zIndex:10,right:g.default.baseRow.paddingHorizontal},buttonWrapper:{backgroundColor:n.opacity(n.white,.85),borderBottomLeftRadius:o,borderTopLeftRadius:o,borderTopRightRadius:o,paddingHorizontal:6*e,paddingVertical:1.5*e},buttonText:babelHelpers.extends({},a.regularPlus,{color:n.textDark,backgroundColor:n.clear}),swipe:{flex:1},tab:{marginRight:3*e,left:g.default.baseRow.paddingHorizontal},tabs:{alignItems:"flex-start",flex:1,flexDirection:"row",top:96},tabsWrapper:{backgroundColor:n.opacity(n.black,.15),flex:1,height:S,position:"absolute",zIndex:1},tabText:babelHelpers.extends({},a.smallBold,{color:n.white,lineHeight:18}),underlineContent:{borderBottomColor:n.white,borderBottomWidth:2},underlineWrapper:{position:"absolute",top:S-2,width:1,zIndex:1}}});C.defaultProps=T,C.propTypes=v},1580);