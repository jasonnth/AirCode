__d(function(t,e,n,a){function r(t){return t&&t.__esModule?t:{default:t}}function E(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return""+String(t())+String(t())+"-"+String(t())+"-"+String(t())+"-"+String(t())+"-"+String(t())+String(t())+String(t())}function I(t,e,n){return function(a){a({type:x,payload:n,meta:{threadType:t,threadID:e,transactionID:E()}})}}function S(t,e){return B({threadType:t,threadID:e,fn:function(){function n(n,a,r,I){var S=E();return n({type:b,payload:null,meta:{threadType:t,threadID:e,transactionID:S}}),a.loadParticipants({threadID:e,thread:r,store:I}).then(function(a){n({type:j,payload:a,meta:{threadType:t,threadID:e,transactionID:S}})},function(a){return n({type:z,payload:a,meta:{threadType:t,threadID:e,transactionID:S}})})}return n}()})}function T(t,e){return B({threadType:t,threadID:e,fn:function(){function n(n,a,r,I){var T=E();return n({type:v,payload:null,meta:{threadType:t,threadID:e,transactionID:T}}),a.loadNewerItems({threadID:e,store:I,transactionID:T}).then(function(a){n({type:G,payload:a,meta:{threadType:t,threadID:e,transactionID:T}}),n(S(t,e))},function(a){n({type:Y,payload:a,meta:{threadType:t,threadID:e,transactionID:T}})})}return n}()})}function i(t,e){return B({threadType:t,threadID:e,fn:function(){function n(n,a,r,I){var T=E();return n({type:w,payload:null,meta:{threadType:t,threadID:e,transactionID:T}}),a.loadOlderItems({threadID:e,store:I,transactionID:T}).then(function(a){n({type:W,payload:a,meta:{threadType:t,threadID:e,transactionID:T}}),a.items.length&&n(S(t,e))},function(a){return n({type:Z,payload:a,meta:{threadType:t,threadID:e,transactionID:T}})})}return n}()})}function o(t,e){return B({threadType:t,threadID:e,fn:function(){function n(n,a,r,E){return a.pollForUpdates({threadID:e,store:E}).then(function(a){if(!a.isEmpty()){var E=a;r&&!r.getActionStatus(L.ACTION_TYPE.POLL_FOR_UPDATES).error&&(E=a.setActionStatus(new y.default({type:L.ACTION_TYPE.POLL_FOR_UPDATES,started:!0,finished:!0}))),n(I(t,e,E))}},function(a){if(r&&!r.getActionStatus(L.ACTION_TYPE.POLL_FOR_UPDATES).error){var E=new y.default({type:L.ACTION_TYPE.POLL_FOR_UPDATES,started:!0,finished:!0,error:a});n(I(t,e,new g.default({actionStatus:E})))}})}return n}()})}function d(t,e,n){return B({threadType:t,threadID:e,fn:function(){function a(a,r,E,I){var S=p.default.getAutoRefreshInterval(t,E,I.getNewestItem(t,e)),T=null==E||E.get("isMounted");S&&T&&(a(o(t,e)),setTimeout(n(a,n),S))}return a}()})}function u(t,e){var n=function(n,a){return function(){return n(d(t,e,a))}};return B({threadType:t,threadID:e,fn:function(){function a(a,r,I,S){var i=E();return a({type:m,meta:{threadType:t,threadID:e,transactionID:i}}),r.loadThread({threadID:e,thread:I,store:S}).then(function(E){return r.getViewerID().then(function(r){a({type:F,payload:{thread:E,viewerID:r},meta:{threadType:t,threadID:e,transactionID:i}}),p.default.getAutoRefreshInterval(t,E,S.getNewestItem(t,e))?n(a,n)():a(T(t,e))})}).catch(function(n){return a({type:l,payload:n,meta:{threadType:t,threadID:e,transactionID:i}})})}return a}()})}function _(t,e){return B({threadType:t,threadID:e,fn:function(){function n(n){var a=E();n({type:q,meta:{threadType:t,threadID:e,transactionID:a}})}return n}()})}function A(t,e,n,a,r){return function(E){return t.sendItem({item:r}).then(function(t){E({type:H,payload:t,meta:{threadType:e,threadID:n,transactionID:a}}),E(S(e,n))},function(t){return E({type:P,payload:t,meta:{threadType:e,threadID:n,transactionID:a}})})}}function s(t,e,n,a){return B({threadType:t,threadID:e,fn:function(){function r(r,I){var S=E(),T=p.default.getItemAdapter(t),i=T({id:S,threadID:e,contentType:n,content:a});return r({type:R,payload:i,meta:{threadType:t,threadID:e,transactionID:S}}),r(A(I,t,e,S,i))}return r}()})}function c(t,e,n){return B({threadType:t,threadID:e,fn:function(){function a(a,r){r.cancelSendItem({item:n}).then(function(r){var I=E();a({type:r?U:O,payload:n,meta:{threadType:t,threadID:e,transactionID:I}})})}return a}()})}function D(t,e,n){return B({threadType:t,threadID:e,fn:function(){function a(a,r){var I=E();return a({type:M,payload:n,meta:{threadType:t,threadID:e,transactionID:I}}),a(A(r,t,e,I,n))}return a}()})}function h(t,e,n){return B({threadType:t,threadID:e,fn:function(){function a(a,r,I,S){var T=E(),i=I.get("items").filter(function(t){return t.readStatus===L.READ_STATUS.UNREAD&&t.id in n});return r.updateLastSeen({threadID:e,items:i}).then(function(){a({type:V,payload:n,meta:{threadID:e,threadType:t,transactionID:T}})},function(n){return a({type:k,payload:n,meta:{threadType:t,threadID:e,transactionID:T}})})}return a}()})}Object.defineProperty(a,"__esModule",{value:!0}),a.APPLY_PAYLOAD=a.THREAD_UNMOUNT=a.UPDATE_LAST_SEEN_FAIL=a.UPDATE_LAST_SEEN=a.FETCH_PARTICIPANTS_FAIL=a.FETCH_PARTICIPANTS_SUCCESS=a.FETCH_PARTICIPANTS=a.FETCH_OLDER_FAIL=a.FETCH_OLDER_SUCCESS=a.FETCH_OLDER=a.FETCH_NEWER_FAIL=a.FETCH_NEWER_SUCCESS=a.FETCH_NEWER=a.RETRY_SEND_MESSAGE=a.MESSAGE_SENT_CANCEL_FAIL=a.MESSAGE_SENT_CANCEL_SUCCESS=a.MESSAGE_SENT_SUCCESS=a.MESSAGE_SENT_FAIL=a.MESSAGE_SENT=a.THREAD_INITIALIZE_SUCCESS=a.THREAD_INITIALIZE_FAIL=a.THREAD_INITIALIZE=void 0,a.applyPayload=I,a.fetchParticipants=S,a.fetchNewerItems=T,a.fetchOlderItems=i,a.pollForUpdates=o,a.autoRefreshThread=d,a.initializeThread=u,a.unmountThread=_,a.sendMessage=s,a.cancelSendMessage=c,a.retrySend=D,a.updateLastSeen=h;var f=e(2226),p=r(f),C=e(2230),y=r(C),N=e(2228),g=r(N),L=e(2233),m=a.THREAD_INITIALIZE="messaging/THREAD_INITIALIZE",l=a.THREAD_INITIALIZE_FAIL="messaging/THREAD_INITIALIZE_FAIL",F=a.THREAD_INITIALIZE_SUCCESS="messaging/THREAD_INITIALIZE_SUCCESS",R=a.MESSAGE_SENT="messaging/MESSAGE_SENT",P=a.MESSAGE_SENT_FAIL="messaging/MESSAGE_SENT_FAIL",H=a.MESSAGE_SENT_SUCCESS="messaging/MESSAGE_SENT_SUCCESS",U=a.MESSAGE_SENT_CANCEL_SUCCESS="messaging/MESSAGE_SENT_CANCEL_SUCCESS",O=a.MESSAGE_SENT_CANCEL_FAIL="messaging/MESSAGE_SENT_CANCEL_FAIL",M=a.RETRY_SEND_MESSAGE="messaging/RETRY_SEND_MESSAGE",v=a.FETCH_NEWER="messaging/FETCH_NEWER",G=a.FETCH_NEWER_SUCCESS="messaging/FETCH_NEWER_SUCCESS",Y=a.FETCH_NEWER_FAIL="messaging/FETCH_NEWER_FAIL",w=a.FETCH_OLDER="messaging/FETCH_OLDER",W=a.FETCH_OLDER_SUCCESS="messaging/FETCH_OLDER_SUCCESS",Z=a.FETCH_OLDER_FAIL="messaging/FETCH_OLDER_FAIL",b=a.FETCH_PARTICIPANTS="messaging/FETCH_PARTICIPANTS",j=a.FETCH_PARTICIPANTS_SUCCESS="messaging/FETCH_PARTICIPANTS_SUCCESS",z=a.FETCH_PARTICIPANTS_FAIL="messaging/FETCH_PARTICIPANTS_FAIL",V=a.UPDATE_LAST_SEEN="messaging/UPDATE_LAST_SEEN",k=a.UPDATE_LAST_SEEN_FAIL="messaging/UPDATE_LAST_SEEN_FAIL",q=a.THREAD_UNMOUNT="messaging/THREAD_UNMOUNT",x=a.APPLY_PAYLOAD="messaging/APPLY_PAYLOAD",B=function(t){var e=t.threadType,n=t.newThread,a=t.threadID,r=t.fn;return function(t,E){var I=E().messaging,S=n||I.getThread(e,a),T=p.default.getDataSource(e);return r(t,T,S,I)}}},2232);