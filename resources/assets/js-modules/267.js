__d(function(t,e,i,n){"use strict";function o(t,e,i){return t[e][i]}function s(t,e){return t[e]}function r(t){for(var e=0,i=0;i<t.length;i++){e+=t[i].length}return e}function a(t){if(d(t))return{};for(var e={},i=0;i<t.length;i++){var n=t[i];c(!e[n],"Value appears more than once in array: "+n),e[n]=!0}return e}var h=e(18),d=e(268),c=e(22),u=function(){function t(e){babelHelpers.classCallCheck(this,t),h(e&&"function"==typeof e.rowHasChanged,"Must provide a rowHasChanged function."),this._rowHasChanged=e.rowHasChanged,this._getRowData=e.getRowData||o,this._sectionHeaderHasChanged=e.sectionHeaderHasChanged,this._getSectionHeaderData=e.getSectionHeaderData||s,this._dataBlob=null,this._dirtyRows=[],this._dirtySections=[],this._cachedRowCount=0,this.rowIdentities=[],this.sectionIdentities=[]}return t.prototype.cloneWithRows=function(t,e){var i=e?[e]:null;return this._sectionHeaderHasChanged||(this._sectionHeaderHasChanged=function(){return!1}),this.cloneWithRowsAndSections({s1:t},["s1"],i)},t.prototype.cloneWithRowsAndSections=function(e,i,n){h("function"==typeof this._sectionHeaderHasChanged,"Must provide a sectionHeaderHasChanged function with section data."),h(!i||!n||i.length===n.length,"row and section ids lengths must be the same");var o=new t({getRowData:this._getRowData,getSectionHeaderData:this._getSectionHeaderData,rowHasChanged:this._rowHasChanged,sectionHeaderHasChanged:this._sectionHeaderHasChanged});return o._dataBlob=e,o.sectionIdentities=i||Object.keys(e),n?o.rowIdentities=n:(o.rowIdentities=[],o.sectionIdentities.forEach(function(t){o.rowIdentities.push(Object.keys(e[t]))})),o._cachedRowCount=r(o.rowIdentities),o._calculateDirtyArrays(this._dataBlob,this.sectionIdentities,this.rowIdentities),o},t.prototype.getRowCount=function(){return this._cachedRowCount},t.prototype.getRowAndSectionCount=function(){return this._cachedRowCount+this.sectionIdentities.length},t.prototype.rowShouldUpdate=function(t,e){var i=this._dirtyRows[t][e];return c(void 0!==i,"missing dirtyBit for section, row: "+t+", "+e),i},t.prototype.getRowData=function(t,e){var i=this.sectionIdentities[t],n=this.rowIdentities[t][e];return c(void 0!==i&&void 0!==n,"rendering invalid section, row: "+t+", "+e),this._getRowData(this._dataBlob,i,n)},t.prototype.getRowIDForFlatIndex=function(t){for(var e=t,i=0;i<this.sectionIdentities.length;i++){if(!(e>=this.rowIdentities[i].length))return this.rowIdentities[i][e];e-=this.rowIdentities[i].length}return null},t.prototype.getSectionIDForFlatIndex=function(t){for(var e=t,i=0;i<this.sectionIdentities.length;i++){if(!(e>=this.rowIdentities[i].length))return this.sectionIdentities[i];e-=this.rowIdentities[i].length}return null},t.prototype.getSectionLengths=function(){for(var t=[],e=0;e<this.sectionIdentities.length;e++)t.push(this.rowIdentities[e].length);return t},t.prototype.sectionHeaderShouldUpdate=function(t){var e=this._dirtySections[t];return c(void 0!==e,"missing dirtyBit for section: "+t),e},t.prototype.getSectionHeaderData=function(t){if(!this._getSectionHeaderData)return null;var e=this.sectionIdentities[t];return c(void 0!==e,"renderSection called on invalid section: "+t),this._getSectionHeaderData(this._dataBlob,e)},t.prototype._calculateDirtyArrays=function(t,e,i){for(var n=a(e),o={},s=0;s<i.length;s++){var r=e[s];c(!o[r],"SectionID appears more than once: "+r),o[r]=a(i[s])}this._dirtySections=[],this._dirtyRows=[];for(var h,d=0;d<this.sectionIdentities.length;d++){var r=this.sectionIdentities[d];h=!n[r];var u=this._sectionHeaderHasChanged;!h&&u&&(h=u(this._getSectionHeaderData(t,r),this._getSectionHeaderData(this._dataBlob,r))),this._dirtySections.push(!!h),this._dirtyRows[d]=[];for(var g=0;g<this.rowIdentities[d].length;g++){var l=this.rowIdentities[d][g];h=!n[r]||!o[r][l]||this._rowHasChanged(this._getRowData(t,r,l),this._getRowData(this._dataBlob,r,l)),this._dirtyRows[d].push(!!h)}}},t}();i.exports=u},267);