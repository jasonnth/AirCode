__d(function(e,t,i,r){function s(e,t){return(0,D.isGoodTripReview)(e)?v.default.phrase("Anything %{hostFirstName} can improve on?",{hostFirstName:t.firstName},"Title on private feedback screen for trip hosts"):v.default.phrase("What could have been better?",null,"Title on private feedback screen for trip hosts for poor reviews")}Object.defineProperty(r,"__esModule",{value:!0});var n=t(412),o=babelHelpers.interopRequireDefault(n),a=t(271),l=babelHelpers.interopRequireDefault(a),u=t(44),p=t(790),b=t(654),d=t(759),c=babelHelpers.interopRequireDefault(d),f=t(379),v=babelHelpers.interopRequireDefault(f),h=t(773),g=babelHelpers.interopRequireDefault(h),R=t(410),m=babelHelpers.interopRequireDefault(R),w=t(422),T=babelHelpers.interopRequireDefault(w),y=t(1404),P=babelHelpers.interopRequireDefault(y),C=t(2173),H=babelHelpers.interopRequireDefault(C),q=t(2170),F=babelHelpers.interopRequireDefault(q),S=t(2175),_=t(2191),k=t(2192),x=t(1923),I=babelHelpers.interopRequireWildcard(x),D=t(2178),A=t(2195),E=babelHelpers.interopRequireDefault(A),j={changeReview:o.default.func.isRequired,isSaving:o.default.bool.isRequired,recipient:_.RecipientShape.isRequired,review:_.ReviewShape.isRequired,questions:_.QuestionList.isRequired,saveReview:o.default.func.isRequired,showTripReviewV2Questions:o.default.bool.isRequired,submitReview:o.default.func.isRequired},L=function(e){function t(i,r){babelHelpers.classCallCheck(this,t);var s=babelHelpers.possibleConstructorReturn(this,e.call(this,i,r));return s.state={isSubmitting:!1},s.textInput=null,s.setInput=s.setInput.bind(s),s.onFeedbackChange=s.onFeedbackChange.bind(s),s.onPrimaryPress=s.onPrimaryPress.bind(s),s.onTagsChange=s.onTagsChange.bind(s),s.onFocus=s.onFocus.bind(s),s}return babelHelpers.inherits(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.review,i=t.hasSubmitted;this.state.isSubmitting&&i&&((0,D.logConfirmPrivateFeedback)(t),this.setState({isSubmitting:!1}),m.default.push(I.TRIP_THANK_YOU))},t.prototype.setInput=function(e){this.textInput=e},t.prototype.onFocus=function(){(0,D.logClickPrivateFeedback)(this.props.review)},t.prototype.onFeedbackChange=function(e){this.props.changeReview({privateFeedback:e})},t.prototype.onPrimaryPress=function(){var e=this.props,t=e.review,i=e.showTripReviewV2Questions;(0,D.isGoodTripReview)(t)?(this.setState({isSubmitting:!0}),this.props.submitReview()):((0,D.logConfirmPrivateFeedback)(t),this.props.saveReview(),i?m.default.push(I.TRIP_EXPECTATIONS_FEEDBACK):m.default.push(I.TRIP_PUBLIC_FEEDBACK))},t.prototype.onTagsChange=function(e){var t=this.props.review;(0,D.logToggleKeywords)(t,e,"what_to_improve","improvement",e.length>t.selectedListingTags.length),this.props.changeReview({selectedListingTags:e})},t.prototype.componentWillUnmount=function(){(0,D.logDismissPrivateFeedback)(this.props.review)},t.prototype.render=function(){var e=this,t=this.props,i=t.isSaving,r=t.questions,n=t.recipient,o=t.review,a=o.privateFeedback,l=this.state.isSubmitting,p=r.find(function(e){return e.category===D.CATEGORY_ON_TRIP_PRIVATE_FEEDBACK_PAGE}),b=p.text,d=v.default.phrase("Leave additional feedback",null,"Placeholder text for leaving additional details on trip private feedback page"),c=void 0;return"ios"===u.Platform.OS&&(c=V.marqueeContainer),babelHelpers.jsx(u.View,{style:u.StyleSheet.absoluteFill},void 0,babelHelpers.jsx(H.default,{inputRef:this.setInput,onChangeText:this.onFeedbackChange,value:a,onFocus:this.onFocus,placeholder:d,autoFocus:!1,withInsets:[F.default],renderAboveInput:function(){return babelHelpers.jsx(u.View,{style:c},void 0,babelHelpers.jsx(g.default,{title:s(o,n)}),babelHelpers.jsx(u.View,{style:V.selectionsContainer},void 0,!!b&&babelHelpers.jsx(u.Text,{style:V.displayQuestionTitle},void 0,b),babelHelpers.jsx(P.default,{babu:!0,options:p.choices,values:o.selectedListingTags,onChange:e.onTagsChange})))},renderFooter:function(){return babelHelpers.jsx(F.default,{onPrimaryPress:e.onPrimaryPress,primaryLoading:l&&i,primaryIcon:"chevron-right"})}}),babelHelpers.jsx(E.default,{onSaveTryAgainPress:this.onPrimaryPress}))},t}(l.default.Component);L.propTypes=j;var V=T.default.create(function(e){var t=e.bp,i=e.font;return{selectionsContainer:{paddingHorizontal:e.size.horizontal.medium},marqueeContainer:{marginLeft:-5},displayQuestionTitle:babelHelpers.extends({},i.regular,{marginBottom:t})}});r.default=(0,p.connect)(function(e){return(0,c.default)((0,S.rootSelector)(e),["isSaving","questions","recipient","review","showTripReviewV2Questions"])},function(e){return(0,b.bindActionCreators)({changeReview:k.changeReview,saveReview:k.saveReview,submitReview:k.submitReview},e)})(L)},2212);